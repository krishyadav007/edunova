/*!
 * jQuery JavaScript Library v1.12.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-02-22T19:07Z
 */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=fe.type(e);return"function"===n||fe.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(fe.isFunction(t))return fe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return fe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ce.test(t))return fe.filter(t,e,n);t=fe.filter(t,e)}return fe.grep(e,function(e){return fe.inArray(e,t)>-1!==n})}function o(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function r(e){var t={};return fe.each(e.match(Ae)||[],function(e,n){t[n]=!0}),t}function s(){ie.addEventListener?(ie.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a)):(ie.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(ie.addEventListener||"load"===e.event.type||"complete"===ie.readyState)&&(s(),fe.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(Ie,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Fe.test(n)?fe.parseJSON(n):n}catch(o){}fe.data(e,t,n)}else n=void 0}return n}function c(e){var t;for(t in e)if(("data"!==t||!fe.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(e,t,n,i){if(Oe(e)){var o,r,s=fe.expando,a=e.nodeType,l=a?fe.cache:e,c=a?e[s]:e[s]&&s;if(c&&l[c]&&(i||l[c].data)||void 0!==n||"string"!=typeof t)return c||(c=a?e[s]=ne.pop()||fe.guid++:s),l[c]||(l[c]=a?{}:{toJSON:fe.noop}),"object"!=typeof t&&"function"!=typeof t||(i?l[c]=fe.extend(l[c],t):l[c].data=fe.extend(l[c].data,t)),r=l[c],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[fe.camelCase(t)]=n),"string"==typeof t?(o=r[t],null==o&&(o=r[fe.camelCase(t)])):o=r,o}}function d(e,t,n){if(Oe(e)){var i,o,r=e.nodeType,s=r?fe.cache:e,a=r?e[fe.expando]:fe.expando;if(s[a]){if(t&&(i=n?s[a]:s[a].data)){fe.isArray(t)?t=t.concat(fe.map(t,fe.camelCase)):t in i?t=[t]:(t=fe.camelCase(t),t=t in i?[t]:t.split(" ")),o=t.length;for(;o--;)delete i[t[o]];if(n?!c(i):!fe.isEmptyObject(i))return}(n||(delete s[a].data,c(s[a])))&&(r?fe.cleanData([e],!0):de.deleteExpando||s!=s.window?delete s[a]:s[a]=void 0)}}}function p(e,t,n,i){var o,r=1,s=20,a=i?function(){return i.cur()}:function(){return fe.css(e,t,"")},l=a(),c=n&&n[3]||(fe.cssNumber[t]?"":"px"),u=(fe.cssNumber[t]||"px"!==c&&+l)&&Le.exec(fe.css(e,t));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do r=r||".5",u/=r,fe.style(e,t,u+c);while(r!==(r=a()/l)&&1!==r&&--s)}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}function f(e){var t=qe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function h(e,t){var n,i,o=0,r="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],n=e.childNodes||e;null!=(i=n[o]);o++)!t||fe.nodeName(i,t)?r.push(i):fe.merge(r,h(i,t));return void 0===t||t&&fe.nodeName(e,t)?fe.merge([e],r):r}function g(e,t){for(var n,i=0;null!=(n=e[i]);i++)fe._data(n,"globalEval",!t||fe._data(t[i],"globalEval"))}function m(e){je.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t,n,i,o){for(var r,s,a,l,c,u,d,p=e.length,v=f(t),b=[],y=0;p>y;y++)if(s=e[y],s||0===s)if("object"===fe.type(s))fe.merge(b,s.nodeType?[s]:s);else if(Ke.test(s)){for(l=l||v.appendChild(t.createElement("div")),c=(He.exec(s)||["",""])[1].toLowerCase(),d=We[c]||We._default,l.innerHTML=d[1]+fe.htmlPrefilter(s)+d[2],r=d[0];r--;)l=l.lastChild;if(!de.leadingWhitespace&&Ue.test(s)&&b.push(t.createTextNode(Ue.exec(s)[0])),!de.tbody)for(s="table"!==c||Xe.test(s)?"<table>"!==d[1]||Xe.test(s)?0:l:l.firstChild,r=s&&s.childNodes.length;r--;)fe.nodeName(u=s.childNodes[r],"tbody")&&!u.childNodes.length&&s.removeChild(u);for(fe.merge(b,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=v.lastChild}else b.push(t.createTextNode(s));for(l&&v.removeChild(l),de.appendChecked||fe.grep(h(b,"input"),m),y=0;s=b[y++];)if(i&&fe.inArray(s,i)>-1)o&&o.push(s);else if(a=fe.contains(s.ownerDocument,s),l=h(v.appendChild(s),"script"),a&&g(l),n)for(r=0;s=l[r++];)ze.test(s.type||"")&&n.push(s);return l=null,v}function b(){return!0}function y(){return!1}function w(){try{return ie.activeElement}catch(e){}}function E(e,t,n,i,o,r){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(a in t)E(e,a,n,i,t[a],r);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),o===!1)o=y;else if(!o)return e;return 1===r&&(s=o,o=function(e){return fe().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=fe.guid++)),e.each(function(){fe.event.add(this,t,o,i,n)})}function x(e,t){return fe.nodeName(e,"table")&&fe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function C(e){return e.type=(null!==fe.find.attr(e,"type"))+"/"+e.type,e}function S(e){var t=ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){if(1===t.nodeType&&fe.hasData(e)){var n,i,o,r=fe._data(e),s=fe._data(t,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)fe.event.add(t,n,a[n][i])}s.data&&(s.data=fe.extend({},s.data))}}function k(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!de.noCloneEvent&&t[fe.expando]){o=fe._data(t);for(i in o.events)fe.removeEvent(t,i,o.handle);t.removeAttribute(fe.expando)}"script"===n&&t.text!==e.text?(C(t).text=e.text,S(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),de.html5Clone&&e.innerHTML&&!fe.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&je.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function $(e,t,n,i){t=re.apply([],t);var o,r,s,a,l,c,u=0,d=e.length,p=d-1,f=t[0],g=fe.isFunction(f);if(g||d>1&&"string"==typeof f&&!de.checkClone&&it.test(f))return e.each(function(o){var r=e.eq(o);g&&(t[0]=f.call(this,o,r.html())),$(r,t,n,i)});if(d&&(c=v(t,e[0].ownerDocument,!1,e,i),o=c.firstChild,1===c.childNodes.length&&(c=o),o||i)){for(a=fe.map(h(c,"script"),C),s=a.length;d>u;u++)r=c,u!==p&&(r=fe.clone(r,!0,!0),s&&fe.merge(a,h(r,"script"))),n.call(e[u],r,u);if(s)for(l=a[a.length-1].ownerDocument,fe.map(a,S),u=0;s>u;u++)r=a[u],ze.test(r.type||"")&&!fe._data(r,"globalEval")&&fe.contains(l,r)&&(r.src?fe._evalUrl&&fe._evalUrl(r.src):fe.globalEval((r.text||r.textContent||r.innerHTML||"").replace(rt,"")));c=o=null}return e}function _(e,t,n){for(var i,o=t?fe.filter(t,e):e,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||fe.cleanData(h(i)),i.parentNode&&(n&&fe.contains(i.ownerDocument,i)&&g(h(i,"script")),i.parentNode.removeChild(i));return e}function A(e,t){var n=fe(t.createElement(e)).appendTo(t.body),i=fe.css(n[0],"display");return n.detach(),i}function N(e){var t=ie,n=ct[e];return n||(n=A(e,t),"none"!==n&&n||(lt=(lt||fe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(lt[0].contentWindow||lt[0].contentDocument).document,t.write(),t.close(),n=A(e,t),lt.detach()),ct[e]=n),n}function D(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function O(e){if(e in St)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Ct.length;n--;)if(e=Ct[n]+t,e in St)return e}function F(e,t){for(var n,i,o,r=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(r[s]=fe._data(i,"olddisplay"),n=i.style.display,t?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Be(i)&&(r[s]=fe._data(i,"olddisplay",N(i.nodeName)))):(o=Be(i),(n&&"none"!==n||!o)&&fe._data(i,"olddisplay",o?n:fe.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[s]||"":"none"));return e}function I(e,t,n){var i=wt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function R(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=fe.css(e,n+Me[r],!0,o)),i?("content"===n&&(s-=fe.css(e,"padding"+Me[r],!0,o)),"margin"!==n&&(s-=fe.css(e,"border"+Me[r]+"Width",!0,o))):(s+=fe.css(e,"padding"+Me[r],!0,o),"padding"!==n&&(s+=fe.css(e,"border"+Me[r]+"Width",!0,o)));return s}function L(t,n,i){var o=!0,r="width"===n?t.offsetWidth:t.offsetHeight,s=ht(t),a=de.boxSizing&&"border-box"===fe.css(t,"boxSizing",!1,s);if(ie.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(r=Math.round(100*t.getBoundingClientRect()[n])),0>=r||null==r){if(r=gt(t,n,s),(0>r||null==r)&&(r=t.style[n]),dt.test(r))return r;o=a&&(de.boxSizingReliable()||r===t.style[n]),r=parseFloat(r)||0}return r+R(t,n,i||(a?"border":"content"),o,s)+"px"}function M(e,t,n,i,o){return new M.prototype.init(e,t,n,i,o)}function B(){return e.setTimeout(function(){Tt=void 0}),Tt=fe.now()}function P(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=Me[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function j(e,t,n){for(var i,o=(U.tweeners[t]||[]).concat(U.tweeners["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,t,e))return i}function H(e,t,n){var i,o,r,s,a,l,c,u,d=this,p={},f=e.style,h=e.nodeType&&Be(e),g=fe._data(e,"fxshow");n.queue||(a=fe._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,fe.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=fe.css(e,"display"),u="none"===c?fe._data(e,"olddisplay")||N(e.nodeName):c,"inline"===u&&"none"===fe.css(e,"float")&&(de.inlineBlockNeedsLayout&&"inline"!==N(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",de.shrinkWrapBlocks()||d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],$t.exec(o)){if(delete t[i],r=r||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;h=!0}p[i]=g&&g[i]||fe.style(e,i)}else c=void 0;if(fe.isEmptyObject(p))"inline"===("none"===c?N(e.nodeName):c)&&(f.display=c);else{g?"hidden"in g&&(h=g.hidden):g=fe._data(e,"fxshow",{}),r&&(g.hidden=!h),h?fe(e).show():d.done(function(){fe(e).hide()}),d.done(function(){var t;fe._removeData(e,"fxshow");for(t in p)fe.style(e,t,p[t])});for(i in p)s=j(h?g[i]:0,i,d),i in g||(g[i]=s.start,h&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function z(e,t){var n,i,o,r,s;for(n in e)if(i=fe.camelCase(n),o=t[i],r=e[n],fe.isArray(r)&&(o=r[1],r=e[n]=r[0]),n!==i&&(e[i]=r,delete e[n]),s=fe.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete e[i];for(n in r)n in e||(e[n]=r[n],t[n]=o)}else t[i]=o}function U(e,t,n){var i,o,r=0,s=U.prefilters.length,a=fe.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Tt||B(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(r);return a.notifyWith(e,[c,r,n]),1>r&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:fe.extend({},t),opts:fe.extend(!0,{specialEasing:{},easing:fe.easing._default},n),originalProperties:t,originalOptions:n,startTime:Tt||B(),duration:n.duration,tweens:[],createTween:function(t,n){var i=fe.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(z(u,c.opts.specialEasing);s>r;r++)if(i=U.prefilters[r].call(c,e,u,c.opts))return fe.isFunction(i.stop)&&(fe._queueHooks(c.elem,c.opts.queue).stop=fe.proxy(i.stop,i)),i;return fe.map(u,j,c),fe.isFunction(c.opts.start)&&c.opts.start.call(e,c),fe.fx.timer(fe.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function q(e){return fe.attr(e,"class")||""}function W(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(Ae)||[];if(fe.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function K(e,t,n,i){function o(a){var l;return r[a]=!0,fe.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=e===Gt;return o(t.dataTypes[0])||!r["*"]&&o("*")}function X(e,t){var n,i,o=fe.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&fe.extend(!0,e,n),e}function Y(e,t,n){for(var i,o,r,s,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}i||(i=s)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function V(e,t,n,i){var o,r,s,a,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(r=u.shift();r;)if(e.responseFields[r]&&(n[e.responseFields[r]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=c[l+" "+r]||c["* "+r],!s)for(o in c)if(a=o.split(" "),a[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[o]:c[o]!==!0&&(r=a[0],u.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function Q(e){return e.style&&e.style.display||fe.css(e,"display")}function G(e){for(;e&&1===e.nodeType;){if("none"===Q(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function J(e,t,n,i){var o;if(fe.isArray(t))fe.each(t,function(t,o){n||nn.test(e)?i(e,o):J(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==fe.type(t))i(e,t);else for(o in t)J(e+"["+o+"]",t[o],n,i)}function Z(){try{return new e.XMLHttpRequest}catch(t){}}function ee(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function te(e){return fe.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var ne=[],ie=e.document,oe=ne.slice,re=ne.concat,se=ne.push,ae=ne.indexOf,le={},ce=le.toString,ue=le.hasOwnProperty,de={},pe="1.12.1",fe=function(e,t){return new fe.fn.init(e,t)},he=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,me=/-([\da-z])/gi,ve=function(e,t){return t.toUpperCase()};fe.fn=fe.prototype={jquery:pe,constructor:fe,selector:"",length:0,toArray:function(){return oe.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:oe.call(this)},pushStack:function(e){var t=fe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return fe.each(this,e)},map:function(e){return this.pushStack(fe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:se,sort:ne.sort,splice:ne.splice},fe.extend=fe.fn.extend=function(){var e,t,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||fe.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(i in o)e=s[i],n=o[i],s!==n&&(c&&n&&(fe.isPlainObject(n)||(t=fe.isArray(n)))?(t?(t=!1,r=e&&fe.isArray(e)?e:[]):r=e&&fe.isPlainObject(e)?e:{},s[i]=fe.extend(c,r,n)):void 0!==n&&(s[i]=n));return s},fe.extend({expando:"jQuery"+(pe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===fe.type(e)},isArray:Array.isArray||function(e){return"array"===fe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!fe.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==fe.type(e)||e.nodeType||fe.isWindow(e))return!1;try{if(e.constructor&&!ue.call(e,"constructor")&&!ue.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!de.ownFirst)for(t in e)return ue.call(e,t);for(t in e);return void 0===t||ue.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?le[ce.call(e)]||"object":typeof e},globalEval:function(t){t&&fe.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ge,"ms-").replace(me,ve)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;i>o&&t.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(t.call(e[o],o,e[o])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(he,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?fe.merge(i,"string"==typeof e?[e]:e):se.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(ae)return ae.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;)e[o++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[o++]=t[i++];return e.length=o,e},grep:function(e,t,n){for(var i,o=[],r=0,s=e.length,a=!n;s>r;r++)i=!t(e[r],r),i!==a&&o.push(e[r]);return o},map:function(e,t,i){var o,r,s=0,a=[];if(n(e))for(o=e.length;o>s;s++)r=t(e[s],s,i),null!=r&&a.push(r);else for(s in e)r=t(e[s],s,i),null!=r&&a.push(r);return re.apply([],a)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(o=e[t],t=e,e=o),fe.isFunction(e)?(n=oe.call(arguments,2),i=function(){return e.apply(t||this,n.concat(oe.call(arguments)))},i.guid=e.guid=e.guid||fe.guid++,i):void 0},now:function(){return+new Date},support:de}),"function"==typeof Symbol&&(fe.fn[Symbol.iterator]=ne[Symbol.iterator]),fe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){le["[object "+t+"]"]=t.toLowerCase()});var be=/*!
 * Sizzle CSS Selector Engine v2.2.1
 * http://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-10-17
 */
function(e){function t(e,t,n,i){var o,r,s,a,l,c,d,f,h=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!i&&((t?t.ownerDocument||t:j)!==O&&D(t),t=t||O,I)){if(11!==g&&(c=ve.exec(e)))if(o=c[1]){if(9===g){if(!(s=t.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(h&&(s=h.getElementById(o))&&B(t,s)&&s.id===o)return n.push(s),n}else{if(c[2])return J.apply(n,t.getElementsByTagName(e)),n;if((o=c[3])&&E.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(o)),n}if(E.qsa&&!W[e+" "]&&(!R||!R.test(e))){if(1!==g)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(ye,"\\$&"):t.setAttribute("id",a=P),d=T(e),r=d.length,l=pe.test(a)?"#"+a:"[id='"+a+"']";r--;)d[r]=l+" "+p(d[r]);f=d.join(","),h=be.test(e)&&u(t.parentNode)||t}if(f)try{return J.apply(n,h.querySelectorAll(f)),n}catch(m){}finally{a===P&&t.removeAttribute("id")}}}return $(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[P]=!0,e}function o(e){var t=O.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=n.length;i--;)x.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=z++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var a,l,c,u=[H,r];if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(c=t[P]||(t[P]={}),l=c[t.uniqueID]||(c[t.uniqueID]={}),(a=l[i])&&a[0]===H&&a[1]===r)return u[2]=a[2];if(l[i]=u,u[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var o=0,r=n.length;r>o;o++)t(e,n[o],i);return i}function m(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(n&&!n(r,i,o)||(s.push(r),c&&t.push(a)));return s}function v(e,t,n,o,r,s){return o&&!o[P]&&(o=v(o)),r&&!r[P]&&(r=v(r,s)),i(function(i,s,a,l){var c,u,d,p=[],f=[],h=s.length,v=i||g(t||"*",a.nodeType?[a]:a,[]),b=!e||!i&&t?v:m(v,p,e,a,l),y=n?r||(i?e:h||o)?[]:s:b;if(n&&n(b,y,a,l),o)for(c=m(y,f),o(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[f[u]]=!(b[f[u]]=d));if(i){if(r||e){if(r){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(b[u]=d);r(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=r?ee(i,d):p[u])>-1&&(i[c]=!(s[c]=d))}}else y=m(y===s?y.splice(h,y.length):y),r?r(null,s,y,l):J.apply(s,y)})}function b(e){for(var t,n,i,o=e.length,r=x.relative[e[0].type],s=r||x.relative[" "],a=r?1:0,l=f(function(e){return e===t},s,!0),c=f(function(e){return ee(t,e)>-1},s,!0),u=[function(e,n,i){var o=!r&&(i||n!==_)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,o}];o>a;a++)if(n=x.relative[e[a].type])u=[f(h(u),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[P]){for(i=++a;o>i&&!x.relative[e[i].type];i++);return v(a>1&&h(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,i>a&&b(e.slice(a,i)),o>i&&b(e=e.slice(i)),o>i&&p(e))}u.push(n)}return h(u)}function y(e,n){var o=n.length>0,r=e.length>0,s=function(i,s,a,l,c){var u,d,p,f=0,h="0",g=i&&[],v=[],b=_,y=i||r&&x.find.TAG("*",c),w=H+=null==b?1:Math.random()||.1,E=y.length;for(c&&(_=s===O||s||c);h!==E&&null!=(u=y[h]);h++){if(r&&u){for(d=0,s||u.ownerDocument===O||(D(u),a=!I);p=e[d++];)if(p(u,s||O,a)){l.push(u);break}c&&(H=w)}o&&((u=!p&&u)&&f--,i&&g.push(u))}if(f+=h,o&&h!==f){for(d=0;p=n[d++];)p(g,v,s,a);if(i){if(f>0)for(;h--;)g[h]||v[h]||(v[h]=Q.call(l));v=m(v)}J.apply(l,v),c&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(l)}return c&&(H=w,_=b),g};return o?i(s):s}var w,E,x,C,S,T,k,$,_,A,N,D,O,F,I,R,L,M,B,P="sizzle"+1*new Date,j=e.document,H=0,z=0,U=n(),q=n(),W=n(),K=function(e,t){return e===t&&(N=!0),0},X=1<<31,Y={}.hasOwnProperty,V=[],Q=V.pop,G=V.push,J=V.push,Z=V.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",re=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(re),pe=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,ye=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ee=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},xe=function(){D()};try{J.apply(V=Z.call(j.childNodes),j.childNodes),V[j.childNodes.length].nodeType}catch(Ce){J={apply:V.length?function(e,t){G.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}E=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:j;return i!==O&&9===i.nodeType&&i.documentElement?(O=i,F=O.documentElement,I=!S(O),(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),E.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=o(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=me.test(O.getElementsByClassName),E.getById=o(function(e){return F.appendChild(e).id=P,!O.getElementsByName||!O.getElementsByName(P).length}),E.getById?(x.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&I){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=E.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},x.find.CLASS=E.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&I?t.getElementsByClassName(e):void 0},L=[],R=[],(E.qsa=me.test(O.querySelectorAll))&&(o(function(e){F.appendChild(e).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+P+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+P+"+*").length||R.push(".#.+[+~]")}),o(function(e){var t=O.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(E.matchesSelector=me.test(M=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&o(function(e){E.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),L.push("!=",re)}),R=R.length&&new RegExp(R.join("|")),L=L.length&&new RegExp(L.join("|")),t=me.test(F.compareDocumentPosition),B=t||me.test(F.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=t?function(e,t){if(e===t)return N=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!E.sortDetached&&t.compareDocumentPosition(e)===n?e===O||e.ownerDocument===j&&B(j,e)?-1:t===O||t.ownerDocument===j&&B(j,t)?1:A?ee(A,e)-ee(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return N=!0,0;var n,i=0,o=e.parentNode,r=t.parentNode,a=[e],l=[t];if(!o||!r)return e===O?-1:t===O?1:o?-1:r?1:A?ee(A,e)-ee(A,t):0;if(o===r)return s(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?s(a[i],l[i]):a[i]===j?-1:l[i]===j?1:0},O):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&D(e),n=n.replace(ue,"='$1']"),E.matchesSelector&&I&&!W[n+" "]&&(!L||!L.test(n))&&(!R||!R.test(n)))try{var i=M.call(e,n);if(i||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&D(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&D(e);var n=x.attrHandle[t.toLowerCase()],i=n&&Y.call(x.attrHandle,t.toLowerCase())?n(e,t,!I):void 0;return void 0!==i?i:E.attributes||!I?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(N=!E.detectDuplicates,A=!E.sortStable&&e.slice(0),e.sort(K),N){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return A=null,e},C=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var r=t.attr(o,e);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r.replace(se," ")+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,f,h,g=r!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a,y=!1;if(m){if(r){for(;g;){for(p=t;p=p[g];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&b){for(p=m,d=p[P]||(p[P]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),c=u[e]||[],f=c[0]===H&&c[1],y=f&&c[2],p=f&&m.childNodes[f];p=++f&&p&&p[g]||(y=f=0)||h.pop();)if(1===p.nodeType&&++y&&p===t){u[e]=[H,f,y];break}}else if(b&&(p=t,d=p[P]||(p[P]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),c=u[e]||[],f=c[0]===H&&c[1],y=f),y===!1)for(;(p=++f&&p&&p[g]||(y=f=0)||h.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++y||(b&&(d=p[P]||(p[P]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),u[e]=[H,y]),p!==t)););return y-=o,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(e,n){var o,r=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[P]?r(n):r.length>1?(o=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),s=o.length;s--;)i=ee(e,o[s]),e[i]=!(t[i]=o[s])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=k(e.replace(ae,"$1"));return o[P]?i(function(e,t,n,i){for(var r,s=o(e,null,i,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,Ee),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ee).toLowerCase(),function(t){var n;do if(n=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===F},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})x.pseudos[w]=l(w);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,T=t.tokenize=function(e,n){var i,o,r,s,a,l,c,u=q[e+" "];if(u)return n?0:u.slice(0);for(a=e,l=[],c=x.preFilter;a;){i&&!(o=le.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=ce.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(ae," ")}),a=a.slice(i.length));for(s in x.filter)!(o=fe[s].exec(a))||c[s]&&!(o=c[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):q(e,l).slice(0)},k=t.compile=function(e,t){var n,i=[],o=[],r=W[e+" "];if(!r){for(t||(t=T(e)),n=t.length;n--;)r=b(t[n]),r[P]?i.push(r):o.push(r);r=W(e,y(o,i)),r.selector=e}return r},$=t.select=function(e,t,n,i){var o,r,s,a,l,c="function"==typeof e&&e,d=!i&&T(e=c.selector||e);if(n=n||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&E.getById&&9===t.nodeType&&I&&x.relative[r[1].type]){if(t=(x.find.ID(s.matches[0].replace(we,Ee),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=fe.needsContext.test(e)?0:r.length;o--&&(s=r[o],!x.relative[a=s.type]);)if((l=x.find[a])&&(i=l(s.matches[0].replace(we,Ee),be.test(r[0].type)&&u(t.parentNode)||t))){if(r.splice(o,1),e=i.length&&p(r),!e)return J.apply(n,i),n;break}}return(c||k(e,d))(i,t,!I,n,!t||be.test(e)&&u(t.parentNode)||t),n},E.sortStable=P.split("").sort(K).join("")===P,E.detectDuplicates=!!N,D(),E.sortDetached=o(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);fe.find=be,fe.expr=be.selectors,fe.expr[":"]=fe.expr.pseudos,fe.uniqueSort=fe.unique=be.uniqueSort,fe.text=be.getText,fe.isXMLDoc=be.isXML,fe.contains=be.contains;var ye=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&fe(e).is(n))break;i.push(e)}return i},we=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ee=fe.expr.match.needsContext,xe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ce=/^.[^:#\[\.,]*$/;fe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?fe.find.matchesSelector(i,e)?[i]:[]:fe.find.matches(e,fe.grep(t,function(e){return 1===e.nodeType}))},fe.fn.extend({find:function(e){var t,n=[],i=this,o=i.length;if("string"!=typeof e)return this.pushStack(fe(e).filter(function(){for(t=0;o>t;t++)if(fe.contains(i[t],this))return!0}));for(t=0;o>t;t++)fe.find(e,i[t],n);return n=this.pushStack(o>1?fe.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&Ee.test(e)?fe(e):e||[],!1).length}});var Se,Te=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ke=fe.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||Se,"string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Te.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof fe?t[0]:t,fe.merge(this,fe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),xe.test(i[1])&&fe.isPlainObject(t))for(i in t)fe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(o=ie.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return Se.find(e);this.length=1,this[0]=o}return this.context=ie,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):fe.isFunction(e)?"undefined"!=typeof n.ready?n.ready(e):e(fe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),fe.makeArray(e,this))};ke.prototype=fe.fn,Se=fe(ie);var $e=/^(?:parents|prev(?:Until|All))/,_e={children:!0,contents:!0,next:!0,prev:!0};fe.fn.extend({has:function(e){var t,n=fe(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(fe.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,r=[],s=Ee.test(e)||"string"!=typeof e?fe(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&fe.find.matchesSelector(n,e))){r.push(n);break}return this.pushStack(r.length>1?fe.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?fe.inArray(this[0],fe(e)):fe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(fe.uniqueSort(fe.merge(this.get(),fe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),fe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ye(e,"parentNode")},parentsUntil:function(e,t,n){return ye(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return ye(e,"nextSibling")},prevAll:function(e){return ye(e,"previousSibling")},nextUntil:function(e,t,n){return ye(e,"nextSibling",n)},prevUntil:function(e,t,n){return ye(e,"previousSibling",n)},siblings:function(e){return we((e.parentNode||{}).firstChild,e)},children:function(e){return we(e.firstChild)},contents:function(e){return fe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:fe.merge([],e.childNodes)}},function(e,t){fe.fn[e]=function(n,i){var o=fe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=fe.filter(i,o)),this.length>1&&(_e[e]||(o=fe.uniqueSort(o)),$e.test(e)&&(o=o.reverse())),this.pushStack(o)}});var Ae=/\S+/g;fe.Callbacks=function(e){e="string"==typeof e?r(e):fe.extend({},e);var t,n,i,o,s=[],a=[],l=-1,c=function(){for(o=e.once,i=t=!0;a.length;l=-1)for(n=a.shift();++l<s.length;)s[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=s.length,n=!1);e.memory||(n=!1),t=!1,o&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(l=s.length-1,a.push(n)),function i(t){fe.each(t,function(t,n){fe.isFunction(n)?e.unique&&u.has(n)||s.push(n):n&&n.length&&"string"!==fe.type(n)&&i(n)})}(arguments),n&&!t&&c()),this},remove:function(){return fe.each(arguments,function(e,t){for(var n;(n=fe.inArray(t,s,n))>-1;)s.splice(n,1),l>=n&&l--}),this},has:function(e){return e?fe.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return o=!0,n||u.disable(),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},fe.extend({Deferred:function(e){var t=[["resolve","done",fe.Callbacks("once memory"),"resolved"],["reject","fail",fe.Callbacks("once memory"),"rejected"],["notify","progress",fe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return fe.Deferred(function(n){fe.each(t,function(t,r){var s=fe.isFunction(e[t])&&e[t];o[r[1]](function(){var e=s&&s.apply(this,arguments);e&&fe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?fe.extend(e,i):i}},o={};return i.pipe=i.then,fe.each(t,function(e,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=oe.call(arguments),s=r.length,a=1!==s||e&&fe.isFunction(e.promise)?s:0,l=1===a?e:fe.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?oe.call(arguments):o,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&fe.isFunction(r[o].promise)?r[o].promise().progress(c(o,n,t)).done(c(o,i,r)).fail(l.reject):--a;return a||l.resolveWith(i,r),l.promise()}});var Ne;fe.fn.ready=function(e){return fe.ready.promise().done(e),this},fe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?fe.readyWait++:fe.ready(!0)},ready:function(e){(e===!0?--fe.readyWait:fe.isReady)||(fe.isReady=!0,e!==!0&&--fe.readyWait>0||(Ne.resolveWith(ie,[fe]),fe.fn.triggerHandler&&(fe(ie).triggerHandler("ready"),fe(ie).off("ready"))))}}),fe.ready.promise=function(t){if(!Ne)if(Ne=fe.Deferred(),"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll)e.setTimeout(fe.ready);else if(ie.addEventListener)ie.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a);else{ie.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var n=!1;try{n=null==e.frameElement&&ie.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!fe.isReady){try{n.doScroll("left")}catch(t){return e.setTimeout(o,50)}s(),fe.ready()}}()}return Ne.promise(t)},fe.ready.promise();var De;for(De in fe(de))break;de.ownFirst="0"===De,de.inlineBlockNeedsLayout=!1,fe(function(){var e,t,n,i;n=ie.getElementsByTagName("body")[0],n&&n.style&&(t=ie.createElement("div"),i=ie.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",de.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=ie.createElement("div");de.deleteExpando=!0;try{delete e.test}catch(t){de.deleteExpando=!1}e=null}();var Oe=function(e){var t=fe.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t},Fe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ie=/([A-Z])/g;fe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?fe.cache[e[fe.expando]]:e[fe.expando],!!e&&!c(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),fe.fn.extend({data:function(e,t){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(o=fe.data(r),1===r.nodeType&&!fe._data(r,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=fe.camelCase(i.slice(5)),l(r,i,o[i])));fe._data(r,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){fe.data(this,e)}):arguments.length>1?this.each(function(){fe.data(this,e,t)}):r?l(r,e,fe.data(r,e)):void 0},removeData:function(e){return this.each(function(){fe.removeData(this,e)})}}),fe.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=fe._data(e,t),n&&(!i||fe.isArray(n)?i=fe._data(e,t,fe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=fe.queue(e,t),i=n.length,o=n.shift(),r=fe._queueHooks(e,t),s=function(){fe.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return fe._data(e,n)||fe._data(e,n,{empty:fe.Callbacks("once memory").add(function(){fe._removeData(e,t+"queue"),fe._removeData(e,n)})})}}),fe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?fe.queue(this[0],e):void 0===t?this:this.each(function(){var n=fe.queue(this,e,t);fe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&fe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){fe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=fe.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=fe._data(r[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(t)}}),function(){var e;de.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=ie.getElementsByTagName("body")[0],n&&n.style?(t=ie.createElement("div"),i=ie.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ie.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var Re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Le=new RegExp("^(?:([+-])=|)("+Re+")([a-z%]*)$","i"),Me=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===fe.css(e,"display")||!fe.contains(e.ownerDocument,e)},Pe=function(e,t,n,i,o,r,s){var a=0,l=e.length,c=null==n;if("object"===fe.type(n)){o=!0;for(a in n)Pe(e,t,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,fe.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(fe(e),n)})),t))for(;l>a;a++)t(e[a],n,s?i:i.call(e[a],a,t(e[a],n)));return o?e:c?t.call(e):l?t(e[0],n):r},je=/^(?:checkbox|radio)$/i,He=/<([\w:-]+)/,ze=/^$|\/(?:java|ecma)script/i,Ue=/^\s+/,qe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=ie.createElement("div"),t=ie.createDocumentFragment(),n=ie.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",de.leadingWhitespace=3===e.firstChild.nodeType,de.tbody=!e.getElementsByTagName("tbody").length,de.htmlSerialize=!!e.getElementsByTagName("link").length,de.html5Clone="<:nav></:nav>"!==ie.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),de.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",de.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=ie.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),de.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,de.noCloneEvent=!!e.addEventListener,e[fe.expando]=1,de.attributes=!e.getAttribute(fe.expando)}();var We={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:de.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};We.optgroup=We.option,We.tbody=We.tfoot=We.colgroup=We.caption=We.thead,We.th=We.td;var Ke=/<|&#?\w+;/,Xe=/<tbody/i;!function(){var t,n,i=ie.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(de[t]=n in e)||(i.setAttribute(n,"t"),de[t]=i.attributes[n].expando===!1);i=null}();var Ye=/^(?:input|select|textarea)$/i,Ve=/^key/,Qe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ge=/^(?:focusinfocus|focusoutblur)$/,Je=/^([^.]*)(?:\.(.+)|)/;fe.event={global:{},add:function(e,t,n,i,o){var r,s,a,l,c,u,d,p,f,h,g,m=fe._data(e);if(m){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=fe.guid++),(s=m.events)||(s=m.events={}),(u=m.handle)||(u=m.handle=function(e){return"undefined"==typeof fe||e&&fe.event.triggered===e.type?void 0:fe.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(Ae)||[""],a=t.length;a--;)r=Je.exec(t[a])||[],f=g=r[1],h=(r[2]||"").split(".").sort(),f&&(c=fe.event.special[f]||{},f=(o?c.delegateType:c.bindType)||f,c=fe.event.special[f]||{},d=fe.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,
selector:o,needsContext:o&&fe.expr.match.needsContext.test(o),namespace:h.join(".")},l),(p=s[f])||(p=s[f]=[],p.delegateCount=0,c.setup&&c.setup.call(e,i,h,u)!==!1||(e.addEventListener?e.addEventListener(f,u,!1):e.attachEvent&&e.attachEvent("on"+f,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),fe.event.global[f]=!0);e=null}},remove:function(e,t,n,i,o){var r,s,a,l,c,u,d,p,f,h,g,m=fe.hasData(e)&&fe._data(e);if(m&&(u=m.events)){for(t=(t||"").match(Ae)||[""],c=t.length;c--;)if(a=Je.exec(t[c])||[],f=g=a[1],h=(a[2]||"").split(".").sort(),f){for(d=fe.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,p=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=p.length;r--;)s=p[r],!o&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(p.splice(r,1),s.selector&&p.delegateCount--,d.remove&&d.remove.call(e,s));l&&!p.length&&(d.teardown&&d.teardown.call(e,h,m.handle)!==!1||fe.removeEvent(e,f,m.handle),delete u[f])}else for(f in u)fe.event.remove(e,f+t[c],n,i,!0);fe.isEmptyObject(u)&&(delete m.handle,fe._removeData(e,"events"))}},trigger:function(t,n,i,o){var r,s,a,l,c,u,d,p=[i||ie],f=ue.call(t,"type")?t.type:t,h=ue.call(t,"namespace")?t.namespace.split("."):[];if(a=u=i=i||ie,3!==i.nodeType&&8!==i.nodeType&&!Ge.test(f+fe.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),s=f.indexOf(":")<0&&"on"+f,t=t[fe.expando]?t:new fe.Event(f,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:fe.makeArray(n,[t]),c=fe.event.special[f]||{},o||!c.trigger||c.trigger.apply(i,n)!==!1)){if(!o&&!c.noBubble&&!fe.isWindow(i)){for(l=c.delegateType||f,Ge.test(l+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),u=a;u===(i.ownerDocument||ie)&&p.push(u.defaultView||u.parentWindow||e)}for(d=0;(a=p[d++])&&!t.isPropagationStopped();)t.type=d>1?l:c.bindType||f,r=(fe._data(a,"events")||{})[t.type]&&fe._data(a,"handle"),r&&r.apply(a,n),r=s&&a[s],r&&r.apply&&Oe(a)&&(t.result=r.apply(a,n),t.result===!1&&t.preventDefault());if(t.type=f,!o&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(p.pop(),n)===!1)&&Oe(i)&&s&&i[f]&&!fe.isWindow(i)){u=i[s],u&&(i[s]=null),fe.event.triggered=f;try{i[f]()}catch(g){}fe.event.triggered=void 0,u&&(i[s]=u)}return t.result}},dispatch:function(e){e=fe.event.fix(e);var t,n,i,o,r,s=[],a=oe.call(arguments),l=(fe._data(this,"events")||{})[e.type]||[],c=fe.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=fe.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(r.namespace)||(e.handleObj=r,e.data=r.data,i=((fe.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,r,s=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],n=0;a>n;n++)r=t[n],o=r.selector+" ",void 0===i[o]&&(i[o]=r.needsContext?fe(o,this).index(l)>-1:fe.find(o,this,null,[l]).length),i[o]&&i.push(r);i.length&&s.push({elem:l,handlers:i})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},fix:function(e){if(e[fe.expando])return e;var t,n,i,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Qe.test(o)?this.mouseHooks:Ve.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new fe.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||ie),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,r=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||ie,o=i.documentElement,n=i.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==w()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===w()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return fe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return fe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var i=fe.extend(new fe.Event,n,{type:e,isSimulated:!0});fe.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}},fe.removeEvent=ie.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},fe.Event=function(e,t){return this instanceof fe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?b:y):this.type=e,t&&fe.extend(this,t),this.timeStamp=e&&e.timeStamp||fe.now(),void(this[fe.expando]=!0)):new fe.Event(e,t)},fe.Event.prototype={constructor:fe.Event,isDefaultPrevented:y,isPropagationStopped:y,isImmediatePropagationStopped:y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=b,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=b,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=b,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},fe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){fe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return o&&(o===i||fe.contains(i,o))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),de.submit||(fe.event.special.submit={setup:function(){return fe.nodeName(this,"form")?!1:void fe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=fe.nodeName(t,"input")||fe.nodeName(t,"button")?fe.prop(t,"form"):void 0;n&&!fe._data(n,"submit")&&(fe.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),fe._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&fe.event.simulate("submit",this.parentNode,e))},teardown:function(){return fe.nodeName(this,"form")?!1:void fe.event.remove(this,"._submit")}}),de.change||(fe.event.special.change={setup:function(){return Ye.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(fe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),fe.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),fe.event.simulate("change",this,e)})),!1):void fe.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ye.test(t.nodeName)&&!fe._data(t,"change")&&(fe.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||fe.event.simulate("change",this.parentNode,e)}),fe._data(t,"change",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return fe.event.remove(this,"._change"),!Ye.test(this.nodeName)}}),de.focusin||fe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){fe.event.simulate(t,e.target,fe.event.fix(e))};fe.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=fe._data(i,t);o||i.addEventListener(e,n,!0),fe._data(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=fe._data(i,t)-1;o?fe._data(i,t,o):(i.removeEventListener(e,n,!0),fe._removeData(i,t))}}}),fe.fn.extend({on:function(e,t,n,i){return E(this,e,t,n,i)},one:function(e,t,n,i){return E(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,fe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=y),this.each(function(){fe.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){fe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?fe.event.trigger(e,t,n,!0):void 0}});var Ze=/ jQuery\d+="(?:null|\d+)"/g,et=new RegExp("<(?:"+qe+")[\\s/>]","i"),tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,nt=/<script|<style|<link/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,ot=/^true\/(.*)/,rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,st=f(ie),at=st.appendChild(ie.createElement("div"));fe.extend({htmlPrefilter:function(e){return e.replace(tt,"<$1></$2>")},clone:function(e,t,n){var i,o,r,s,a,l=fe.contains(e.ownerDocument,e);if(de.html5Clone||fe.isXMLDoc(e)||!et.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(at.innerHTML=e.outerHTML,at.removeChild(r=at.firstChild)),!(de.noCloneEvent&&de.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||fe.isXMLDoc(e)))for(i=h(r),a=h(e),s=0;null!=(o=a[s]);++s)i[s]&&k(o,i[s]);if(t)if(n)for(a=a||h(e),i=i||h(r),s=0;null!=(o=a[s]);s++)T(o,i[s]);else T(e,r);return i=h(r,"script"),i.length>0&&g(i,!l&&h(e,"script")),i=a=o=null,r},cleanData:function(e,t){for(var n,i,o,r,s=0,a=fe.expando,l=fe.cache,c=de.attributes,u=fe.event.special;null!=(n=e[s]);s++)if((t||Oe(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)u[i]?fe.event.remove(n,i):fe.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c||"undefined"==typeof n.removeAttribute?n[a]=void 0:n.removeAttribute(a),ne.push(o))}}}),fe.fn.extend({domManip:$,detach:function(e){return _(this,e,!0)},remove:function(e){return _(this,e)},text:function(e){return Pe(this,function(e){return void 0===e?fe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ie).createTextNode(e))},null,e,arguments.length)},append:function(){return $(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.appendChild(e)}})},prepend:function(){return $(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return $(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return $(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&fe.cleanData(h(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&fe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return fe.clone(this,e,t)})},html:function(e){return Pe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Ze,""):void 0;if("string"==typeof e&&!nt.test(e)&&(de.htmlSerialize||!et.test(e))&&(de.leadingWhitespace||!Ue.test(e))&&!We[(He.exec(e)||["",""])[1].toLowerCase()]){e=fe.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(fe.cleanData(h(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return $(this,arguments,function(t){var n=this.parentNode;fe.inArray(this,e)<0&&(fe.cleanData(h(this)),n&&n.replaceChild(t,this))},e)}}),fe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){fe.fn[e]=function(e){for(var n,i=0,o=[],r=fe(e),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),fe(r[i])[t](n),se.apply(o,n.get());return this.pushStack(o)}});var lt,ct={HTML:"block",BODY:"block"},ut=/^margin/,dt=new RegExp("^("+Re+")(?!px)[a-z%]+$","i"),pt=function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=s[r];return o},ft=ie.documentElement;!function(){function t(){var t,u,d=ie.documentElement;d.appendChild(l),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=o=a=!1,i=s=!0,e.getComputedStyle&&(u=e.getComputedStyle(c),n="1%"!==(u||{}).top,a="2px"===(u||{}).marginLeft,o="4px"===(u||{width:"4px"}).width,c.style.marginRight="50%",i="4px"===(u||{marginRight:"4px"}).marginRight,t=c.appendChild(ie.createElement("div")),t.style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",c.style.width="1px",s=!parseFloat((e.getComputedStyle(t)||{}).marginRight),c.removeChild(t)),c.style.display="none",r=0===c.getClientRects().length,r&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=c.getElementsByTagName("td"),t[0].style.cssText="margin:0;border:0;padding:0;display:none",r=0===t[0].offsetHeight,r&&(t[0].style.display="",t[1].style.display="none",r=0===t[0].offsetHeight)),d.removeChild(l)}var n,i,o,r,s,a,l=ie.createElement("div"),c=ie.createElement("div");c.style&&(c.style.cssText="float:left;opacity:.5",de.opacity="0.5"===c.style.opacity,de.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",de.clearCloneStyle="content-box"===c.style.backgroundClip,l=ie.createElement("div"),l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",l.appendChild(c),de.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,fe.extend(de,{reliableHiddenOffsets:function(){return null==n&&t(),r},boxSizingReliable:function(){return null==n&&t(),o},pixelMarginRight:function(){return null==n&&t(),i},pixelPosition:function(){return null==n&&t(),n},reliableMarginRight:function(){return null==n&&t(),s},reliableMarginLeft:function(){return null==n&&t(),a}}))}();var ht,gt,mt=/^(top|right|bottom|left)$/;e.getComputedStyle?(ht=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},gt=function(e,t,n){var i,o,r,s,a=e.style;return n=n||ht(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||fe.contains(e.ownerDocument,e)||(s=fe.style(e,t)),n&&!de.pixelMarginRight()&&dt.test(s)&&ut.test(t)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r),void 0===s?s:s+""}):ft.currentStyle&&(ht=function(e){return e.currentStyle},gt=function(e,t,n){var i,o,r,s,a=e.style;return n=n||ht(e),s=n?n[t]:void 0,null==s&&a&&a[t]&&(s=a[t]),dt.test(s)&&!mt.test(t)&&(i=a.left,o=e.runtimeStyle,r=o&&o.left,r&&(o.left=e.currentStyle.left),a.left="fontSize"===t?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),void 0===s?s:s+""||"auto"});var vt=/alpha\([^)]*\)/i,bt=/opacity\s*=\s*([^)]*)/i,yt=/^(none|table(?!-c[ea]).+)/,wt=new RegExp("^("+Re+")(.*)$","i"),Et={position:"absolute",visibility:"hidden",display:"block"},xt={letterSpacing:"0",fontWeight:"400"},Ct=["Webkit","O","Moz","ms"],St=ie.createElement("div").style;fe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=gt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":de.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,s,a=fe.camelCase(t),l=e.style;if(t=fe.cssProps[a]||(fe.cssProps[a]=O(a)||a),s=fe.cssHooks[t]||fe.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t];if(r=typeof n,"string"===r&&(o=Le.exec(n))&&o[1]&&(n=p(e,t,o),r="number"),null!=n&&n===n&&("number"===r&&(n+=o&&o[3]||(fe.cssNumber[a]?"":"px")),de.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(e,n,i)))))try{l[t]=n}catch(c){}}},css:function(e,t,n,i){var o,r,s,a=fe.camelCase(t);return t=fe.cssProps[a]||(fe.cssProps[a]=O(a)||a),s=fe.cssHooks[t]||fe.cssHooks[a],s&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=gt(e,t,i)),"normal"===r&&t in xt&&(r=xt[t]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),fe.each(["height","width"],function(e,t){fe.cssHooks[t]={get:function(e,n,i){return n?yt.test(fe.css(e,"display"))&&0===e.offsetWidth?pt(e,Et,function(){return L(e,t,i)}):L(e,t,i):void 0},set:function(e,n,i){var o=i&&ht(e);return I(e,n,i?R(e,t,i,de.boxSizing&&"border-box"===fe.css(e,"boxSizing",!1,o),o):0)}}}),de.opacity||(fe.cssHooks.opacity={get:function(e,t){return bt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=fe.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===fe.trim(r.replace(vt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=vt.test(r)?r.replace(vt,o):r+" "+o)}}),fe.cssHooks.marginRight=D(de.reliableMarginRight,function(e,t){return t?pt(e,{display:"inline-block"},gt,[e,"marginRight"]):void 0}),fe.cssHooks.marginLeft=D(de.reliableMarginLeft,function(e,t){return t?(parseFloat(gt(e,"marginLeft"))||(fe.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-pt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px":void 0}),fe.each({margin:"",padding:"",border:"Width"},function(e,t){fe.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+Me[i]+t]=r[i]||r[i-2]||r[0];return o}},ut.test(e)||(fe.cssHooks[e+t].set=I)}),fe.fn.extend({css:function(e,t){return Pe(this,function(e,t,n){var i,o,r={},s=0;if(fe.isArray(t)){for(i=ht(e),o=t.length;o>s;s++)r[t[s]]=fe.css(e,t[s],!1,i);return r}return void 0!==n?fe.style(e,t,n):fe.css(e,t)},e,t,arguments.length>1)},show:function(){return F(this,!0)},hide:function(){return F(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?fe(this).show():fe(this).hide()})}}),fe.Tween=M,M.prototype={constructor:M,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||fe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(fe.cssNumber[n]?"":"px")},cur:function(){var e=M.propHooks[this.prop];return e&&e.get?e.get(this):M.propHooks._default.get(this)},run:function(e){var t,n=M.propHooks[this.prop];return this.options.duration?this.pos=t=fe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=fe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){fe.fx.step[e.prop]?fe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[fe.cssProps[e.prop]]&&!fe.cssHooks[e.prop]?e.elem[e.prop]=e.now:fe.style(e.elem,e.prop,e.now+e.unit)}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},fe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},fe.fx=M.prototype.init,fe.fx.step={};var Tt,kt,$t=/^(?:toggle|show|hide)$/,_t=/queueHooks$/;fe.Animation=fe.extend(U,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return p(n.elem,e,Le.exec(t),n),n}]},tweener:function(e,t){fe.isFunction(e)?(t=e,e=["*"]):e=e.match(Ae);for(var n,i=0,o=e.length;o>i;i++)n=e[i],U.tweeners[n]=U.tweeners[n]||[],U.tweeners[n].unshift(t)},prefilters:[H],prefilter:function(e,t){t?U.prefilters.unshift(e):U.prefilters.push(e)}}),fe.speed=function(e,t,n){var i=e&&"object"==typeof e?fe.extend({},e):{complete:n||!n&&t||fe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!fe.isFunction(t)&&t};return i.duration=fe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in fe.fx.speeds?fe.fx.speeds[i.duration]:fe.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){fe.isFunction(i.old)&&i.old.call(this),i.queue&&fe.dequeue(this,i.queue)},i},fe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=fe.isEmptyObject(e),r=fe.speed(t,n,i),s=function(){var t=U(this,fe.extend({},e),r);(o||fe._data(this,"finish"))&&t.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=fe.timers,s=fe._data(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&_t.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(n),t=!1,r.splice(o,1));!t&&n||fe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=fe._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=fe.timers,s=i?i.length:0;for(n.finish=!0,fe.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),fe.each(["toggle","show","hide"],function(e,t){var n=fe.fn[t];fe.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(P(t,!0),e,i,o)}}),fe.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){fe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),fe.timers=[],fe.fx.tick=function(){var e,t=fe.timers,n=0;for(Tt=fe.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||fe.fx.stop(),Tt=void 0},fe.fx.timer=function(e){fe.timers.push(e),e()?fe.fx.start():fe.timers.pop()},fe.fx.interval=13,fe.fx.start=function(){kt||(kt=e.setInterval(fe.fx.tick,fe.fx.interval))},fe.fx.stop=function(){e.clearInterval(kt),kt=null},fe.fx.speeds={slow:600,fast:200,_default:400},fe.fn.delay=function(t,n){return t=fe.fx?fe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e,t=ie.createElement("input"),n=ie.createElement("div"),i=ie.createElement("select"),o=i.appendChild(ie.createElement("option"));n=ie.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",de.getSetAttribute="t"!==n.className,de.style=/top/.test(e.getAttribute("style")),de.hrefNormalized="/a"===e.getAttribute("href"),de.checkOn=!!t.value,de.optSelected=o.selected,de.enctype=!!ie.createElement("form").enctype,i.disabled=!0,de.optDisabled=!o.disabled,t=ie.createElement("input"),t.setAttribute("value",""),de.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),de.radioValue="t"===t.value}();var At=/\r/g;fe.fn.extend({val:function(e){var t,n,i,o=this[0];{if(arguments.length)return i=fe.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,fe(this).val()):e,null==o?o="":"number"==typeof o?o+="":fe.isArray(o)&&(o=fe.map(o,function(e){return null==e?"":e+""})),t=fe.valHooks[this.type]||fe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=fe.valHooks[o.type]||fe.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(At,""):null==n?"":n)}}}),fe.extend({valHooks:{option:{get:function(e){var t=fe.find.attr(e,"value");return null!=t?t:fe.trim(fe.text(e))}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],(n.selected||l===o)&&(de.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!fe.nodeName(n.parentNode,"optgroup"))){if(t=fe(n).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,r=fe.makeArray(t),s=o.length;s--;)if(i=o[s],fe.inArray(fe.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),o}}}}),fe.each(["radio","checkbox"],function(){fe.valHooks[this]={set:function(e,t){return fe.isArray(t)?e.checked=fe.inArray(fe(e).val(),t)>-1:void 0}},de.checkOn||(fe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Nt,Dt,Ot=fe.expr.attrHandle,Ft=/^(?:checked|selected)$/i,It=de.getSetAttribute,Rt=de.input;fe.fn.extend({attr:function(e,t){return Pe(this,fe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){fe.removeAttr(this,e)})}}),fe.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?fe.prop(e,t,n):(1===r&&fe.isXMLDoc(e)||(t=t.toLowerCase(),o=fe.attrHooks[t]||(fe.expr.match.bool.test(t)?Dt:Nt)),void 0!==n?null===n?void fe.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=fe.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!de.radioValue&&"radio"===t&&fe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(Ae);if(r&&1===e.nodeType)for(;n=r[o++];)i=fe.propFix[n]||n,fe.expr.match.bool.test(n)?Rt&&It||!Ft.test(n)?e[i]=!1:e[fe.camelCase("default-"+n)]=e[i]=!1:fe.attr(e,n,""),e.removeAttribute(It?n:i)}}),Dt={set:function(e,t,n){return t===!1?fe.removeAttr(e,n):Rt&&It||!Ft.test(n)?e.setAttribute(!It&&fe.propFix[n]||n,n):e[fe.camelCase("default-"+n)]=e[n]=!0,n}},fe.each(fe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Ot[t]||fe.find.attr;Rt&&It||!Ft.test(t)?Ot[t]=function(e,t,i){var o,r;return i||(r=Ot[t],Ot[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,Ot[t]=r),o}:Ot[t]=function(e,t,n){return n?void 0:e[fe.camelCase("default-"+t)]?t.toLowerCase():null}}),Rt&&It||(fe.attrHooks.value={set:function(e,t,n){return fe.nodeName(e,"input")?void(e.defaultValue=t):Nt&&Nt.set(e,t,n)}}),It||(Nt={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Ot.id=Ot.name=Ot.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},fe.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:Nt.set},fe.attrHooks.contenteditable={set:function(e,t,n){Nt.set(e,""===t?!1:t,n)}},fe.each(["width","height"],function(e,t){fe.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),de.style||(fe.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Lt=/^(?:input|select|textarea|button|object)$/i,Mt=/^(?:a|area)$/i;fe.fn.extend({prop:function(e,t){return Pe(this,fe.prop,e,t,arguments.length>1)},removeProp:function(e){return e=fe.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),fe.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&fe.isXMLDoc(e)||(t=fe.propFix[t]||t,o=fe.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=fe.find.attr(e,"tabindex");return t?parseInt(t,10):Lt.test(e.nodeName)||Mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),de.hrefNormalized||fe.each(["href","src"],function(e,t){fe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),de.optSelected||(fe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),fe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fe.propFix[this.toLowerCase()]=this}),de.enctype||(fe.propFix.enctype="encoding");var Bt=/[\t\r\n\f]/g;fe.fn.extend({addClass:function(e){var t,n,i,o,r,s,a,l=0;if(fe.isFunction(e))return this.each(function(t){fe(this).addClass(e.call(this,t,q(this)))});if("string"==typeof e&&e)for(t=e.match(Ae)||[];n=this[l++];)if(o=q(n),i=1===n.nodeType&&(" "+o+" ").replace(Bt," ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=fe.trim(i),o!==a&&fe.attr(n,"class",a)}return this},removeClass:function(e){var t,n,i,o,r,s,a,l=0;if(fe.isFunction(e))return this.each(function(t){fe(this).removeClass(e.call(this,t,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ae)||[];n=this[l++];)if(o=q(n),i=1===n.nodeType&&(" "+o+" ").replace(Bt," ")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");a=fe.trim(i),o!==a&&fe.attr(n,"class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):fe.isFunction(e)?this.each(function(n){fe(this).toggleClass(e.call(this,n,q(this),t),t)}):this.each(function(){var t,i,o,r;if("string"===n)for(i=0,o=fe(this),r=e.match(Ae)||[];t=r[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=q(this),t&&fe._data(this,"__className__",t),fe.attr(this,"class",t||e===!1?"":fe._data(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+q(n)+" ").replace(Bt," ").indexOf(t)>-1)return!0;return!1}}),fe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){fe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),fe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Pt=e.location,jt=fe.now(),Ht=/\?/,zt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;fe.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,o=fe.trim(t+"");return o&&!fe.trim(o.replace(zt,function(e,t,o,r){return n&&t&&(i=0),0===i?e:(n=o||t,i+=!r-!o,"")}))?Function("return "+o)():fe.error("Invalid JSON: "+t)},fe.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new e.DOMParser,n=i.parseFromString(t,"text/xml")):(n=new e.ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||fe.error("Invalid XML: "+t),n};var Ut=/#.*$/,qt=/([?&])_=[^&]*/,Wt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Xt=/^(?:GET|HEAD)$/,Yt=/^\/\//,Vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qt={},Gt={},Jt="*/".concat("*"),Zt=Pt.href,en=Vt.exec(Zt.toLowerCase())||[];
fe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zt,type:"GET",isLocal:Kt.test(en[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fe.parseJSON,"text xml":fe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?X(X(e,fe.ajaxSettings),t):X(fe.ajaxSettings,e)},ajaxPrefilter:W(Qt),ajaxTransport:W(Gt),ajax:function(t,n){function i(t,n,i,o){var r,d,b,y,E,C=n;2!==w&&(w=2,l&&e.clearTimeout(l),u=void 0,a=o||"",x.readyState=t>0?4:0,r=t>=200&&300>t||304===t,i&&(y=Y(p,x,i)),y=V(p,y,x,r),r?(p.ifModified&&(E=x.getResponseHeader("Last-Modified"),E&&(fe.lastModified[s]=E),E=x.getResponseHeader("etag"),E&&(fe.etag[s]=E)),204===t||"HEAD"===p.type?C="nocontent":304===t?C="notmodified":(C=y.state,d=y.data,b=y.error,r=!b)):(b=C,!t&&C||(C="error",0>t&&(t=0))),x.status=t,x.statusText=(n||C)+"",r?g.resolveWith(f,[d,C,x]):g.rejectWith(f,[x,C,b]),x.statusCode(v),v=void 0,c&&h.trigger(r?"ajaxSuccess":"ajaxError",[x,p,r?d:b]),m.fireWith(f,[x,C]),c&&(h.trigger("ajaxComplete",[x,p]),--fe.active||fe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,r,s,a,l,c,u,d,p=fe.ajaxSetup({},n),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?fe(f):fe.event,g=fe.Deferred(),m=fe.Callbacks("once memory"),v=p.statusCode||{},b={},y={},w=0,E="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!d)for(d={};t=Wt.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,b[e]=t),this},overrideMimeType:function(e){return w||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||E;return u&&u.abort(t),i(0,t),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||Zt)+"").replace(Ut,"").replace(Yt,en[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=fe.trim(p.dataType||"*").toLowerCase().match(Ae)||[""],null==p.crossDomain&&(o=Vt.exec(p.url.toLowerCase()),p.crossDomain=!(!o||o[1]===en[1]&&o[2]===en[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(en[3]||("http:"===en[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=fe.param(p.data,p.traditional)),K(Qt,p,n,x),2===w)return x;c=fe.event&&p.global,c&&0===fe.active++&&fe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Xt.test(p.type),s=p.url,p.hasContent||(p.data&&(s=p.url+=(Ht.test(s)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=qt.test(s)?s.replace(qt,"$1_="+jt++):s+(Ht.test(s)?"&":"?")+"_="+jt++)),p.ifModified&&(fe.lastModified[s]&&x.setRequestHeader("If-Modified-Since",fe.lastModified[s]),fe.etag[s]&&x.setRequestHeader("If-None-Match",fe.etag[s])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Jt+"; q=0.01":""):p.accepts["*"]);for(r in p.headers)x.setRequestHeader(r,p.headers[r]);if(p.beforeSend&&(p.beforeSend.call(f,x,p)===!1||2===w))return x.abort();E="abort";for(r in{success:1,error:1,complete:1})x[r](p[r]);if(u=K(Gt,p,n,x)){if(x.readyState=1,c&&h.trigger("ajaxSend",[x,p]),2===w)return x;p.async&&p.timeout>0&&(l=e.setTimeout(function(){x.abort("timeout")},p.timeout));try{w=1,u.send(b,i)}catch(C){if(!(2>w))throw C;i(-1,C)}}else i(-1,"No Transport");return x},getJSON:function(e,t,n){return fe.get(e,t,n,"json")},getScript:function(e,t){return fe.get(e,void 0,t,"script")}}),fe.each(["get","post"],function(e,t){fe[t]=function(e,n,i,o){return fe.isFunction(n)&&(o=o||i,i=n,n=void 0),fe.ajax(fe.extend({url:e,type:t,dataType:o,data:n,success:i},fe.isPlainObject(e)&&e))}}),fe._evalUrl=function(e){return fe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},fe.fn.extend({wrapAll:function(e){if(fe.isFunction(e))return this.each(function(t){fe(this).wrapAll(e.call(this,t))});if(this[0]){var t=fe(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return fe.isFunction(e)?this.each(function(t){fe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=fe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=fe.isFunction(e);return this.each(function(n){fe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){fe.nodeName(this,"body")||fe(this).replaceWith(this.childNodes)}).end()}}),fe.expr.filters.hidden=function(e){return de.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:G(e)},fe.expr.filters.visible=function(e){return!fe.expr.filters.hidden(e)};var tn=/%20/g,nn=/\[\]$/,on=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,sn=/^(?:input|select|textarea|keygen)/i;fe.param=function(e,t){var n,i=[],o=function(e,t){t=fe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=fe.ajaxSettings&&fe.ajaxSettings.traditional),fe.isArray(e)||e.jquery&&!fe.isPlainObject(e))fe.each(e,function(){o(this.name,this.value)});else for(n in e)J(n,e[n],t,o);return i.join("&").replace(tn,"+")},fe.fn.extend({serialize:function(){return fe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=fe.prop(this,"elements");return e?fe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!fe(this).is(":disabled")&&sn.test(this.nodeName)&&!rn.test(e)&&(this.checked||!je.test(e))}).map(function(e,t){var n=fe(this).val();return null==n?null:fe.isArray(n)?fe.map(n,function(e){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),fe.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return this.isLocal?ee():ie.documentMode>8?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||ee()}:Z;var an=0,ln={},cn=fe.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in ln)ln[e](void 0,!0)}),de.cors=!!cn&&"withCredentials"in cn,cn=de.ajax=!!cn,cn&&fe.ajaxTransport(function(t){if(!t.crossDomain||de.cors){var n;return{send:function(i,o){var r,s=t.xhr(),a=++an;if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)s[r]=t.xhrFields[r];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)void 0!==i[r]&&s.setRequestHeader(r,i[r]+"");s.send(t.hasContent&&t.data||null),n=function(e,i){var r,l,c;if(n&&(i||4===s.readyState))if(delete ln[a],n=void 0,s.onreadystatechange=fe.noop,i)4!==s.readyState&&s.abort();else{c={},r=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{l=s.statusText}catch(u){l=""}r||!t.isLocal||t.crossDomain?1223===r&&(r=204):r=c.text?200:404}c&&o(r,l,c,s.getAllResponseHeaders())},t.async?4===s.readyState?e.setTimeout(n):s.onreadystatechange=ln[a]=n:n()},abort:function(){n&&n(void 0,!0)}}}}),fe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),fe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return fe.globalEval(e),e}}}),fe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),fe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ie.head||fe("head")[0]||ie.documentElement;return{send:function(i,o){t=ie.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var un=[],dn=/(=)\?(?=&|$)|\?\?/;fe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=un.pop()||fe.expando+"_"+jt++;return this[e]=!0,e}}),fe.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,s,a=t.jsonp!==!1&&(dn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&dn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=fe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(dn,"$1"+o):t.jsonp!==!1&&(t.url+=(Ht.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||fe.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=e[o],e[o]=function(){s=arguments},i.always(function(){void 0===r?fe(e).removeProp(o):e[o]=r,t[o]&&(t.jsonpCallback=n.jsonpCallback,un.push(o)),s&&fe.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),de.createHTMLDocument=function(){if(!ie.implementation.createHTMLDocument)return!1;var e=ie.implementation.createHTMLDocument("");return e.body.innerHTML="<form></form><form></form>",2===e.body.childNodes.length}(),fe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||(de.createHTMLDocument?ie.implementation.createHTMLDocument(""):ie);var i=xe.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=v([e],t,o),o&&o.length&&fe(o).remove(),fe.merge([],i.childNodes))};var pn=fe.fn.load;fe.fn.load=function(e,t,n){if("string"!=typeof e&&pn)return pn.apply(this,arguments);var i,o,r,s=this,a=e.indexOf(" ");return a>-1&&(i=fe.trim(e.slice(a,e.length)),e=e.slice(0,a)),fe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&fe.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,s.html(i?fe("<div>").append(fe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(s,r||[e.responseText,t,e])})}),this},fe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){fe.fn[t]=function(e){return this.on(t,e)}}),fe.expr.filters.animated=function(e){return fe.grep(fe.timers,function(t){return e===t.elem}).length},fe.offset={setOffset:function(e,t,n){var i,o,r,s,a,l,c,u=fe.css(e,"position"),d=fe(e),p={};"static"===u&&(e.style.position="relative"),a=d.offset(),r=fe.css(e,"top"),l=fe.css(e,"left"),c=("absolute"===u||"fixed"===u)&&fe.inArray("auto",[r,l])>-1,c?(i=d.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),fe.isFunction(t)&&(t=t.call(e,n,fe.extend({},a))),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+o),"using"in t?t.using.call(e,p):d.css(p)}},fe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){fe.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return t=r.documentElement,fe.contains(t,o)?("undefined"!=typeof o.getBoundingClientRect&&(i=o.getBoundingClientRect()),n=te(r),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===fe.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),fe.nodeName(e[0],"html")||(n=e.offset()),n.top+=fe.css(e[0],"borderTopWidth",!0),n.left+=fe.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-fe.css(i,"marginTop",!0),left:t.left-n.left-fe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!fe.nodeName(e,"html")&&"static"===fe.css(e,"position");)e=e.offsetParent;return e||ft})}}),fe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);fe.fn[e]=function(i){return Pe(this,function(e,i,o){var r=te(e);return void 0===o?r?t in r?r[t]:r.document.documentElement[i]:e[i]:void(r?r.scrollTo(n?fe(r).scrollLeft():o,n?o:fe(r).scrollTop()):e[i]=o)},e,i,arguments.length,null)}}),fe.each(["top","left"],function(e,t){fe.cssHooks[t]=D(de.pixelPosition,function(e,n){return n?(n=gt(e,t),dt.test(n)?fe(e).position()[t]+"px":n):void 0})}),fe.each({Height:"height",Width:"width"},function(e,t){fe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){fe.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Pe(this,function(t,n,i){var o;return fe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?fe.css(t,n,s):fe.style(t,n,i,s)},t,r?i:void 0,r,null)}})}),fe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),fe.fn.size=function(){return this.length},fe.fn.andSelf=fe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return fe});var fn=e.jQuery,hn=e.$;return fe.noConflict=function(t){return e.$===fe&&(e.$=hn),t&&e.jQuery===fe&&(e.jQuery=fn),fe},t||(e.jQuery=e.$=fe),fe});var quintusCore=function(e,t){"use strict";var n=e[t]=function(t){var i=function(e,t,n){return i.select(e,t,n)};i.select=function(){},i.include=function(e){return i._each(i._normalizeArg(e),function(e){var t=n[e]||e;if(!i._isFunction(t))throw"Invalid Module:"+e;t(i)}),i},i._normalizeArg=function(e){return i._isString(e)&&(e=e.replace(/\s+/g,"").split(",")),i._isArray(e)||(e=[e]),e},i._extend=function(e,t){if(!t)return e;for(var n in t)e[n]=t[n];return e},i._clone=function(e){return i._extend({},e)},i._defaults=function(e,t){if(!t)return e;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},i._has=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i._isString=function(e){return"string"==typeof e},i._isNumber=function(e){return"[object Number]"===Object.prototype.toString.call(e)},i._isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},i._isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},i._isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},i._isUndefined=function(e){return void 0===e},i._popProperty=function(e,t){var n=e[t];return delete e[t],n},i._each=function(e,t,n){if(null!=e)if(e.forEach)e.forEach(t,n);else if(e.length===+e.length)for(var i=0,o=e.length;o>i;i++)t.call(n,e[i],i,e);else for(var r in e)t.call(n,e[r],r,e)},i._invoke=function(e,t,n,i){if(null!==e)for(var o=0,r=e.length;r>o;o++)e[o][t](n,i)},i._detect=function(e,t,n,i,o){var r;if(null!==e){if(e.length===+e.length){for(var s=0,a=e.length;a>s;s++)if(r=t.call(n,e[s],s,i,o))return r;return!1}for(var l in e)if(r=t.call(n,e[l],l,i,o))return r;return!1}},i._map=function(e,t,n){var o=[];return null===e?o:e.map?e.map(t,n):(i._each(e,function(e,i,r){o[o.length]=t.call(n,e,i,r)}),e.length===+e.length&&(o.length=e.length),o)},i._uniq=function(e){e=e.slice().sort();for(var t=[],n=null,i=0;i<e.length;i++)void 0!==e[i]&&n!==e[i]&&t.push(e[i]),n=e[i];return t},i._shuffle=function(e){var t,n=[];return i._each(e,function(e,i){t=Math.floor(Math.random()*(i+1)),n[i]=n[t],n[t]=e}),n},i._keys=Object.keys||function(e){if(i._isObject(e))throw new TypeError("Invalid object");var t=[];for(var n in e)i._has(e,n)&&(t[t.length]=n);return t},i._range=function(e,t,n){n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=0,r=new Array(i);i>o;)r[o++]=e,e+=n;return r};var o=0;return i._uniqueId=function(){return o++},i.options={imagePath:"images/",audioPath:"audio/",dataPath:"data/",audioSupported:["mp3","ogg"],sound:!0,frameTimeLimit:100,autoFocus:!0},t&&i._extend(i.options,t),i.scheduleFrame=function(t){return e.requestAnimationFrame(t)},i.cancelFrame=function(t){e.cancelAnimationFrame(t)},i.gameLoop=function(e){return i.lastGameLoopFrame=(new Date).getTime(),i.loop=!0,i._loopFrame=0,i.gameLoopCallbackWrapper=function(){var t=(new Date).getTime();i._loopFrame++,i.loop=i.scheduleFrame(i.gameLoopCallbackWrapper);var n=t-i.lastGameLoopFrame;n>i.options.frameTimeLimit&&(n=i.options.frameTimeLimit),e.apply(i,[n/1e3]),i.lastGameLoopFrame=t},i.scheduleFrame(i.gameLoopCallbackWrapper),i},i.pauseGame=function(){i.loop&&i.cancelFrame(i.loop),i.loop=null},i.unpauseGame=function(){i.loop||(i.lastGameLoopFrame=(new Date).getTime(),i.loop=i.scheduleFrame(i.gameLoopCallbackWrapper))},function(){var e=!1,t=/xyz/.test(function(){})?/\b_super\b/:/.*/;i.Class=function(){},i.Class.prototype.isA=function(e){return this.className===e},i.Class.extend=function(n,o,r){function s(e,t){return function(){var n=this._super;this._super=l[e];var i=t.apply(this,arguments);return this._super=n,i}}function a(){!e&&this.init&&this.init.apply(this,arguments)}i._isString(n)||(r=o,o=n,n=null);var l=this.prototype,c=this;e=!0;var u=new c;e=!1;for(var d in o)u[d]="function"==typeof o[d]&&"function"==typeof l[d]&&t.test(o[d])?s(d,o[d]):o[d];return a.prototype=u,a.prototype.constructor=a,a.extend=i.Class.extend,r&&i._extend(a,r),n&&(i[n]=a,a.prototype.className=n,a.className=n),a}}(),i.Class.extend("Evented",{on:function(e,t,n){if(i._isArray(e)||-1!==e.indexOf(",")){e=i._normalizeArg(e);for(var o=0;o<e.length;o++)this.on(e[o],t,n)}else n||(n=t,t=null),n||(n=e),i._isString(n)&&(n=(t||this)[n]),this.listeners=this.listeners||{},this.listeners[e]=this.listeners[e]||[],this.listeners[e].push([t||this,n]),t&&(t.binds||(t.binds=[]),t.binds.push([this,e,n]))},trigger:function(e,t){if(this.listeners&&this.listeners[e])for(var n=0,i=this.listeners[e].length;i>n;n++){var o=this.listeners[e][n];o[1].call(o[0],t)}},off:function(e,t,n){if(t){i._isString(n)&&t[n]&&(n=t[n]);var o=this.listeners&&this.listeners[e];if(o)for(var r=o.length-1;r>=0;r--)o[r][0]===t&&(n&&n!==o[r][1]||this.listeners[e].splice(r,1))}else this.listeners[e]&&delete this.listeners[e]},debind:function(){if(this.binds)for(var e=0,t=this.binds.length;t>e;e++){var n=this.binds[e],i=n[0],o=n[1];i.off(o,this)}}}),i.components={},i.Evented.extend("Component",{init:function(e){this.entity=e,this.extend&&i._extend(e,this.extend),e[this.name]=this,e.activeComponents.push(this.componentName),e.stage&&e.stage.addToList&&e.stage.addToList(this.componentName,e),this.added&&this.added()},destroy:function(){if(this.extend)for(var e=i._keys(this.extend),t=0,n=e.length;n>t;t++)delete this.entity[e[t]];delete this.entity[this.name];var o=this.entity.activeComponents.indexOf(this.componentName);-1!==o&&(this.entity.activeComponents.splice(o,1),this.entity.stage&&this.entity.stage.addToList&&this.entity.stage.addToLists(this.componentName,this.entity)),this.debind(),this.destroyed&&this.destroyed()}}),i.Evented.extend("GameObject",{has:function(e){return!!this[e]},add:function(e){e=i._normalizeArg(e),this.activeComponents||(this.activeComponents=[]);for(var t=0,n=e.length;n>t;t++){var o=e[t],r=i.components[o];if(!this.has(o)&&r){var s=new r(this);this.trigger("addComponent",s)}}return this},del:function(e){e=i._normalizeArg(e);for(var t=0,n=e.length;n>t;t++){var o=e[t];o&&this.has(o)&&(this.trigger("delComponent",this[o]),this[o].destroy())}return this},destroy:function(){this.isDestroyed||(this.trigger("destroyed"),this.debind(),this.stage&&this.stage.remove&&this.stage.remove(this),this.isDestroyed=!0,this.destroyed&&this.destroyed())}}),i.component=function(e,t){return t?(t.name=e,t.componentName="."+e,i.components[e]=i.Component.extend(e+"Component",t)):i.components[e]},i.GameObject.extend("GameState",{init:function(e){this.p=i._extend({},e),this.listeners={}},reset:function(e){this.init(e),this.trigger("reset")},_triggerProperty:function(e,t){this.p[t]!==e&&(this.p[t]=e,this.trigger("change."+t,e))},set:function(e,t){i._isObject(e)?i._each(e,this._triggerProperty,this):this._triggerProperty(t,e),this.trigger("change")},inc:function(e,t){this.set(e,this.get(e)+t)},dec:function(e,t){this.set(e,this.get(e)-t)},get:function(e){return this.p[e]}}),i.state=new i.GameState,i.reset=function(){i.state.reset()},i.touchDevice="undefined"==typeof exports&&"ontouchstart"in document,i.setup=function(t,n){i._isObject(t)&&(n=t,t=null),n=n||{},t=t||"quintus",i._isString(t)?i.el=document.getElementById(t):i.el=t,i.el||(i.el=document.createElement("canvas"),i.el.width=n.width||320,i.el.height=n.height||420,i.el.id=t,document.body.appendChild(i.el));var o=parseInt(i.el.width,10),r=parseInt(i.el.height,10),s=n.maxWidth||5e3,a=n.maxHeight||5e3,l=n.resampleWidth,c=n.resampleHeight,u=n.upsampleWidth,d=n.upsampleHeight;n.maximize===!0||i.touchDevice&&"touch"===n.maximize?(document.body.style.padding=0,document.body.style.margin=0,o=n.width||Math.min(e.innerWidth,s)-(n.pagescroll?17:0),r=n.height||Math.min(e.innerHeight-5,a),i.touchDevice&&(i.el.style.height=2*r+"px",e.scrollTo(0,1),o=Math.min(e.innerWidth,s),r=Math.min(e.innerHeight,a))):i.touchDevice&&e.scrollTo(0,1),u&&u>=o||d&&d>=r?(i.el.style.height=r+"px",i.el.style.width=o+"px",i.el.width=2*o,i.el.height=2*r):(l&&o>l||c&&r>c)&&i.touchDevice?(i.el.style.height=r+"px",i.el.style.width=o+"px",i.el.width=o/2,i.el.height=r/2):(i.el.style.height=r+"px",i.el.style.width=o+"px",i.el.width=o,i.el.height=r);var p=i.el.parentNode;if(p&&!i.wrapper&&(i.wrapper=document.createElement("div"),i.wrapper.id=i.el.id+"_container",i.wrapper.style.width=o+"px",i.wrapper.style.margin="0 auto",i.wrapper.style.position="relative",p.insertBefore(i.wrapper,i.el),i.wrapper.appendChild(i.el)),i.el.style.position="relative",i.ctx=i.el.getContext&&i.el.getContext("2d"),i.width=parseInt(i.el.width,10),i.height=parseInt(i.el.height,10),i.cssWidth=o,i.cssHeight=r,n.scaleToFit){var f=1,h=e.innerWidth*f,g=e.innerHeight*f,m=h/g,v=i.el.width/i.el.height,b=m>v?g/i.el.height:h/i.el.width,y=i.el.width*b,w=i.el.height*b;if(i.el.style.width=y+"px",i.el.style.height=w+"px",i.el.parentNode&&(i.el.parentNode.style.width=y+"px",i.el.parentNode.style.height=w+"px"),i.cssWidth=parseInt(y,10),i.cssHeight=parseInt(w,10),v>m){var E=(g-w)/2;i.el.style.top=E+"px"}}return e.addEventListener("orientationchange",function(){setTimeout(function(){e.scrollTo(0,1)},0)}),i},i.clear=function(){i.clearColor?(i.ctx.globalAlpha=1,i.ctx.fillStyle=i.clearColor,i.ctx.fillRect(0,0,i.width,i.height)):i.ctx.clearRect(0,0,i.width,i.height)},i.setImageSmoothing=function(e){i.ctx.mozImageSmoothingEnabled=e,i.ctx.webkitImageSmoothingEnabled=e,i.ctx.msImageSmoothingEnabled=e,i.ctx.imageSmoothingEnabled=e},i.imageData=function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,e.width,e.height)},i.assetTypes={png:"Image",jpg:"Image",gif:"Image",jpeg:"Image",ogg:"Audio",wav:"Audio",m4a:"Audio",mp3:"Audio"},i._fileExtension=function(e){var t=e.split("."),n=t[t.length-1].toLowerCase();return n},i.assetType=function(e){var t=i._fileExtension(e),n=i.assetTypes[t];return"Audio"===n&&i.audio&&"WebAudio"===i.audio.type&&(n="WebAudio"),n||"Other"},i.assetUrl=function(e,t){var n="";return i.options.development&&(n=(/\?/.test(t)?"&":"?")+"_t="+(new Date).getTime()),/^https?:\/\//.test(t)||"/"===t[0]?t+n:e+t+n},i.loadAssetImage=function(e,t,n,o){var r=new Image;r.onload=function(){n(e,r)},r.onerror=o,r.src=i.assetUrl(i.options.imagePath,t)},i.audioMimeTypes={mp3:"audio/mpeg",ogg:'audio/ogg; codecs="vorbis"',m4a:"audio/m4a",wav:"audio/wav"},i._audioAssetExtension=function(){if(i._audioAssetPreferredExtension)return i._audioAssetPreferredExtension;var e=new Audio;return i._audioAssetPreferredExtension=i._detect(i.options.audioSupported,function(t){return e.canPlayType(i.audioMimeTypes[t])?t:null})},i.loadAssetAudio=function(e,t,n,o){if(!document.createElement("audio").play||!i.options.sound)return void n(e,null);var r=i._removeExtension(t),s=i._audioAssetExtension(),a=new Audio;return s?(a.addEventListener("error",o),i.touchDevice||a.addEventListener("canplaythrough",function(){n(e,a)}),a.src=i.assetUrl(i.options.audioPath,r+"."+s),a.load(),void(i.touchDevice&&n(e,a))):void n(e,null)},i.loadAssetWebAudio=function(e,t,n,o){var r=new XMLHttpRequest,s=i._removeExtension(t),a=i._audioAssetExtension();r.open("GET",i.assetUrl(i.options.audioPath,s+"."+a),!0),r.responseType="arraybuffer",r.onload=function(){r.response;i.audioContext.decodeAudioData(r.response,function(t){n(e,t)},o)},r.send()},i.loadAssetOther=function(e,t,n,o){var r=new XMLHttpRequest,s=t.split("."),a=s[s.length-1].toLowerCase();return"file://"===document.location.origin||"null"===document.location.origin?(i.fileURLAlert||(i.fileURLAlert=!0,alert("Quintus Error: Loading assets is not supported from file:// urls - please run from a local web-server and try again")),o()):(r.onreadystatechange=function(){4===r.readyState&&(200===r.status?"json"===a?n(e,JSON.parse(r.responseText)):n(e,r.responseText):o())},r.open("GET",i.assetUrl(i.options.dataPath,t),!0),void r.send(null))},i._removeExtension=function(e){return e.replace(/\.(\w{3,4})$/,"")},i.assets={},i.asset=function(e){return i.assets[e]},i.load=function(e,t,n){var o={};n||(n={});var r=n.progressCallback,s=!1,a=function(e){s=!0,(n.errorCallback||function(e){throw"Error Loading: "+e})(e)};i._isString(e)&&(e=i._normalizeArg(e)),i._isArray(e)?i._each(e,function(e){i._isObject(e)?i._extend(o,e):o[e]=e}):o=e;var l=i._keys(o).length,c=l,u=function(e,n,o){s||(i.assets[e]&&!o||(i.assets[e]=n,c--,r&&r(l-c,l)),0===c&&t&&t.apply(i))};i._each(o,function(e,t){var n=i.assetType(e);i.assets[t]?u(t,i.assets[t],!0):i["loadAsset"+n](t,e,u,function(){a(e)})})},i.preloads=[],i.preload=function(e,t){i._isFunction(e)?(i.load(i._uniq(i.preloads),e,t),i.preloads=[]):i.preloads=i.preloads.concat(e)},i.matrices2d=[],i.matrix2d=function(){return i.matrices2d.length>0?i.matrices2d.pop().identity():new i.Matrix2D},i.Matrix2D=i.Class.extend({init:function(e){e?(this.m=[],this.clone(e)):this.m=[1,0,0,0,1,0]},identity:function(){var e=this.m;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,this},clone:function(e){var t=this.m,n=e.m;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],this},multiply:function(e){var t=this.m,n=e.m,i=t[0]*n[0]+t[1]*n[3],o=t[0]*n[1]+t[1]*n[4],r=t[0]*n[2]+t[1]*n[5]+t[2],s=t[3]*n[0]+t[4]*n[3],a=t[3]*n[1]+t[4]*n[4],l=t[3]*n[2]+t[4]*n[5]+t[5];return t[0]=i,t[1]=o,t[2]=r,t[3]=s,t[4]=a,t[5]=l,this},rotate:function(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e),i=this.m,o=i[0]*t+i[1]*n,r=i[0]*-n+i[1]*t,s=i[3]*t+i[4]*n,a=i[3]*-n+i[4]*t;return i[0]=o,i[1]=r,i[3]=s,i[4]=a,this},rotateDeg:function(e){return 0===e?this:this.rotate(Math.PI*e/180)},scale:function(e,t){var n=this.m;return void 0===t&&(t=e),n[0]*=e,n[1]*=t,n[3]*=e,n[4]*=t,this},translate:function(e,t){var n=this.m;return n[2]+=n[0]*e+n[1]*t,n[5]+=n[3]*e+n[4]*t,this},transform:function(e,t){return[e*this.m[0]+t*this.m[1]+this.m[2],e*this.m[3]+t*this.m[4]+this.m[5]]},transformPt:function(e){var t=e.x,n=e.y;return e.x=t*this.m[0]+n*this.m[1]+this.m[2],e.y=t*this.m[3]+n*this.m[4]+this.m[5],e},transformArr:function(e,t){var n=e[0],i=e[1];return t[0]=n*this.m[0]+i*this.m[1]+this.m[2],t[1]=n*this.m[3]+i*this.m[4]+this.m[5],t},transformX:function(e,t){return e*this.m[0]+t*this.m[1]+this.m[2]},transformY:function(e,t){return e*this.m[3]+t*this.m[4]+this.m[5]},release:function(){return i.matrices2d.push(this),null},setContextTransform:function(e){var t=this.m;e.transform(t[0],t[3],t[1],t[4],t[2],t[5])}}),i};return function(){for(var t=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!e.requestAnimationFrame;++i)e.requestAnimationFrame=e[n[i]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[i]+"CancelAnimationFrame"]||e[n[i]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),o=setTimeout(function(){e(n+i)},i);return t=n+i,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}(),n};if("undefined"==typeof exports)quintusCore(this,"Quintus");else var Quintus=quintusCore(module,"exports");var quintus2D=function(e){"use strict";e["2D"]=function(e){e.component("viewport",{added:function(){this.entity.on("prerender",this,"prerender"),this.entity.on("render",this,"postrender"),this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.centerX=e.width/2,this.centerY=e.height/2,this.scale=1},extend:{follow:function(t,n,i){this.off("poststep",this.viewport,"follow"),this.viewport.directions=n||{x:!0,y:!0},this.viewport.following=t,e._isUndefined(i)&&void 0!==this.lists.TileLayer?this.viewport.boundingBox=e._detect(this.lists.TileLayer,function(e){return e.p.boundingBox?{minX:0,maxX:e.p.w,minY:0,maxY:e.p.h}:null}):this.viewport.boundingBox=i,this.on("poststep",this.viewport,"follow"),this.viewport.follow(!0)},unfollow:function(){this.off("poststep",this.viewport,"follow")},centerOn:function(e,t){this.viewport.centerOn(e,t)},moveTo:function(e,t){return this.viewport.moveTo(e,t)}},follow:function(t){var n=e._isFunction(this.directions.x)?this.directions.x(this.following):this.directions.x,i=e._isFunction(this.directions.y)?this.directions.y(this.following):this.directions.y;this[t===!0?"centerOn":"softCenterOn"](n?this.following.p.x-this.offsetX:void 0,i?this.following.p.y-this.offsetY:void 0)},offset:function(e,t){this.offsetX=e,this.offsetY=t},softCenterOn:function(t,n){if(void 0!==t){var i=(t-e.width/2/this.scale-this.x)/3;this.boundingBox?this.x+i<this.boundingBox.minX?this.x=this.boundingBox.minX/this.scale:this.x+i>(this.boundingBox.maxX-e.width)/this.scale?this.x=Math.max(this.boundingBox.maxX-e.width,this.boundingBox.minX)/this.scale:this.x+=i:this.x+=i}if(void 0!==n){var o=(n-e.height/2/this.scale-this.y)/3;this.boundingBox?this.y+o<this.boundingBox.minY?this.y=this.boundingBox.minY/this.scale:this.y+o>(this.boundingBox.maxY-e.height)/this.scale?this.y=Math.max(this.boundingBox.maxY-e.height,this.boundingBox.minY)/this.scale:this.y+=o:this.y+=o}},centerOn:function(t,n){void 0!==t&&(this.x=t-e.width/2/this.scale),void 0!==n&&(this.y=n-e.height/2/this.scale)},moveTo:function(e,t){return void 0!==e&&(this.x=e),void 0!==t&&(this.y=t),this.entity},prerender:function(){this.centerX=this.x+e.width/2/this.scale,this.centerY=this.y+e.height/2/this.scale,e.ctx.save(),e.ctx.translate(Math.floor(e.width/2),Math.floor(e.height/2)),e.ctx.scale(this.scale,this.scale),e.ctx.translate(-Math.floor(this.centerX),-Math.floor(this.centerY))},postrender:function(){e.ctx.restore()}}),e.Sprite.extend("TileLayer",{init:function(e){this._super(e,{tileW:32,tileH:32,blockTileW:10,blockTileH:10,type:1,renderAlways:!0}),this.p.dataAsset&&this.load(this.p.dataAsset),this.setDimensions(),this.blocks=[],this.p.blockW=this.p.tileW*this.p.blockTileW,this.p.blockH=this.p.tileH*this.p.blockTileH,this.colBounds={},this.directions=["top","left","right","bottom"],this.tileProperties={},this.collisionObject={p:{w:this.p.tileW,h:this.p.tileH,cx:this.p.tileW/2,cy:this.p.tileH/2}},this.tileCollisionObjects={},this.collisionNormal={separate:[]},this._generateCollisionObjects()},_generateCollisionObjects:function(){function t(e){return[e[0]*n.p.tileW-n.p.tileW/2,e[1]*n.p.tileH-n.p.tileH/2]}var n=this;if(this.sheet()&&this.sheet().frameProperties){var i=this.sheet().frameProperties;for(var o in i){var r=this.tileCollisionObjects[o]={p:e._clone(this.collisionObject.p)};e._extend(r.p,i[o]),r.p.points&&(r.p.points=e._map(r.p.points,t)),this.tileCollisionObjects[o]=r}}},load:function(t){var n,i=t.split("."),o=i[i.length-1].toLowerCase();if("json"!==o)throw"file type not supported";n=e._isString(t)?e.asset(t):t,this.p.tiles=n},setDimensions:function(){var e=this.p.tiles;e&&(this.p.rows=e.length,this.p.cols=e[0].length,this.p.w=this.p.cols*this.p.tileW,this.p.h=this.p.rows*this.p.tileH)},getTile:function(e,t){return this.p.tiles[t]&&this.p.tiles[t][e]},getTileProperty:function(e,t){return void 0!==this.tileProperties[e]?this.tileProperties[e][t]:void 0},getTileProperties:function(e){return void 0!==this.tileProperties[e]?this.tileProperties[e]:{}},getTilePropertyAt:function(e,t,n){return this.getTileProperty(this.getTile(e,t),n)},getTilePropertiesAt:function(e,t){return this.getTileProperties(this.getTile(e,t))},tileHasProperty:function(e,t){return void 0!==this.getTileProperty(e,t);
},setTile:function(e,t,n){var i=this.p,o=Math.floor(e/i.blockTileW),r=Math.floor(t/i.blockTileH);e>=0&&e<this.p.cols&&t>=0&&t<this.p.rows&&(this.p.tiles[t][e]=n,this.blocks[r]&&(this.blocks[r][o]=null))},tilePresent:function(e,t){return this.p.tiles[t]&&this.collidableTile(this.p.tiles[t][e])},drawableTile:function(e){return e>0},collidableTile:function(e){return e>0},getCollisionObject:function(e,t){var n,i=this.p,o=this.getTile(e,t);return n=void 0!==this.tileCollisionObjects[o]?this.tileCollisionObjects[o]:this.collisionObject,n.p.x=e*i.tileW+i.x+i.tileW/2,n.p.y=t*i.tileH+i.y+i.tileH/2,n},collide:function(t){var n,i,o=this.p,r=t.c||t.p,s=Math.floor((r.x-r.cx-o.x)/o.tileW),a=Math.floor((r.y-r.cy-o.y)/o.tileH),l=Math.ceil((r.x-r.cx+r.w-o.x)/o.tileW),c=Math.ceil((r.y-r.cy+r.h-o.y)/o.tileH),u=this.collisionNormal;u.collided=!1;for(var d=a;c>=d;d++)for(var p=s;l>=p;p++)this.tilePresent(p,d)&&(i=this.getCollisionObject(p,d),n=e.collision(t,i),n&&n.magnitude>0&&(i.p.sensor?(i.tile=this.getTile(p,d),t.trigger&&t.trigger("sensor.tile",i)):(!u.collided||u.magnitude<n.magnitude)&&(u.collided=!0,u.separate[0]=n.separate[0],u.separate[1]=n.separate[1],u.magnitude=n.magnitude,u.distance=n.distance,u.normalX=n.normalX,u.normalY=n.normalY,u.tileX=p,u.tileY=d,u.tile=this.getTile(p,d),void 0!==t.p.collisions&&t.p.collisions.push(u))));return u.collided?u:!1},prerenderBlock:function(e,t){var n=this.p,i=n.tiles,o=this.sheet(),r=e*n.blockTileW,s=t*n.blockTileH;if(!(0>r||r>=this.p.cols||0>s||s>=this.p.rows)){var a=document.createElement("canvas"),l=a.getContext("2d");a.width=n.blockW,a.height=n.blockH,this.blocks[t]=this.blocks[t]||{},this.blocks[t][e]=a;for(var c=0;c<n.blockTileH;c++)if(i[c+s])for(var u=0;u<n.blockTileW;u++)this.drawableTile(i[c+s][u+r])&&o.draw(l,u*n.tileW,c*n.tileH,i[c+s][u+r])}},drawBlock:function(e,t,n){var i=this.p,o=Math.floor(t*i.blockW+i.x),r=Math.floor(n*i.blockH+i.y);this.blocks[n]&&this.blocks[n][t]||this.prerenderBlock(t,n),this.blocks[n]&&this.blocks[n][t]&&e.drawImage(this.blocks[n][t],o,r)},draw:function(t){for(var n=this.p,i=this.stage.viewport,o=i?i.scale:1,r=i?i.x:0,s=i?i.y:0,a=e.width/o,l=e.height/o,c=Math.floor((r-n.x)/n.blockW),u=Math.floor((s-n.y)/n.blockH),d=Math.floor((r+a-n.x)/n.blockW),p=Math.floor((s+l-n.y)/n.blockH),f=u;p>=f;f++)for(var h=c;d>=h;h++)this.drawBlock(t,h,f)}}),e.gravityY=9.8*100,e.gravityX=0,e.component("2d",{added:function(){var t=this.entity;e._defaults(t.p,{vx:0,vy:0,ax:0,ay:0,gravity:1,collisionMask:e.SPRITE_DEFAULT}),t.on("step",this,"step"),t.on("hit",this,"collision")},collision:function(e){var t=this.entity,n=t.p;if(e.obj.p&&e.obj.p.sensor)return void e.obj.trigger("sensor",t);e.impact=0;var i=Math.abs(n.vx),o=Math.abs(n.vy);n.x-=e.separate[0],n.y-=e.separate[1],e.normalY<-.3&&(!n.skipCollide&&n.vy>0&&(n.vy=0),e.impact=o,t.trigger("bump.bottom",e),t.trigger("bump",e)),e.normalY>.3&&(!n.skipCollide&&n.vy<0&&(n.vy=0),e.impact=o,t.trigger("bump.top",e),t.trigger("bump",e)),e.normalX<-.3&&(!n.skipCollide&&n.vx>0&&(n.vx=0),e.impact=i,t.trigger("bump.right",e),t.trigger("bump",e)),e.normalX>.3&&(!n.skipCollide&&n.vx<0&&(n.vx=0),e.impact=i,t.trigger("bump.left",e),t.trigger("bump",e))},step:function(t){for(var n=this.entity.p,i=t;i>0;)t=Math.min(1/30,i),n.vx+=n.ax*t+(void 0===n.gravityX?e.gravityX:n.gravityX)*t*n.gravity,n.vy+=n.ay*t+(void 0===n.gravityY?e.gravityY:n.gravityY)*t*n.gravity,n.x+=n.vx*t,n.y+=n.vy*t,this.entity.stage.collide(this.entity),i-=t}}),e.component("aiBounce",{added:function(){this.entity.on("bump.right",this,"goLeft"),this.entity.on("bump.left",this,"goRight")},goLeft:function(e){this.entity.p.vx=-e.impact,"right"===this.entity.p.defaultDirection?this.entity.p.flip="x":this.entity.p.flip=!1},goRight:function(e){this.entity.p.vx=e.impact,"left"===this.entity.p.defaultDirection?this.entity.p.flip="x":this.entity.p.flip=!1}})}};"undefined"==typeof Quintus?module.exports=quintus2D:quintus2D(Quintus);var quintusSprites=function(e){"use strict";e.Sprites=function(e){return e.Class.extend("SpriteSheet",{init:function(t,n,i){if(!e.asset(n))throw"Invalid Asset:"+n;e._extend(this,{name:t,asset:n,w:e.asset(n).width,h:e.asset(n).height,tileW:64,tileH:64,sx:0,sy:0,spacingX:0,spacingY:0,frameProperties:{}}),i&&e._extend(this,i),this.tilew&&(this.tileW=this.tilew,delete this.tilew),this.tileh&&(this.tileH=this.tileh,delete this.tileh),this.cols=this.cols||Math.floor((this.w+this.spacingX)/(this.tileW+this.spacingX)),this.frames=this.cols*Math.floor(this.h/(this.tileH+this.spacingY))},fx:function(e){return Math.floor(e%this.cols*(this.tileW+this.spacingX)+this.sx)},fy:function(e){return Math.floor(Math.floor(e/this.cols)*(this.tileH+this.spacingY)+this.sy)},draw:function(t,n,i,o){t||(t=e.ctx),t.drawImage(e.asset(this.asset),this.fx(o),this.fy(o),this.tileW,this.tileH,Math.floor(n),Math.floor(i),this.tileW,this.tileH)}}),e.sheets={},e.sheet=function(t,n,i){return n?void(e.sheets[t]=new e.SpriteSheet(t,n,i)):e.sheets[t]},e.compileSheets=function(t,n){var i=e.asset(n);e._each(i,function(n,i){e.sheet(i,t,n)})},e.SPRITE_NONE=0,e.SPRITE_DEFAULT=1,e.SPRITE_PARTICLE=2,e.SPRITE_ACTIVE=4,e.SPRITE_FRIENDLY=8,e.SPRITE_ENEMY=16,e.SPRITE_POWERUP=32,e.SPRITE_UI=64,e.SPRITE_ALL=65535,e._generatePoints=function(e,t){if(!e.p.points||t){var n=e.p,i=n.w/2,o=n.h/2;n.points=[[-i,-o],[i,-o],[i,o],[-i,o]]}},e._generateCollisionPoints=function(t){if(t.matrix||t.refreshMatrix){t.c||(t.c={points:[]});var n=t.p,i=t.c;if(n.moved||i.origX!==n.x||i.origY!==n.y||i.origScale!==n.scale||i.origAngle!==n.angle){i.origX=n.x,i.origY=n.y,i.origScale=n.scale,i.origAngle=n.angle,t.refreshMatrix();var o;if(t.container||n.scale&&1!==n.scale||0!==n.angle){var r=t.container||e._nullContainer;i.x=r.matrix.transformX(n.x,n.y),i.y=r.matrix.transformY(n.x,n.y),i.angle=n.angle+r.c.angle,i.scale=(r.c.scale||1)*(n.scale||1);var s=1/0,a=1/0,l=-(1/0),c=-(1/0);for(o=0;o<t.p.points.length;o++){t.c.points[o]||(t.c.points[o]=[]),t.matrix.transformArr(t.p.points[o],t.c.points[o]);var u=t.c.points[o][0],d=t.c.points[o][1];s>u&&(s=u),u>l&&(l=u),a>d&&(a=d),d>c&&(c=d)}s===l&&(l+=1),a===c&&(c+=1),i.cx=i.x-s,i.cy=i.y-a,i.w=l-s,i.h=c-a}else{for(o=0;o<t.p.points.length;o++)t.c.points[o]=t.c.points[o]||[],t.c.points[o][0]=n.x+t.p.points[o][0],t.c.points[o][1]=n.y+t.p.points[o][1];i.x=n.x,i.y=n.y,i.cx=n.cx,i.cy=n.cy,i.w=n.w,i.h=n.h}n.moved=!1,t.children&&t.children.length>0&&e._invoke(t.children,"moved")}}},e.GameObject.extend("Sprite",{init:function(t,n){this.p=e._extend({x:0,y:0,z:0,opacity:1,angle:0,frame:0,type:e.SPRITE_DEFAULT|e.SPRITE_ACTIVE,name:"",spriteProperties:{}},n),this.matrix=new e.Matrix2D,this.children=[],e._extend(this.p,t),this.size(),this.p.id=this.p.id||e._uniqueId(),this.refreshMatrix()},size:function(e){!e&&this.p.w&&this.p.h||(this.asset()?(this.p.w=this.asset().width,this.p.h=this.asset().height):this.sheet()&&(this.p.w=this.sheet().tileW,this.p.h=this.sheet().tileH)),this.p.cx=e||void 0===this.p.cx?this.p.w/2:this.p.cx,this.p.cy=e||void 0===this.p.cy?this.p.h/2:this.p.cy},asset:function(t,n){return t?(this.p.asset=t,void(n&&(this.size(!0),e._generatePoints(this,!0)))):e.asset(this.p.asset)},sheet:function(t,n){return t?(this.p.sheet=t,void(n&&(this.size(!0),e._generatePoints(this,!0)))):e.sheet(this.p.sheet)},hide:function(){this.p.hidden=!0},show:function(){this.p.hidden=!1},set:function(t){return e._extend(this.p,t),this},_sortChild:function(e,t){return(e.p&&e.p.z||-1)-(t.p&&t.p.z||-1)},_flipArgs:{x:[-1,1],y:[1,-1],xy:[-1,-1]},render:function(t){var n=this.p;n.hidden||0===n.opacity||(t||(t=e.ctx),this.trigger("predraw",t),t.save(),void 0!==this.p.opacity&&1!==this.p.opacity&&(t.globalAlpha=this.p.opacity),this.matrix.setContextTransform(t),this.p.flip&&t.scale.apply(t,this._flipArgs[this.p.flip]),this.trigger("beforedraw",t),this.draw(t),this.trigger("draw",t),t.restore(),this.p.sort&&this.children.sort(this._sortChild),e._invoke(this.children,"render",t),this.trigger("postdraw",t),e.debug&&this.debugRender(t))},center:function(){this.container?(this.p.x=0,this.p.y=0):(this.p.x=e.width/2,this.p.y=e.height/2)},draw:function(t){var n=this.p;n.sheet?this.sheet().draw(t,-n.cx,-n.cy,n.frame):n.asset?t.drawImage(e.asset(n.asset),-n.cx,-n.cy):n.color&&(t.fillStyle=n.color,t.fillRect(-n.cx,-n.cy,n.w,n.h))},debugRender:function(t){this.p.points||e._generatePoints(this),t.save(),this.matrix.setContextTransform(t),t.beginPath(),t.fillStyle=this.p.hit?"blue":"red",t.strokeStyle="#FF0000",t.fillStyle="rgba(0,0,0,0.5)",t.moveTo(this.p.points[0][0],this.p.points[0][1]);for(var n=0;n<this.p.points.length;n++)t.lineTo(this.p.points[n][0],this.p.points[n][1]);if(t.lineTo(this.p.points[0][0],this.p.points[0][1]),t.stroke(),e.debugFill&&t.fill(),t.restore(),this.c){var i=this.c;t.save(),t.globalAlpha=1,t.lineWidth=2,t.strokeStyle="#FF00FF",t.beginPath(),t.moveTo(i.x-i.cx,i.y-i.cy),t.lineTo(i.x-i.cx+i.w,i.y-i.cy),t.lineTo(i.x-i.cx+i.w,i.y-i.cy+i.h),t.lineTo(i.x-i.cx,i.y-i.cy+i.h),t.lineTo(i.x-i.cx,i.y-i.cy),t.stroke(),t.restore()}},update:function(t){this.trigger("prestep",t),this.step&&this.step(t),this.trigger("step",t),e._generateCollisionPoints(this),this.stage&&this.children.length>0&&this.stage.updateSprites(this.children,t,!0),this.p.collisions&&(this.p.collisions=[])},refreshMatrix:function(){var e=this.p;this.matrix.identity(),this.container&&this.matrix.multiply(this.container.matrix),this.matrix.translate(e.x,e.y),e.scale&&this.matrix.scale(e.scale,e.scale),this.matrix.rotateDeg(e.angle)},moved:function(){this.p.moved=!0}}),e.Sprite.extend("MovingSprite",{init:function(t,n){this._super(e._extend({vx:0,vy:0,ax:0,ay:0},t),n)},step:function(e){var t=this.p;t.vx+=t.ax*e,t.vy+=t.ay*e,t.x+=t.vx*e,t.y+=t.vy*e}}),e}};"undefined"==typeof Quintus?module.exports=quintusSprites:quintusSprites(Quintus);var quintusInput=function(e){"use strict";e.Input=function(e){var t=e.KEY_NAMES={LEFT:37,RIGHT:39,UP:38,DOWN:40,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,ESC:27,BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,SPACE:32,HOME:36,END:35,PGGUP:33,PGDOWN:34},n={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down",SPACE:"fire",Z:"fire",X:"action",ENTER:"confirm",ESC:"esc",P:"P",S:"S"},i=[["left","<"],["right",">"],[],["action","b"],["fire","a"]],o=["up","right","down","left"];e.inputs={},e.joypad={};var r=!!("ontouchstart"in window);e.canvasToStageX=function(t,n){return t=t/e.cssWidth*e.width,n.viewport&&(t/=n.viewport.scale,t+=n.viewport.x),t},e.canvasToStageY=function(t,n){return t=t/e.cssWidth*e.width,n.viewport&&(t/=n.viewport.scale,t+=n.viewport.y),t},e.InputSystem=e.Evented.extend({keys:{},keypad:{},keyboardEnabled:!1,touchEnabled:!1,joypadEnabled:!1,bindKey:function(n,i){e.input.keys[t[n]||n]=i},enableKeyboard:function(){return this.keyboardEnabled?!1:(e.el.tabIndex=0,e.el.style.outline=0,e.el.addEventListener("keydown",function(t){if(e.input.keys[t.keyCode]){var n=e.input.keys[t.keyCode];e.inputs[n]=!0,e.input.trigger(n),e.input.trigger("keydown",t.keyCode)}t.ctrlKey||t.metaKey||t.preventDefault()},!1),e.el.addEventListener("keyup",function(t){if(e.input.keys[t.keyCode]){var n=e.input.keys[t.keyCode];e.inputs[n]=!1,e.input.trigger(n+"Up"),e.input.trigger("keyup",t.keyCode)}t.preventDefault()},!1),e.options.autoFocus&&e.el.focus(),void(this.keyboardEnabled=!0))},keyboardControls:function(t){t=t||n,e._each(t,function(e,t){this.bindKey(t,e)},e.input),this.enableKeyboard()},_containerOffset:function(){e.input.offsetX=0,e.input.offsetY=0;var t=e.el;do e.input.offsetX+=t.offsetLeft,e.input.offsetY+=t.offsetTop;while(t=t.offsetParent)},touchLocation:function(t){var n,i,o=(e.el,t.offsetX),r=t.offsetY;return(e._isUndefined(o)||e._isUndefined(r))&&(o=t.layerX,r=t.layerY),(e._isUndefined(o)||e._isUndefined(r))&&(void 0===e.input.offsetX&&e.input._containerOffset(),o=t.pageX-e.input.offsetX,r=t.pageY-e.input.offsetY),n=e.width*o/e.cssWidth,i=e.height*r/e.cssHeight,{x:n,y:i}},touchControls:function(t){function n(n){for(var i=e.input.touchLocation(n),o=t.bottom-t.unit,r=0,s=t.controls.length;s>r;r++){var a=r*t.unit+t.gutter;if(i.x>=a&&i.x<=a+t.size&&(t.fullHeight||i.y>=o+t.gutter&&i.y<=o+t.unit-t.gutter))return t.controls[r][0]}}function o(i){var o,r,s,a,l,c={};for(o=0,r=t.controls.length;r>o;o++)l=t.controls[o][0],e.inputs[l]&&(c[l]=!0),e.inputs[l]=!1;var u=i.touches?i.touches:[i];for(o=0,r=u.length;r>o;o++)s=u[o],a=n(s),a&&(e.inputs[a]=!0,c[a]?delete c[a]:e.input.trigger(a));for(l in c)e.input.trigger(l+"Up");return null}return this.touchEnabled?!1:r?(e.input.keypad=t=e._extend({left:0,gutter:10,controls:i,width:e.width,bottom:e.height,fullHeight:!1},t),t.unit=t.width/t.controls.length,t.size=t.unit-2*t.gutter,this.touchDispatchHandler=function(e){o(e),e.preventDefault()},e._each(["touchstart","touchend","touchmove","touchcancel"],function(t){e.el.addEventListener(t,this.touchDispatchHandler)},this),void(this.touchEnabled=!0)):!1},disableTouchControls:function(){e._each(["touchstart","touchend","touchmove","touchcancel"],function(t){e.el.removeEventListener(t,this.touchDispatchHandler)},this),e.el.removeEventListener("touchstart",this.joypadStart),e.el.removeEventListener("touchmove",this.joypadMove),e.el.removeEventListener("touchend",this.joypadEnd),e.el.removeEventListener("touchcancel",this.joypadEnd),this.touchEnabled=!1;for(var t in e.inputs)e.inputs[t]=!1},joypadControls:function(t){if(this.joypadEnabled)return!1;if(!r)return!1;var n=e.joypad=e._defaults(t||{},{size:50,trigger:20,center:25,color:"#CCC",background:"#000",alpha:.5,zone:e.width/2,joypadTouch:null,inputs:o,triggers:[]});this.joypadStart=function(t){if(null===n.joypadTouch){var i=t.changedTouches[0],o=e.input.touchLocation(i);o.x<n.zone&&(n.joypadTouch=i.identifier,n.centerX=o.x,n.centerY=o.y,n.x=null,n.y=null)}},this.joypadMove=function(t){if(null!==n.joypadTouch)for(var i=t,o=0,r=i.changedTouches.length;r>o;o++){var s=i.changedTouches[o];if(s.identifier===n.joypadTouch){var a=e.input.touchLocation(s),l=a.x-n.centerX,c=a.y-n.centerY,u=Math.sqrt(l*l+c*c),d=Math.max(1,u/n.size),p=Math.atan2(l,c);d>1&&(l/=d,c/=d,u/=d);for(var f=[c<-n.trigger,l>n.trigger,c>n.trigger,l<-n.trigger],h=0;h<f.length;h++){var g=n.inputs[h];f[h]?(e.inputs[g]=!0,n.triggers[h]||e.input.trigger(g)):(e.inputs[g]=!1,n.triggers[h]&&e.input.trigger(g+"Up"))}e._extend(n,{dx:l,dy:c,x:n.centerX+l,y:n.centerY+c,dist:u,ang:p,triggers:f});break}}t.preventDefault()},this.joypadEnd=function(t){var i=t;if(null!==n.joypadTouch)for(var o=0,r=i.changedTouches.length;r>o;o++){var s=i.changedTouches[o];if(s.identifier===n.joypadTouch){for(var a=0;a<n.triggers.length;a++){var l=n.inputs[a];e.inputs[l]=!1,n.triggers[a]&&e.input.trigger(l+"Up")}n.joypadTouch=null;break}}t.preventDefault()},e.el.addEventListener("touchstart",this.joypadStart),e.el.addEventListener("touchmove",this.joypadMove),e.el.addEventListener("touchend",this.joypadEnd),e.el.addEventListener("touchcancel",this.joypadEnd),this.joypadEnabled=!0},mouseControls:function(t){t=t||{};var n=t.stageNum||0,i=t.mouseX||"mouseX",o=t.mouseY||"mouseY",r=t.cursor||"off",s={};"on"!==r&&("off"===r?e.el.style.cursor="none":e.el.style.cursor=r),e.inputs[i]=0,e.inputs[o]=0,e._mouseMove=function(t){t.preventDefault();var r=t.touches?t.touches[0]:t,a=e.el,l=a.getBoundingClientRect(),c=window.getComputedStyle(a),u=r.clientX-l.left-parseInt(c.paddingLeft,10),d=r.clientY-l.top-parseInt(c.paddingTop,10),p=e.stage(n);(e._isUndefined(u)||e._isUndefined(d))&&(u=r.offsetX,d=r.offsetY),(e._isUndefined(u)||e._isUndefined(d))&&(u=r.layerX,d=r.layerY),(e._isUndefined(u)||e._isUndefined(d))&&(void 0===e.input.offsetX&&e.input._containerOffset(),u=r.pageX-e.input.offsetX,d=r.pageY-e.input.offsetY),p&&(s.x=e.canvasToStageX(u,p),s.y=e.canvasToStageY(d,p),e.inputs[i]=s.x,e.inputs[o]=s.y,e.input.trigger("mouseMove",s))},e._mouseWheel=function(t){t=window.event||t;var n=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));e.input.trigger("mouseWheel",n)},e.el.addEventListener("mousemove",e._mouseMove,!0),e.el.addEventListener("touchstart",e._mouseMove,!0),e.el.addEventListener("touchmove",e._mouseMove,!0),e.el.addEventListener("mousewheel",e._mouseWheel,!0),e.el.addEventListener("DOMMouseScroll",e._mouseWheel,!0)},disableMouseControls:function(){e._mouseMove&&(e.el.removeEventListener("mousemove",e._mouseMove,!0),e.el.removeEventListener("mousewheel",e._mouseWheel,!0),e.el.removeEventListener("DOMMouseScroll",e._mouseWheel,!0),e.el.style.cursor="inherit",e._mouseMove=null)},drawButtons:function(){var t=e.input.keypad,n=e.ctx;n.save(),n.textAlign="center",n.textBaseline="middle";for(var i=0;i<t.controls.length;i++){var o=t.controls[i];if(o[0]){n.font="bold "+t.size/2+"px arial";var r=t.left+i*t.unit+t.gutter,s=t.bottom-t.unit,a=e.inputs[o[0]];n.fillStyle=t.color||"#FFFFFF",n.globalAlpha=a?1:.5,n.fillRect(r,s,t.size,t.size),n.fillStyle=t.text||"#000000",n.fillText(o[1],r+t.size/2,s+t.size/2)}}n.restore()},drawCircle:function(t,n,i,o){var r=e.ctx,s=e.joypad;r.save(),r.beginPath(),r.globalAlpha=s.alpha,r.fillStyle=i,r.arc(t,n,o,0,2*Math.PI,!0),r.closePath(),r.fill(),r.restore()},drawJoypad:function(){var t=e.joypad;null!==t.joypadTouch&&(e.input.drawCircle(t.centerX,t.centerY,t.background,t.size),null!==t.x&&e.input.drawCircle(t.x,t.y,t.color,t.center))},drawCanvas:function(){this.touchEnabled&&this.drawButtons(),this.joypadEnabled&&this.drawJoypad()}}),e.input=new e.InputSystem,e.controls=function(t){return e.input.keyboardControls(),t?(e.input.touchControls({controls:[[],[],[],["action","b"],["fire","a"]]}),e.input.joypadControls()):e.input.touchControls(),e},e.component("platformerControls",{defaults:{speed:200,jumpSpeed:-300,collisions:[]},added:function(){var t=this.entity.p;e._defaults(t,this.defaults),this.entity.on("step",this,"step"),this.entity.on("bump.bottom",this,"landed"),t.landed=0,t.direction="right"},landed:function(){var e=this.entity.p;e.landed=.2},step:function(t){var n=this.entity.p;if(void 0===n.ignoreControls||!n.ignoreControls){var i=null;if(void 0!==n.collisions&&n.collisions.length>0&&(e.inputs.left||e.inputs.right||n.landed>0)){if(1===n.collisions.length)i=n.collisions[0];else{i=null;for(var o=0;o<n.collisions.length;o++)n.collisions[o].normalY<0&&(i=n.collisions[o])}null!==i&&i.normalY>-.3&&i.normalY<.3&&(i=null)}e.inputs.left?(n.direction="left",i&&n.landed>0?(n.vx=n.speed*i.normalY,n.vy=-n.speed*i.normalX):n.vx=-n.speed):e.inputs.right?(n.direction="right",i&&n.landed>0?(n.vx=-n.speed*i.normalY,n.vy=n.speed*i.normalX):n.vx=n.speed):(n.vx=0,i&&n.landed>0&&(n.vy=0)),n.landed>0&&(e.inputs.up||e.inputs.action)&&!n.jumping?(n.vy=n.jumpSpeed,n.landed=-t,n.jumping=!0):(e.inputs.up||e.inputs.action)&&(this.entity.trigger("jump",this.entity),n.jumping=!0),!n.jumping||e.inputs.up||e.inputs.action||(n.jumping=!1,this.entity.trigger("jumped",this.entity),n.vy<n.jumpSpeed/3&&(n.vy=n.jumpSpeed/3))}n.landed-=t}}),e.component("stepControls",{added:function(){var e=this.entity.p;e.stepDistance||(e.stepDistance=32),e.stepDelay||(e.stepDelay=.2),e.stepWait=0,this.entity.on("step",this,"step"),this.entity.on("hit",this,"collision")},collision:function(){var e=this.entity.p;e.stepping&&(e.stepping=!1,e.x=e.origX,e.y=e.origY)},step:function(t){var n=this.entity.p;n.stepWait-=t,n.stepping&&(n.x+=n.diffX*t/n.stepDelay,n.y+=n.diffY*t/n.stepDelay),n.stepWait>0||(n.stepping&&(n.x=n.destX,n.y=n.destY),n.stepping=!1,n.diffX=0,n.diffY=0,e.inputs.left?n.diffX=-n.stepDistance:e.inputs.right&&(n.diffX=n.stepDistance),e.inputs.up?n.diffY=-n.stepDistance:e.inputs.down&&(n.diffY=n.stepDistance),(n.diffY||n.diffX)&&(n.stepping=!0,n.origX=n.x,n.origY=n.y,n.destX=n.x+n.diffX,n.destY=n.y+n.diffY,n.stepWait=n.stepDelay))}})}};"undefined"==typeof Quintus?module.exports=quintusInput:quintusInput(Quintus);var quintusAudio=function(e){"use strict";e.Audio=function(e){e.audio={channels:[],channelMax:e.options.channelMax||10,active:{},play:function(){}},e.hasWebAudio="undefined"!=typeof AudioContext||"undefined"!=typeof webkitAudioContext,e.hasWebAudio&&("undefined"!=typeof AudioContext?e.audioContext=new AudioContext:e.audioContext=new window.webkitAudioContext),e.enableSound=function(){"undefined"!=typeof window&&!!("ontouchstart"in window);return e.hasWebAudio?e.audio.enableWebAudioSound():e.audio.enableHTML5Sound(),e},e.audio.enableWebAudioSound=function(){e.audio.type="WebAudio",e.audio.soundID=0,e.audio.playingSounds={},e.audio.removeSound=function(t){delete e.audio.playingSounds[t]},e.audio.play=function(t,n){var i=(new Date).getTime();if(!(e.audio.active[t]&&e.audio.active[t]>i)){n&&n.debounce?e.audio.active[t]=i+n.debounce:delete e.audio.active[t];var o=e.audio.soundID++,r=e.audioContext.createBufferSource();r.buffer=e.asset(t),r.connect(e.audioContext.destination),n&&n.loop?r.loop=!0:setTimeout(function(){e.audio.removeSound(o)},1e3*r.buffer.duration),r.assetName=t,r.start?r.start(0):r.noteOn(0),e.audio.playingSounds[o]=r}},e.audio.stop=function(t){for(var n in e.audio.playingSounds){var i=e.audio.playingSounds[n];t&&t!==i.assetName||(i.stop?i.stop(0):i.noteOff(0))}}},e.audio.enableHTML5Sound=function(){e.audio.type="HTML5";for(var t=0;t<e.audio.channelMax;t++)e.audio.channels[t]={},e.audio.channels[t].channel=new Audio,e.audio.channels[t].finished=-1;e.audio.play=function(t,n){var i=(new Date).getTime();if(!(e.audio.active[t]&&e.audio.active[t]>i)){n&&n.debounce?e.audio.active[t]=i+n.debounce:delete e.audio.active[t];for(var o=0;o<e.audio.channels.length;o++)if(!e.audio.channels[o].loop&&e.audio.channels[o].finished<i){e.audio.channels[o].channel.src=e.asset(t).src,n&&n.loop?(e.audio.channels[o].loop=!0,e.audio.channels[o].channel.loop=!0):e.audio.channels[o].finished=i+1e3*e.asset(t).duration,e.audio.channels[o].channel.load(),e.audio.channels[o].channel.play();break}}},e.audio.stop=function(t){for(var n=t?e.asset(t).src:null,i=(new Date).getTime(),o=0;o<e.audio.channels.length;o++)n&&e.audio.channels[o].channel.src!==n||!(e.audio.channels[o].loop||e.audio.channels[o].finished>=i)||(e.audio.channels[o].channel.pause(),e.audio.channels[o].loop=!1)}}}};"undefined"==typeof Quintus?module.exports=quintusAudio:quintusAudio(Quintus);var quintusScenes=function(e){"use strict";e.Scenes=function(e){e.scenes={},e.stages=[],e.Class.extend("Scene",{init:function(e,t){this.opts=t||{},this.sceneFunc=e}}),e.scene=function(t,n,i){return void 0===n?e.scenes[t]:(e._isFunction(n)&&(n=new e.Scene(n,i),n.name=t),e.scenes[t]=n,n)},e._nullContainer={c:{x:0,y:0,angle:0,scale:1},matrix:e.matrix2d()},e.collision=function(){function t(e,t){var n=e[t],i=e[t+1]||e[0];r=-(i[1]-n[1]),s=i[0]-n[0];var o=Math.sqrt(r*r+s*s);o>0&&(r/=o,s/=o)}function n(e){return r*e[0]+s*e[1]}function i(e,i,o){var u,d,p,f,h,g,m,v,b,y,w,E,x,C,S=Number.POSITIVE_INFINITY,T=!1,k=o?c:l;for(a[0]=0,a[1]=0,e.c?x=e.c.points:(x=e.p.points,a[0]+=e.p.x,a[1]+=e.p.y),i.c?C=i.c.points:(C=i.p.points,a[0]+=-i.p.x,a[1]+=-i.p.y),e=e.p,i=i.p,b=0;b<x.length;b++){for(t(x,b),u=n(x[0]),d=u,y=1;y<x.length;y++)v=n(x[y]),u>v&&(u=v),v>d&&(d=v);for(p=n(C[0]),f=p,y=1;y<C.length;y++)v=n(C[y]),p>v&&(p=v),v>f&&(f=v);if(m=n(a),u+=m,d+=m,h=u-f,g=p-d,h>0||g>0)return null;w=-1*(f-u),o&&(w*=-1),E=Math.abs(w),S>E&&(k.distance=w,k.magnitude=E,k.normalX=r,k.normalY=s,k.distance>0&&(k.distance*=-1,k.normalX*=-1,k.normalY*=-1),T=!0,S=E)}return T?k:null}function o(t,n){var o,r,s;return t.p.points||e._generatePoints(t),n.p.points||e._generatePoints(n),(o=i(t,n))&&(r=i(n,t,!0))?(s=r.magnitude<o.magnitude?r:o,0===s.magnitude?!1:(s.separate[0]=s.distance*s.normalX,s.separate[1]=s.distance*s.normalY,s)):!1}var r,s,a=[0,0],l={separate:[]},c={separate:[]};return o}(),e.overlap=function(e,t){var n=e.c||e.p||e,i=t.c||t.p||t,o=n.x-(n.cx||0),r=n.y-(n.cy||0),s=i.x-(i.cx||0),a=i.y-(i.cy||0);return!(r+n.h<a||r>a+i.h||o+n.w<s||o>s+i.w)},e.Stage=e.GameObject.extend({defaults:{sort:!1,gridW:400,gridH:400,x:0,y:0},init:function(t,n){this.scene=t,this.items=[],this.lists={},this.index={},this.removeList=[],this.grid={},this._collisionLayers=[],this.time=0,this.defaults.w=e.width,this.defaults.h=e.height,this.options=e._extend({},this.defaults),this.scene&&e._extend(this.options,t.opts),n&&e._extend(this.options,n),this.options.sort&&!e._isFunction(this.options.sort)&&(this.options.sort=function(e,t){return(e.p&&e.p.z||-1)-(t.p&&t.p.z||-1)})},destroyed:function(){this.invoke("debind"),this.trigger("destroyed")},loadScene:function(){this.scene&&this.scene.sceneFunc(this)},loadAssets:function(t){for(var n=e._isArray(t)?t:e.asset(t),i=0;i<n.length;i++){var o=n[i][0],r=n[i][1];this.insert(new e[o](r))}},each:function(e){for(var t=0,n=this.items.length;n>t;t++)e.call(this.items[t],arguments[1],arguments[2])},invoke:function(e){for(var t=0,n=this.items.length;n>t;t++)this.items[t][e].call(this.items[t],arguments[1],arguments[2])},detect:function(e){for(var t=this.items.length-1;t>=0;t--)if(e.call(this.items[t],arguments[1],arguments[2],arguments[3]))return this.items[t];return!1},identify:function(e){for(var t,n=this.items.length-1;n>=0;n--)if(t=e.call(this.items[n],arguments[1],arguments[2],arguments[3]))return t;return!1},find:function(e){return this.index[e]},addToLists:function(e,t){for(var n=0;n<e.length;n++)this.addToList(e[n],t)},addToList:function(e,t){this.lists[e]||(this.lists[e]=[]),this.lists[e].push(t)},removeFromLists:function(e,t){for(var n=0;n<e.length;n++)this.removeFromList(e[n],t)},removeFromList:function(e,t){var n=this.lists[e].indexOf(t);-1!==n&&this.lists[e].splice(n,1)},insert:function(t,n){return this.items.push(t),t.stage=this,t.container=n,n&&n.children.push(t),t.grid={},e._generatePoints(t),e._generateCollisionPoints(t),t.className&&this.addToList(t.className,t),t.activeComponents&&this.addToLists(t.activeComponents,t),t.p&&(this.index[t.p.id]=t),this.trigger("inserted",t),t.trigger("inserted",this),this.regrid(t),t},remove:function(e){this.delGrid(e),this.removeList.push(e)},forceRemove:function(e){var t=this.items.indexOf(e);if(-1!==t){if(this.items.splice(t,1),e.className&&this.removeFromList(e.className,e),e.activeComponents&&this.removeFromLists(e.activeComponents,e),e.container){var n=e.container.children.indexOf(e);-1!==n&&e.container.children.splice(n,1)}e.destroy&&e.destroy(),e.p.id&&delete this.index[e.p.id],this.trigger("removed",e)}},pause:function(){this.paused=!0},unpause:function(){this.paused=!1},_gridCellCheck:function(t,n,i,o){if(e._isUndefined(o)||o&t){var r=this.index[n];if(r&&r!==i&&e.overlap(i,r)){var s=e.collision(i,r);return s?(s.obj=r,s):!1}}},gridTest:function(t,n){for(var i,o,r=t.grid,s=r.Y1;s<=r.Y2;s++)if(this.grid[s])for(var a=r.X1;a<=r.X2;a++)if(i=this.grid[s][a],i&&(o=e._detect(i,this._gridCellCheck,this,t,n)))return o;return!1},collisionLayer:function(e){return this._collisionLayers.push(e),e.collisionLayer=!0,this.insert(e)},_collideCollisionLayer:function(e,t){for(var n,i=0,o=this._collisionLayers.length;o>i;i++){var r=this._collisionLayers[i];if(r.p.type&t&&(n=r.collide(e)))return n.obj=r,n}return!1},search:function(t,n){var i;return t.grid||this.regrid(t,t.stage!==this),n=e._isUndefined(n)?t.p&&t.p.collisionMask:n,i=this._collideCollisionLayer(t,n),i=i||this.gridTest(t,n)},_locateObj:{p:{x:0,y:0,cx:0,cy:0,w:1,h:1},grid:{}},locate:function(e,t,n){var i=null;return this._locateObj.p.x=e,this._locateObj.p.y=t,this.regrid(this._locateObj,!0),i=this._collideCollisionLayer(this._locateObj,n),i=i||this.gridTest(this._locateObj,n),i&&i.obj?i.obj:!1},collide:function(t,n){var i,o,r,s,a,l;for(e._isObject(n)?(r=n.collisionMask,s=n.maxCol,l=n.skipEvents):r=n,r=e._isUndefined(r)?t.p&&t.p.collisionMask:r,s=s||3,e._generateCollisionPoints(t),this.regrid(t),a=s;a>0&&(i=this._collideCollisionLayer(t,r));)l||(t.trigger("hit",i),t.trigger("hit.collision",i)),e._generateCollisionPoints(t),this.regrid(t),a--;for(a=s;a>0&&(o=this.gridTest(t,r));){if(t.trigger("hit",o),t.trigger("hit.sprite",o),!l){var c=o.obj;o.obj=t,o.normalX*=-1,o.normalY*=-1,o.distance=0,o.magnitude=0,o.separate[0]=0,o.separate[1]=0,c.trigger("hit",o),c.trigger("hit.sprite",o)}e._generateCollisionPoints(t),this.regrid(t),a--}return o||i},delGrid:function(e){for(var t=e.grid,n=t.Y1;n<=t.Y2;n++)if(this.grid[n])for(var i=t.X1;i<=t.X2;i++)this.grid[n][i]&&delete this.grid[n][i][e.p.id]},addGrid:function(e){for(var t=e.grid,n=t.Y1;n<=t.Y2;n++){this.grid[n]||(this.grid[n]={});for(var i=t.X1;i<=t.X2;i++)this.grid[n][i]||(this.grid[n][i]={}),this.grid[n][i][e.p.id]=e.p.type}},regrid:function(e,t){if(!e.collisionLayer){e.grid=e.grid||{};var n=e.c||e.p,i=Math.floor((n.x-n.cx)/this.options.gridW),o=Math.floor((n.y-n.cy)/this.options.gridH),r=Math.floor((n.x-n.cx+n.w)/this.options.gridW),s=Math.floor((n.y-n.cy+n.h)/this.options.gridH),a=e.grid;a.X1===i&&a.X2===r&&a.Y1===o&&a.Y2===s||(void 0!==a.X1&&this.delGrid(e),a.X1=i,a.X2=r,a.Y1=o,a.Y2=s,t||this.addGrid(e))}},markSprites:function(t,n){for(var i,o,r=this.viewport,s=r?r.scale:1,a=r?r.x:0,l=r?r.y:0,c=e.width/s,u=e.height/s,d=Math.floor(a/this.options.gridW),p=Math.floor(l/this.options.gridH),f=Math.floor((a+c)/this.options.gridW),h=Math.floor((l+u)/this.options.gridH),g=p;h>=g;g++)if(i=this.grid[g])for(var m=d;f>=m;m++)if(o=i[m])for(var v in o)this.index[v]&&(this.index[v].mark=n,this.index[v].container&&(this.index[v].container.mark=n))},updateSprites:function(t,n,i){for(var o,r=0,s=t.length;s>r;r++)o=t[r],!i&&o.p.visibleOnly&&(!o.mark||o.mark<this.time)||!i&&o.container||(o.update(n),e._generateCollisionPoints(o),this.regrid(o))},step:function(e){if(this.paused)return!1;if(this.time+=e,this.markSprites(this.items,this.time),this.trigger("prestep",e),this.updateSprites(this.items,e),this.trigger("step",e),this.removeList.length>0){for(var t=0,n=this.removeList.length;n>t;t++)this.forceRemove(this.removeList[t]);this.removeList.length=0}this.trigger("poststep",e)},hide:function(){this.hidden=!0},show:function(){this.hidden=!1},stop:function(){this.hide(),this.pause()},start:function(){this.show(),this.unpause()},render:function(e){if(this.hidden)return!1;this.options.sort&&this.items.sort(this.options.sort),this.trigger("prerender",e),this.trigger("beforerender",e);for(var t=0,n=this.items.length;n>t;t++){var i=this.items[t];!i.container&&(i.p.renderAlways||i.mark>=this.time)&&i.render(e)}this.trigger("render",e),this.trigger("postrender",e)}}),e.activeStage=0,e.StageSelector=e.Class.extend({emptyList:[],init:function(e,t){this.stage=e,this.selector=t,this.items=this.stage.lists[this.selector]||this.emptyList,this.length=this.items.length},each:function(e){for(var t=0,n=this.items.length;n>t;t++)e.call(this.items[t],arguments[1],arguments[2]);return this},invoke:function(e){for(var t=0,n=this.items.length;n>t;t++)this.items[t][e].call(this.items[t],arguments[1],arguments[2]);return this},trigger:function(e,t){this.invoke("trigger",e,t)},destroy:function(){this.invoke("destroy")},detect:function(e){for(var t=0,n=this.items.length;n>t;t++)if(e.call(this.items[t],arguments[1],arguments[2]))return this.items[t];return!1},identify:function(e){for(var t=null,n=0,i=this.items.length;i>n;n++)if(t=e.call(this.items[n],arguments[1],arguments[2]))return t;return!1},_pObject:function(t){e._extend(this.p,t)},_pSingle:function(e,t){this.p[e]=t},set:function(e,t){return void 0===t?this.each(this._pObject,e):this.each(this._pSingle,e,t),this},at:function(e){return this.items[e]},first:function(){return this.items[0]},last:function(){return this.items[this.items.length-1]}}),e.select=function(t,n){return n=void 0===n?e.activeStage:n,n=e.stage(n),e._isNumber(t)?n.index[t]:new e.StageSelector(n,t)},e.stage=function(t){return t=void 0===t?e.activeStage:t,e.stages[t]},e.stageScene=function(t,n,i){e._isString(t)&&(t=e.scene(t)),e._isObject(n)&&(i=n,n=e._popProperty(i,"stage")||t&&t.opts.stage||0),i=e._clone(i);var o=e._popProperty(i,"stageClass")||t&&t.opts.stageClass||e.Stage;n=e._isUndefined(n)?t&&t.opts.stage||0:n,e.stages[n]&&e.stages[n].destroy(),e.activeStage=n;var r=e.stages[n]=new o(t,i);return r.options.asset&&r.loadAssets(r.options.asset),t&&r.loadScene(),e.activeStage=0,e.loop||e.gameLoop(e.stageGameLoop),r},e.stageStepLoop=function(t){var n,i,o;for(0>t&&(t=1/60),t>1/15&&(t=1/15),n=0,i=e.stages.length;i>n;n++)e.activeStage=n,o=e.stage(),o&&o.step(t);e.activeStage=0},e.stageRenderLoop=function(){e.ctx&&e.clear();for(var t=0,n=e.stages.length;n>t;t++){e.activeStage=t;var i=e.stage();i&&i.render(e.ctx)}e.input&&e.ctx&&e.input.drawCanvas(e.ctx),e.activeStage=0},e.stageGameLoop=function(t){e.stageStepLoop(t),e.stageRenderLoop()},e.clearStage=function(t){e.stages[t]&&(e.stages[t].destroy(),e.stages[t]=null)},e.clearStages=function(){for(var t=0,n=e.stages.length;n>t;t++)e.stages[t]&&e.stages[t].destroy();e.stages.length=0}}};"undefined"==typeof Quintus?module.exports=quintusScenes:quintusScenes(Quintus);
var quintusTouch=function(e){"use strict";e.Touch=function(t){if(t._isUndefined(e.Sprites))throw"Quintus.Touch requires Quintus.Sprites Module";var n=[0],i=0;t.Evented.extend("TouchSystem",{init:function(){var e=this;this.boundTouch=function(t){e.touch(t)},this.boundDrag=function(t){e.drag(t)},this.boundEnd=function(t){e.touchEnd(t)},t.el.addEventListener("touchstart",this.boundTouch),t.el.addEventListener("mousedown",this.boundTouch),t.el.addEventListener("touchmove",this.boundDrag),t.el.addEventListener("mousemove",this.boundDrag),t.el.addEventListener("touchend",this.boundEnd),t.el.addEventListener("mouseup",this.boundEnd),t.el.addEventListener("touchcancel",this.boundEnd),this.touchPos=new t.Evented,this.touchPos.grid={},this.touchPos.p={w:1,h:1,cx:0,cy:0},this.activeTouches={},this.touchedObjects={}},destroy:function(){t.el.removeEventListener("touchstart",this.boundTouch),t.el.removeEventListener("mousedown",this.boundTouch),t.el.removeEventListener("touchmove",this.boundDrag),t.el.removeEventListener("mousemove",this.boundDrag),t.el.removeEventListener("touchend",this.boundEnd),t.el.removeEventListener("mouseup",this.boundEnd),t.el.removeEventListener("touchcancel",this.boundEnd)},normalizeTouch:function(e,n){var i=t.el,o=i.getBoundingClientRect(),r=window.getComputedStyle(i),s=e.clientX-o.left-parseInt(r.paddingLeft,10),a=e.clientY-o.top-parseInt(r.paddingTop,10);if((t._isUndefined(s)||t._isUndefined(a))&&(s=e.offsetX,a=e.offsetY),(t._isUndefined(s)||t._isUndefined(a))&&(s=e.layerX,a=e.layerY),t._isUndefined(s)||t._isUndefined(a)){if(void 0===t.touch.offsetX){t.touch.offsetX=0,t.touch.offsetY=0,i=t.el;do t.touch.offsetX+=i.offsetLeft,t.touch.offsetY+=i.offsetTop;while(i=i.offsetParent)}s=e.pageX-t.touch.offsetX,a=e.pageY-t.touch.offsetY}return this.touchPos.p.ox=this.touchPos.p.px=s/t.cssWidth*t.width,this.touchPos.p.oy=this.touchPos.p.py=a/t.cssHeight*t.height,n.viewport&&(this.touchPos.p.px/=n.viewport.scale,this.touchPos.p.py/=n.viewport.scale,this.touchPos.p.px+=n.viewport.x,this.touchPos.p.py+=n.viewport.y),this.touchPos.p.x=this.touchPos.p.px,this.touchPos.p.y=this.touchPos.p.py,this.touchPos.obj=null,this.touchPos},touch:function(e){for(var o=e.changedTouches||[e],r=0;r<o.length;r++)for(var s=0;s<n.length;s++){var a=o[r],l=t.stage(n[s]);if(l){var c=a.identifier||0,u=this.normalizeTouch(a,l);l.regrid(u,!0);var d,p=l.search(u,i);if((p||s===n.length-1)&&(d=p&&p.obj,u.obj=d,this.trigger("touch",u)),d&&!this.touchedObjects[d]){this.activeTouches[c]={x:u.p.px,y:u.p.py,origX:d.p.x,origY:d.p.y,sx:u.p.ox,sy:u.p.oy,identifier:c,obj:d,stage:l},this.touchedObjects[d.p.id]=!0,d.trigger("touch",this.activeTouches[c]);break}}}},drag:function(e){for(var t=e.changedTouches||[e],n=0;n<t.length;n++){var i=t[n],o=i.identifier||0,r=this.activeTouches[o],s=r&&r.stage;if(r){var a=this.normalizeTouch(i,s);r.x=a.p.px,r.y=a.p.py,r.dx=a.p.ox-r.sx,r.dy=a.p.oy-r.sy,r.obj.trigger("drag",r)}}e.preventDefault()},touchEnd:function(e){for(var t=e.changedTouches||[e],n=0;n<t.length;n++){var i=t[n],o=i.identifier||0,r=this.activeTouches[o];r&&(r.obj.trigger("touchEnd",r),delete this.touchedObjects[r.obj.p.id],this.activeTouches[o]=null)}e.preventDefault()}}),t.touch=function(e,o){return t.untouch(),i=e||t.SPRITE_UI,n=o||[2,1,0],t._isArray(n)||(n=[n]),t._touch||(t.touchInput=new t.TouchSystem),t},t.untouch=function(){return t.touchInput&&(t.touchInput.destroy(),delete t.touchInput),t}}};"undefined"==typeof Quintus?module.exports=quintusTouch:quintusTouch(Quintus);var quintusUI=function(e){"use strict";e.UI=function(t){if(t._isUndefined(e.Touch))throw"Quintus.UI requires Quintus.Touch Module";t.UI={},t.UI.roundRect=function(e,t){e.beginPath(),e.moveTo(-t.cx+t.radius,-t.cy),e.lineTo(-t.cx+t.w-t.radius,-t.cy),e.quadraticCurveTo(-t.cx+t.w,-t.cy,-t.cx+t.w,-t.cy+t.radius),e.lineTo(-t.cx+t.w,-t.cy+t.h-t.radius),e.quadraticCurveTo(-t.cx+t.w,-t.cy+t.h,-t.cx+t.w-t.radius,-t.cy+t.h),e.lineTo(-t.cx+t.radius,-t.cy+t.h),e.quadraticCurveTo(-t.cx,-t.cy+t.h,-t.cx,-t.cy+t.h-t.radius),e.lineTo(-t.cx,-t.cy+t.radius),e.quadraticCurveTo(-t.cx,-t.cy,-t.cx+t.radius,-t.cy),e.closePath()},t.UI.Container=t.Sprite.extend("UI.Container",{init:function(e,n){var i,o=t._clone(e||{});e&&t._isString(e.w)&&(i=e.w.match(/^[0-9]+%$/))&&(o.w=parseInt(e.w,10)*t.width/100,o.x=t.width/2-o.w/2),e&&t._isString(e.h)&&(i=e.h.match(/^[0-9]+%$/))&&(o.h=parseInt(e.h,10)*t.height/100,o.y=t.height/2-o.h/2),this._super(t._defaults(o,n),{opacity:1,hidden:!1,fill:null,highlight:null,radius:5,stroke:"#000",border:!1,shadow:!1,shadowColor:!1,outlineWidth:!1,outlineColor:"#000",type:t.SPRITE_NONE})},insert:function(e){return this.stage.insert(e,this),e},fit:function(e,n){if(0!==this.children.length){void 0===e&&(e=0),void 0===n&&(n=e);for(var i=1/0,o=1/0,r=-(1/0),s=-(1/0),a=0;a<this.children.length;a++){var l=this.children[a],c=l.p.x-l.p.cx,u=l.p.y-l.p.cy,d=l.p.x-l.p.cx+l.p.w,p=l.p.y-l.p.cy+l.p.h;i>c&&(i=c),o>u&&(o=u),d>r&&(r=d),p>s&&(s=p)}this.p.cx=-i+n,this.p.cy=-o+e,this.p.w=r-i+2*n,this.p.h=s-o+2*e,t._generatePoints(this,!0),t._generateCollisionPoints(this,!0)}},addShadow:function(e){if(this.p.shadow){var n=t._isNumber(this.p.shadow)?this.p.shadow:5;e.shadowOffsetX=n,e.shadowOffsetY=n,e.shadowColor=this.p.shadowColor||"rgba(0,0,50,0.1)"}},clearShadow:function(e){e.shadowColor="transparent"},drawRadius:function(e){t.UI.roundRect(e,this.p),this.addShadow(e),e.fill(),this.p.border&&(this.clearShadow(e),e.lineWidth=this.p.border,e.stroke())},drawSquare:function(e){this.addShadow(e),this.p.fill&&e.fillRect(-this.p.cx,-this.p.cy,this.p.w,this.p.h),this.p.border&&(this.clearShadow(e),e.lineWidth=this.p.border,e.strokeRect(-this.p.cx,-this.p.cy,this.p.w,this.p.h))},draw:function(e){return this.p.hidden?!1:void((this.p.border||this.p.fill)&&(e.globalAlpha=this.p.opacity,1===this.p.frame&&this.p.highlight?e.fillStyle=this.p.highlight:e.fillStyle=this.p.fill,e.strokeStyle=this.p.stroke,this.p.radius>0?this.drawRadius(e):this.drawSquare(e)))}}),t.UI.Text=t.Sprite.extend("UI.Text",{init:function(e,n){this._super(t._defaults(e||{},n),{type:t.SPRITE_UI,size:24,lineHeight:1.2,align:"center"}),this.p.label&&this.calcSize()},calcSize:function(){var e=this.p;this.setFont(t.ctx),this.splitLabel=e.label.split("\n");e.w=0;for(var n=0;n<this.splitLabel.length;n++){var i=t.ctx.measureText(this.splitLabel[n]);i.width>e.w&&(e.w=i.width)}e.lineHeightPx=e.size*e.lineHeight,e.h=e.lineHeightPx*this.splitLabel.length,e.halfLeading=.5*e.size*Math.max(0,e.lineHeight-1),e.cy=0,"center"===e.align?(e.cx=e.w/2,e.points=[[-e.cx,0],[e.cx,0],[e.cx,e.h],[-e.cx,e.h]]):"right"===e.align?(e.cx=e.w,e.points=[[-e.w,0],[0,0],[0,e.h],[-e.w,e.h]]):(e.cx=0,e.points=[[0,0],[e.w,0],[e.w,e.h],[0,e.h]])},prerender:function(){this.p.oldLabel!==this.p.label&&(this.p.oldLabel=this.p.label,this.calcSize(),this.el.width=this.p.w,this.el.height=4*this.p.h,this.ctx.clearRect(0,0,this.p.w,this.p.h),this.ctx.fillStyle="#FF0",this.ctx.fillRect(0,0,this.p.w,this.p.h/2),this.setFont(this.ctx),this.ctx.fillText(this.p.label,0,0))},draw:function(e){var t=this.p;if(0!==t.opacity){t.oldLabel!==t.label&&this.calcSize(),this.setFont(e),void 0!==t.opacity&&(e.globalAlpha=t.opacity);for(var n=0;n<this.splitLabel.length;n++)t.outlineWidth&&e.strokeText(this.splitLabel[n],0,t.halfLeading+n*t.lineHeightPx),e.fillText(this.splitLabel[n],0,t.halfLeading+n*t.lineHeightPx)}},asset:function(){return this.el},setFont:function(e){e.textBaseline="top",e.font=this.font(),e.fillStyle=this.p.color||"black",e.textAlign=this.p.align||"left",e.strokeStyle=this.p.outlineColor||"black",e.lineWidth=this.p.outlineWidth||0},font:function(){return this.fontString?this.fontString:(this.fontString=(this.p.weight||"800")+" "+(this.p.size||24)+"px "+(this.p.family||"Arial"),this.fontString)}}),t.UI.Button=t.UI.Container.extend("UI.Button",{init:function(e,n,i){if(this._super(t._defaults(e||{},i),{type:t.SPRITE_UI|t.SPRITE_DEFAULT,keyActionName:null}),this.p.label&&(!this.p.w||!this.p.h)){t.ctx.save(),this.setFont(t.ctx);var o=t.ctx.measureText(this.p.label);t.ctx.restore(),this.p.h||(this.p.h=34),this.p.w||(this.p.w=o.width+20)}isNaN(this.p.cx)&&(this.p.cx=this.p.w/2),isNaN(this.p.cy)&&(this.p.cy=this.p.h/2),this.callback=n,this.on("touch",this,"highlight"),this.on("touchEnd",this,"push"),this.p.keyActionName&&t.input.on(this.p.keyActionName,this,"push")},highlight:function(){"undefined"!=typeof this.sheet()&&this.sheet().frames>1&&(this.p.frame=1)},push:function(){this.p.frame=0,this.callback&&this.callback(),this.trigger("click")},draw:function(e){this._super(e),(this.p.asset||this.p.sheet)&&t.Sprite.prototype.draw.call(this,e),this.p.label&&(e.save(),this.setFont(e),e.fillText(this.p.label,0,0),e.restore())},setFont:function(e){e.textBaseline="middle",e.font=this.p.font||"400 24px arial",e.fillStyle=this.p.fontColor||"black",e.textAlign="center"}}),t.UI.IFrame=t.Sprite.extend("UI.IFrame",{init:function(e){this._super(e,{opacity:1,type:t.SPRITE_UI|t.SPRITE_DEFAULT}),t.wrapper.style.overflow="hidden",this.iframe=document.createElement("IFRAME"),this.iframe.setAttribute("src",this.p.url),this.iframe.style.position="absolute",this.iframe.style.zIndex=500,this.iframe.setAttribute("width",this.p.w),this.iframe.setAttribute("height",this.p.h),this.iframe.setAttribute("frameborder",0),this.p.background&&(this.iframe.style.backgroundColor=this.p.background),t.wrapper.appendChild(this.iframe),this.on("inserted",function(e){this.positionIFrame(),e.on("destroyed",this,"remove")})},positionIFrame:function(){var e=this.p.x,t=this.p.y;this.stage.viewport&&(e-=this.stage.viewport.x,t-=this.stage.viewport.y),this.oldX===e&&this.oldY===t&&this.oldOpacity===this.p.opacity||(this.iframe.style.top=t-this.p.cy+"px",this.iframe.style.left=e-this.p.cx+"px",this.iframe.style.opacity=this.p.opacity,this.oldX=e,this.oldY=t,this.oldOpacity=this.p.opacity)},step:function(e){this._super(e),this.positionIFrame()},remove:function(){this.iframe&&(t.wrapper.removeChild(this.iframe),this.iframe=null)}}),t.UI.HTMLElement=t.Sprite.extend("UI.HTMLElement",{init:function(e){this._super(e,{opacity:1,type:t.SPRITE_UI}),t.wrapper.style.overflow="hidden",this.el=document.createElement("div"),this.el.innerHTML=this.p.html,t.wrapper.appendChild(this.el),this.on("inserted",function(e){this.position(),e.on("destroyed",this,"remove"),e.on("clear",this,"remove")})},position:function(){},step:function(e){this._super(e),this.position()},remove:function(){this.el&&(t.wrapper.removeChild(this.el),this.el=null)}}),t.UI.VerticalLayout=t.Sprite.extend("UI.VerticalLayout",{init:function(e){this.children=[],this._super(e,{type:0})},insert:function(e){return this.stage.insert(e,this),this.relayout(),e},relayout:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].p.h||0;this.p.h-e}})}};"undefined"==typeof Quintus?module.exports=quintusUI:quintusUI(Quintus);var quintusAnim=function(e){"use strict";e.Anim=function(e){e._animations={},e.animations=function(t,n){e._animations[t]||(e._animations[t]={}),e._extend(e._animations[t],n)},e.animation=function(t,n){return e._animations[t]&&e._animations[t][n]},e.component("animation",{added:function(){var e=this.entity.p;e.animation=null,e.animationPriority=-1,e.animationFrame=0,e.animationTime=0,this.entity.on("step",this,"step")},extend:{play:function(e,t,n){this.animation.play(e,t,n)}},step:function(t){var n=this.entity,i=n.p;if(i.animation){var o=e.animation(i.sprite,i.animation),r=o.rate||i.rate,s=0;if(i.animationTime+=t,i.animationChanged?i.animationChanged=!1:(i.animationTime+=t,i.animationTime>r&&(s=Math.floor(i.animationTime/r),i.animationTime-=s*r,i.animationFrame+=s)),s>0){if(i.animationFrame>=o.frames.length){if(o.loop===!1||o.next)return i.animationFrame=o.frames.length-1,n.trigger("animEnd"),n.trigger("animEnd."+i.animation),i.animation=null,i.animationPriority=-1,o.trigger&&n.trigger(o.trigger,o.triggerData),void(o.next&&this.play(o.next,o.nextPriority));n.trigger("animLoop"),n.trigger("animLoop."+i.animation),i.animationFrame=i.animationFrame%o.frames.length}n.trigger("animFrame")}i.sheet=o.sheet||i.sheet,i.frame=o.frames[i.animationFrame],o.hasOwnProperty("flip")&&(i.flip=o.flip)}},play:function(e,t,n){var i=this.entity,o=i.p;t=t||0,e!==o.animation&&t>=o.animationPriority&&(void 0===n&&(n=!0),o.animation=e,n&&(o.animationChanged=!0,o.animationTime=0,o.animationFrame=0),o.animationPriority=t,i.trigger("anim"),i.trigger("anim."+o.animation))}}),e.Sprite.extend("Repeater",{init:function(t){this._super(e._defaults(t,{speedX:1,speedY:1,repeatY:!0,repeatX:!0,renderAlways:!0,type:0})),this.p.repeatW=this.p.repeatW||this.p.w,this.p.repeatH=this.p.repeatH||this.p.h},draw:function(t){var n,i,o,r,s,a=this.p,l=this.asset(),c=this.sheet(),u=this.stage.viewport?this.stage.viewport.scale:1,d=Math.floor(this.stage.viewport?this.stage.viewport.x:0),p=Math.floor(this.stage.viewport?this.stage.viewport.y:0),f=Math.floor(a.x+d*this.p.speedX),h=Math.floor(a.y+p*this.p.speedY);for(a.repeatX?(n=-f%a.repeatW,n>0&&(n-=a.repeatW)):n=a.x-d,a.repeatY?(i=-h%a.repeatH,i>0&&(i-=a.repeatH)):i=a.y-p,o=n,r=e.width/u+a.repeatW,s=e.height/u+a.repeatH;s>i;){for(n=o;r>n&&(c?c.draw(t,n+d,i+p,a.frame):t.drawImage(l,n+d,i+p),n+=a.repeatW,a.repeatX););if(i+=a.repeatH,!a.repeatY)break}}}),e.Tween=e.Class.extend({init:function(t,n,i,o,r){e._isObject(o)&&(r=o,o=e.Easing.Linear),e._isObject(i)&&(r=i,i=1),this.entity=t,this.duration=i||1,this.time=0,this.options=r||{},this.delay=this.options.delay||0,this.easing=o||this.options.easing||e.Easing.Linear,this.startFrame=e._loopFrame+1,this.properties=n,this.start={},this.diff={}},step:function(t){var n;if(this.startFrame>e._loopFrame)return!0;if(this.delay>=t)return this.delay-=t,!0;if(this.delay>0&&(t-=this.delay,this.delay=0),0===this.time){var i=this.entity,o=this.properties;this.p=i instanceof e.Stage?i.viewport:i.p;for(n in o)this.start[n]=this.p[n],e._isUndefined(this.start[n])||(this.diff[n]=o[n]-this.start[n])}this.time+=t;var r=Math.min(1,this.time/this.duration),s=this.easing(r);for(n in this.start)e._isUndefined(this.p[n])||(this.p[n]=this.start[n]+this.diff[n]*s);return r>=1&&this.options.callback&&this.options.callback.apply(this.entity),1>r}}),e.Easing={Linear:function(e){return e},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}},e.component("tween",{added:function(){this._tweens=[],this.entity.on("step",this,"step")},extend:{animate:function(t,n,i,o){return this.tween._tweens.push(new e.Tween(this,t,n,i,o)),this},chain:function(t,n,i,o){e._isObject(i)&&(o=i,i=e.Easing.Linear);var r=this.tween._tweens.length;if(r>0){var s=this.tween._tweens[r-1];o=o||{},o.delay=s.duration-s.time+s.delay}return this.animate(t,n,i,o),this},stop:function(){return this.tween._tweens.length=0,this}},step:function(e){for(var t=0;t<this._tweens.length;t++)this._tweens[t].step(e)||(this._tweens.splice(t,1),t--)}})}};/*!
 * Bootstrap v3.3.5 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof Quintus?module.exports=quintusAnim:quintusAnim(Quintus),function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,i){var o=e.Event(n);return t.trigger(o,i),o.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&e.data("remote")!==!1},handleRemote:function(i){var o,r,s,a,l,c;if(n.fire(i,"ajax:before")){if(a=i.data("with-credentials")||null,l=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){o=i.data("ujs:submit-button-formmethod")||i.attr("method"),r=i.data("ujs:submit-button-formaction")||i.attr("action"),s=e(i[0]).serializeArray();var u=i.data("ujs:submit-button");u&&(s.push(u),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(o=i.data("method")||"get",r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),s=i.data("params")||null);return c={type:o||"GET",data:s,dataType:l,beforeSend:function(e,o){return o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[e,o])?void i.trigger("ajax:send",e):!1},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(r)},a&&(c.xhrFields={withCredentials:a}),r&&(c.url=r),n.ajax(c)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(i){var o=n.href(i),r=i.data("method"),s=i.attr("target"),a=n.csrfToken(),l=n.csrfParam(),c=e('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l===t||a===t||n.isCrossDomain(o)||(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",i=e.data("disable-with"),i!==t&&(e.data("ujs:enable-with",e[n]()),e[n](i)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var n=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[n](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,i=e.data("confirm"),o=!1;if(!i)return!0;if(n.fire(e,"confirm")){try{o=n.confirm(i)}catch(r){(console.error||console.log).call(console,r.stack||r)}t=n.fire(e,"confirm:complete",[o])}return o&&t},blankInputs:function(t,n,i){var o,r,s,a,l=e(),c=n||"input,textarea",u=t.find(c),d={};return u.each(function(){o=e(this),o.is("input[type=radio]")?(a=o.attr("name"),d[a]||(0===t.find('input[type=radio]:checked[name="'+a+'"]').length&&(s=t.find('input[type=radio][name="'+a+'"]'),l=l.add(s)),d[a]=a)):(r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val(),r===i&&(l=l.add(o)))}),l.length?l:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");i!==t&&(e.data("ujs:enable-with",e.html()),e.html(i)),e.bind("click.railsDisable",function(e){return n.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)})}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(t){var i=e(this),o=i.data("method"),r=i.data("params"),s=t.metaKey||t.ctrlKey;if(!n.allowAction(i))return n.stopEverything(t);if(!s&&i.is(n.linkDisableSelector)&&n.disableElement(i),n.isRemote(i)){if(s&&(!o||"GET"===o)&&!r)return!0;var a=n.handleRemote(i);return a===!1?n.enableElement(i):a.fail(function(){n.enableElement(i)}),!1}return o?(n.handleMethod(i),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i)||!n.isRemote(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var o=n.handleRemote(i);return o===!1?n.enableFormElement(i):o.fail(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)&&n.isRemote(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var o,r,s=e(this),a=n.isRemote(s);if(!n.allowAction(s))return n.stopEverything(i);if(s.attr("novalidate")===t)if(s.data("ujs:formnovalidate-button")===t){if(o=n.blankInputs(s,n.requiredInputSelector,!1),o&&n.fire(s,"ajax:aborted:required",[o]))return n.stopEverything(i)}else s.data("ujs:formnovalidate-button",t);if(a){if(r=n.nonBlankInputs(s,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(s)},13);var l=n.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){n.enableFormElements(s)},13),l}return n.handleRemote(s),!1}setTimeout(function(){n.disableFormElements(s)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null,s=i.closest("form");0===s.length&&(s=e("#"+i.attr("form"))),s.data("ujs:submit-button",r),s.data("ujs:formnovalidate-button",i.attr("formnovalidate")),s.data("ujs:submit-button-formaction",i.attr("formaction")),s.data("ujs:submit-button-formmethod",i.attr("formmethod"))}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this===t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.3.5
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.3.5
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof t&&o[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){s.detach().trigger("closed.bs.alert").remove()}var o=e(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=e(r);t&&t.preventDefault(),s.length||(s=o.closest(".alert")),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.3.5
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.button"),r="object"==typeof t&&t;o||i.data("bs.button",o=new n(this,r)),"toggle"==t?o.toggle():t&&o.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",r=i.data();t+="Text",null==r.resetText&&i.data("resetText",i[o]()),setTimeout(e.proxy(function(){i[o](null==r[t]?this.options[t]:r[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.3.5
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.carousel"),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),s="string"==typeof t?t:r.slide;o||i.data("bs.carousel",o=new n(this,r)),"number"==typeof t?o.to(t):s?o[s]():r.interval&&o.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var o="prev"==e?-1:1,r=(n+o)%this.$items.length;return this.$items.eq(r)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var o=this.$element.find(".item.active"),r=i||this.getItemForDirection(t,o),s=this.interval,a="next"==t?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:a});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(r)]);d&&d.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:c,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,o.addClass(a),r.addClass(a),o.one("bsTransitionEnd",function(){r.removeClass([t,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var o=function(n){var i,o=e(this),r=e(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=e.extend({},r.data(),o.data()),a=o.attr("data-slide-to");a&&(s.interval=!1),t.call(r,s),a&&r.data("bs.carousel").to(a),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.3.5
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),r=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!o&&r.toggle&&/show|hide/.test(t)&&(r.toggle=!1),o||n.data("bs.collapse",o=new i(this,r)),"string"==typeof t&&o[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.5",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var r=e.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),t||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var o=e(i);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=e(this);o.attr("data-target")||i.preventDefault();var r=t(o),s=r.data("bs.collapse"),a=s?"toggle":o.data();n.call(r,a)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.3.5
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function n(n){n&&3===n.which||(e(o).remove(),e(r).each(function(){var i=e(this),o=t(i),r={relatedTarget:this};o.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(o[0],n.target)||(o.trigger(n=e.Event("hide.bs.dropdown",r)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",r))))}))}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof t&&i[t].call(n)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.5",s.prototype.toggle=function(i){var o=e(this);if(!o.is(".disabled, :disabled")){var r=t(o),s=r.hasClass("open");if(n(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var a={relatedTarget:this};if(r.trigger(i=e.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=e(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=t(i),s=o.hasClass("open");if(!s&&27!=n.which||s&&27==n.which)return 27==n.which&&o.find(r).trigger("focus"),i.trigger("click");var a=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+a);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.3.5
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t,i){return this.each(function(){var o=e(this),r=o.data("bs.modal"),s=e.extend({},n.DEFAULTS,o.data(),"object"==typeof t&&t);r||o.data("bs.modal",r=new n(this,s)),"string"==typeof t?r[t](i):s.show&&r.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),o=i.attr("href"),r=e(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(r,s,this)})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.3.5
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tooltip"),r="object"==typeof t&&t;!o&&/destroy|hide/.test(t)||(o||i.data("bs.tooltip",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var s=o[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var o=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var u=this.getPosition(),d=r[0].offsetWidth,p=r[0].offsetHeight;if(c){var f=a,h=this.getPosition(this.$viewport);a="bottom"==a&&u.bottom+p>h.bottom?"top":"top"==a&&u.top-p<h.top?"bottom":"right"==a&&u.right+d>h.width?"left":"left"==a&&u.left-d<h.left?"right":a,r.removeClass(f).addClass(a)}var g=this.getCalculatedOffset(a,u,d,p);this.applyPlacement(g,a);var m=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(t.top=t.top+r-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),p=d?2*u.left-o+l:2*u.top-r+c,f=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][f],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=o.hoverState&&r.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,r=e(this.$tip),s=e.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=i?{top:0,left:0}:t.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,s,a,r)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-r-s.scroll,l=t.top+r-s.scroll+i;a<s.top?o.top=s.top-a:l>s.top+s.height&&(o.top=s.top+s.height-l)}else{var c=t.left-r,u=t.left+r+n;c<s.left?o.left=s.left-c:u>s.right&&(o.left=s.left+s.width-u)}return o},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.3.5
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.popover"),r="object"==typeof t&&t;!o&&/destroy|hide/.test(t)||(o||i.data("bs.popover",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.5
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new t(this,r)),"string"==typeof n&&o[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),o=t.data("target")||t.attr("href"),r=/^#./.test(o)&&e(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return s!=(e=r[r.length-1])&&this.activate(e);if(s&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)s!=r[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.3.5
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof t&&o[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=n.find(".active:last a"),r=e.Event("hide.bs.tab",{relatedTarget:t[0]}),s=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),t.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var a=e(i);this.activate(t.closest("li"),n),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(t,i,o){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var s=i.find("> .active"),a=o&&e.support.transition&&(s.length&&s.hasClass("fade")||!!i.find("> .fade").length);s.length&&a?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),s.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var o=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),/* ========================================================================
 * Bootstrap: affix.js v3.3.5
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.affix"),r="object"==typeof t&&t;o||i.data("bs.affix",o=new n(this,r)),"string"==typeof t&&o[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var o=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o?"top":!1;if("bottom"==this.affixed)return null!=n?o+this.unpin<=r.top?!1:"bottom":e-i>=o+s?!1:"bottom";var a=null==this.affixed,l=a?o:r.top,c=a?s:t;return null!=n&&n>=o?"top":null!=i&&l+c>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,o=i.top,r=i.bottom,s=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(r=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var a=this.getState(s,t,o,r);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:s-t-r})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";var t=function(n,i){this.id=++e.FE.ID,this.opts=e.extend(!0,{},e.extend({},t.DEFAULTS,"object"==typeof i&&i));var o=JSON.stringify(this.opts);e.FE.OPTS_MAPPING[o]=e.FE.OPTS_MAPPING[o]||this.id,this.sid=e.FE.OPTS_MAPPING[o],e.FE.SHARED[this.sid]=e.FE.SHARED[this.sid]||{},this.shared=e.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=e(n),this.$oel.data("froala.editor",this),this.o_doc=n.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var r=e(this.o_win).scrollTop();this.$oel.on("froala.doInit",e.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=e(this.doc),this.$win=e(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(e.FE.PLUGINS)),this.opts.initOnClick?(this.load(e.FE.MODULES),this.$el.on("mousedown.init touchstart.init dragenter.init focus.init",e.proxy(function(t){if(1===t.which||0===t.which){this.$el.off("mousedown.init dragenter.init focus.init touchstart.init"),this.load(e.FE.MODULES),this.load(e.FE.PLUGINS);var n=t.originalEvent&&t.originalEvent.originalTarget;n&&"IMG"==n.tagName&&e(n).trigger("mousedown"),"undefined"==typeof this.ul&&this.destroy(),this.events.trigger("initialized")}},this))):(this.load(e.FE.MODULES),this.load(e.FE.PLUGINS),e(this.o_win).scrollTop(r),"undefined"==typeof this.ul&&this.destroy(),this.events.trigger("initialized"))},this)),this._init()};t.DEFAULTS={initOnClick:!1,pluginsEnabled:null},t.MODULES={},t.PLUGINS={},t.VERSION="2.2.4",t.INSTANCES=[],t.OPTS_MAPPING={},t.SHARED={},t.ID=0,t.prototype._init=function(){var t=this.$oel.prop("tagName"),n=e.proxy(function(){this._original_html=this._original_html||this.$oel.html(),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=e('<iframe src="about:blank" frameBorder="0">'),this.$wp=e("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document,this.$oel.trigger("froala.doInit")):(this.$el=e("<div></div>"),this.$wp=e("<div></div>").append(this.$el),this.$box.html(this.$wp),this.$oel.trigger("froala.doInit"))},this),i=e.proxy(function(){this.$box=e("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,e.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,e.proxy(function(){this.events.trigger("form.reset")},this)),n()},this),o=e.proxy(function(){this.$el=this.$oel,this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),r=e.proxy(function(){this.$el=this.$oel,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),s=e.proxy(function(){this.$el=this.$oel,this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?s():"TEXTAREA"==t?i():"A"==t?o():"IMG"==t?r():"BUTTON"==t||"INPUT"==t?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,s()):n()},t.prototype.load=function(t){for(var n in t)if(t.hasOwnProperty(n)){if(this[n])continue;if(e.FE.PLUGINS[n]&&this.opts.pluginsEnabled.indexOf(n)<0)continue;if(this[n]=new t[n](this),this[n]._init&&(this[n]._init(),this.opts.initOnClick&&"core"==n))return!1}},t.prototype.destroy=function(){if(this.edit.isDisabled())return!1;if(this.shared.count--,this.events.$off(),this.events.trigger("destroy"),this.events.trigger("shared.destroy"),0===this.shared.count)for(var t in this.shared)this.shared.hasOwnProperty(t)&&delete this.shared[t];this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),e.FE.INSTANCES.splice(e.FE.INSTANCES.indexOf(this),1)},e.fn.froalaEditor=function(n){for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);if("string"==typeof n){var r=[];return this.each(function(){var t=e(this),o=t.data("froala.editor");if(o){var s,a;if(n.indexOf(".")>0&&o[n.split(".")[0]]?(o[n.split(".")[0]]&&(s=o[n.split(".")[0]]),a=n.split(".")[1]):(s=o,a=n.split(".")[0]),!s[a])return e.error("Method "+n+" does not exist in Froala Editor.");var l=s[a].apply(o,i.slice(1));void 0===l?r.push(this):0===r.length&&r.push(l)}}),1==r.length?r[0]:r}return"object"!=typeof n&&n?void 0:this.each(function(){var i=e(this).data("froala.editor");if(!i){var o=this;new t(o,n)}})},e.fn.froalaEditor.Constructor=t,e.FroalaEditor=t,e.FE=t,e.FE.MODULES.node=function(t){function n(t){return t&&"IFRAME"!=t.tagName?e(t).contents():[]}function i(t){return t?t.nodeType!=Node.ELEMENT_NODE?!1:e.FE.BLOCK_TAGS.indexOf(t.tagName.toLowerCase())>=0:!1}function o(o,r){if(e(o).find("table").length>0)return!1;if(o.querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length-o.querySelectorAll("br").length)return!1;if(o.querySelectorAll(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)").length)return!1;if(o.querySelectorAll(e.FE.BLOCK_TAGS.join(",")).length>1)return!1;if(o.querySelectorAll(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)").length)return!1;var s=n(o);1==s.length&&i(s[0])&&(s=n(s[0]));for(var a=!1,l=0;l<s.length;l++){var c=s[l];if(!(r&&e(c).hasClass("fr-marker")||c.nodeType==Node.TEXT_NODE&&0==c.textContent.length)){if("BR"!=c.tagName&&(c.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length>0)return!1;if(a)return!1;"BR"==c.tagName&&(a=!0)}}return!0}function r(n){for(;n&&n.parentNode!==t.$el.get(0)&&(!n.parentNode||!e(n.parentNode).hasClass("fr-inner"));)if(n=n.parentNode,i(n))return n;return null}function s(n,o,r){if("undefined"==typeof o&&(o=[]),"undefined"==typeof r&&(r=!0),o.push(t.$el.get(0)),o.indexOf(n.parentNode)>=0||n.parentNode&&e(n.parentNode).hasClass("fr-inner")||n.parentNode&&e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)>=0&&r)return null;for(;o.indexOf(n.parentNode)<0&&n.parentNode&&!e(n.parentNode).hasClass("fr-inner")&&(e.FE.SIMPLE_ENTER_TAGS.indexOf(n.parentNode.tagName)<0||!r)&&(!i(n)||!i(n.parentNode)||!r);)n=n.parentNode;return n}function a(e){var t={},n=e.attributes;if(n)for(var i=0;i<n.length;i++){var o=n[i];t[o.nodeName]=o.value}return t}function l(e){for(var t="",n=a(e),i=Object.keys(n).sort(),o=0;o<i.length;o++){var r=i[o],s=n[r];t+=s.indexOf('"')<0?" "+r+'="'+s+'"':" "+r+"='"+s+"'"}return t}function c(e){for(var t=e.attributes,n=0;n<t.length;n++){var i=t[n];e.removeAttribute(i.nodeName)}}function u(e){return"<"+e.tagName.toLowerCase()+l(e)+">"}function d(e){return"</"+e.tagName.toLowerCase()+">"}function p(t,n){"undefined"==typeof n&&(n=!0);for(var i=t.previousSibling;i&&n&&e(i).hasClass("fr-marker");)i=i.previousSibling;return i?i.nodeType==Node.TEXT_NODE&&""===i.textContent?p(i):!1:!0}function f(t){return t&&t.nodeType==Node.ELEMENT_NODE&&e.FE.VOID_ELEMENTS.indexOf((t.tagName||"").toLowerCase())>=0}function h(e){return e?["UL","OL"].indexOf(e.tagName)>=0:!1}function g(e){return e===t.$el.get(0)}function m(e){return e===t.doc.activeElement&&(!t.doc.hasFocus||t.doc.hasFocus())&&!!(g(e)||e.type||e.href||~e.tabIndex)}function v(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}return{isBlock:i,isEmpty:o,blockParent:r,deepestParent:s,rawAttributes:a,attributes:l,clearAttributes:c,openTagString:u,closeTagString:d,isFirstSibling:p,isList:h,isElement:g,contents:n,isVoid:f,hasFocus:m,isEditable:v}},e.extend(e.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowComments:!0,fullPage:!1}),e.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},e.FE.MODULES.clean=function(t){function n(e){if(e.className&&e.className.indexOf("fr-marker")>=0)return!1;var i,o=t.node.contents(e),r=[];for(i=0;i<o.length;i++)o[i].nodeType!=Node.ELEMENT_NODE||t.node.isVoid(o[i])?o[i].nodeType==Node.TEXT_NODE&&(o[i].textContent=o[i].textContent.replace(/\u200b/g,"")):o[i].textContent.replace(/\u200b/g,"").length!=o[i].textContent.length&&n(o[i]);if(e.nodeType==Node.ELEMENT_NODE&&!t.node.isVoid(e)&&(e.normalize(),o=t.node.contents(e),r=e.querySelectorAll(".fr-marker"),o.length-r.length==0)){for(i=0;i<r.length;i++)e.parentNode.insertBefore(r[i].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function i(e){if(e.nodeType==Node.COMMENT_NODE)return"<!--"+e.nodeValue+"-->";if(e.nodeType==Node.TEXT_NODE)return e.textContent.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\u00A0/g,"&nbsp;");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT"].indexOf(e.tagName)>=0)return e.outerHTML;if("IFRAME"==e.tagName)return e.outerHTML;var n=e.childNodes;if(0===n.length)return e.outerHTML;for(var o="",r=0;r<n.length;r++)o+=i(n[r]);return t.node.openTagString(e)+o+t.node.closeTagString(e)}function o(e){return F=[],e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return F.push(e),"[FROALA.EDITOR.SCRIPT "+(F.length-1)+"]"}),e=e.replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function r(e){return e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,n){return t.opts.htmlRemoveTags.indexOf("script")>=0?"":F[parseInt(n,10)]}),e=e.replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function s(e){var t;for(t in e)e.hasOwnProperty(t)&&(t.match(O)||delete e[t]);for(var n="",i=Object.keys(e).sort(),o=0;o<i.length;o++)t=i[o],n+=e[t].indexOf('"')<0?" "+t+'="'+e[t]+'"':" "+t+"='"+e[t]+"'";return n}function a(e,n,i){if(t.opts.fullPage){var o=t.html.extractDoctype(i),r=s(t.html.extractNodeAttrs(i,"html"));n=null==n?t.html.extractNode(i,"head")||"<title></title>":n;var a=s(t.html.extractNodeAttrs(i,"head")),l=s(t.html.extractNodeAttrs(i,"body"));return o+"<html"+r+"><head"+a+">"+n+"</head><body"+l+">"+e+"</body></html>"}return e}function l(n,o){var r=e("<div>"+n+"</div>"),s="";if(r){for(var a=t.node.contents(r.get(0)),l=0;l<a.length;l++)o(a[l]);a=t.node.contents(r.get(0));for(var l=0;l<a.length;l++)s+=i(a[l])}return s}function c(e,n,i){e=o(e);var s=e,c=null;if(t.opts.fullPage){var s=t.html.extractNode(e,"body")||(e.indexOf("<body")>=0?"":e);i&&(c=t.html.extractNode(e,"head")||"")}s=l(s,n),c&&(c=l(c,n)),s=s.replace(/>[\r|\n]*<\//g,"></"),s=s.replace(/<br>[\r|\n]*/g,"<br>"),s=s.replace(/<br> */g,"<br>"),s=s.replace(/ *(\r|\n) */g," ");var u=a(s,c,e);return r(u)}function u(e){return e.replace(/\u200b/g,"").length==e.length?e:t.clean.exec(e,n)}function d(){var n=t.$el.get(0).querySelectorAll(Object.keys(e.FE.HTML5Map).join(","));if(n.length){t.selection.save();for(var i=0;i<n.length;i++)""===t.node.attributes(n[i])&&e(n[i]).replaceWith("<"+e.FE.HTML5Map[n[i].tagName]+">"+n[i].innerHTML+"</"+e.FE.HTML5Map[n[i].tagName]+">");t.selection.restore()}}function p(n){if("PRE"==n.tagName&&h(n),n.nodeType==Node.ELEMENT_NODE&&(n.getAttribute("data-fr-src")&&n.setAttribute("data-fr-src",t.helpers.sanitizeURL(n.getAttribute("data-fr-src"))),n.getAttribute("href")&&n.setAttribute("href",t.helpers.sanitizeURL(n.getAttribute("href"))),["TABLE","TBODY","TFOOT","TR"].indexOf(n.tagName)>=0&&(n.innerHTML=n.innerHTML.trim())),!t.opts.pasteAllowLocalImages&&n.nodeType==Node.ELEMENT_NODE&&"IMG"==n.tagName&&n.getAttribute("data-fr-src")&&0==n.getAttribute("data-fr-src").indexOf("file://"))return n.parentNode.removeChild(n),!1;if(n.nodeType==Node.ELEMENT_NODE&&e.FE.HTML5Map[n.tagName]&&""===t.node.attributes(n)){var i=e.FE.HTML5Map[n.tagName],o="<"+i+">"+n.innerHTML+"</"+i+">";n.insertAdjacentHTML("beforebegin",o),n=n.previousSibling,n.parentNode.removeChild(n.nextSibling)}if(t.opts.htmlAllowComments||n.nodeType!=Node.COMMENT_NODE)if(n.tagName&&n.tagName.match(D))n.parentNode.removeChild(n);else if(n.tagName&&!n.tagName.match(N))n.outerHTML=n.innerHTML;else{var r=n.attributes;if(r)for(var s=r.length-1;s>=0;s--){var a=r[s];a.nodeName.match(O)||n.removeAttribute(a.nodeName)}}else 0!==n.data.indexOf("[FROALA.EDITOR")&&n.parentNode.removeChild(n)}function f(e){for(var n=t.node.contents(e),i=0;i<n.length;i++)n[i].nodeType!=Node.TEXT_NODE&&f(n[i]);p(e)}function h(e){var t=e.innerHTML;t.indexOf("\n")>=0&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function g(n,i,o,r){"undefined"==typeof i&&(i=[]),"undefined"==typeof o&&(o=[]),"undefined"==typeof r&&(r=!1),n=n.replace(/\u0009/g,"");var s,a=e.merge([],t.opts.htmlAllowedTags);for(s=0;s<i.length;s++)a.indexOf(i[s])>=0&&a.splice(a.indexOf(i[s]),1);var l=e.merge([],t.opts.htmlAllowedAttrs);for(s=0;s<o.length;s++)l.indexOf(o[s])>=0&&l.splice(l.indexOf(o[s]),1);return l.push("data-fr-.*"),l.push("fr-.*"),N=new RegExp("^"+a.join("$|^")+"$","gi"),O=new RegExp("^"+l.join("$|^")+"$","gi"),D=new RegExp("^"+t.opts.htmlRemoveTags.join("$|^")+"$","gi"),n=c(n,f,!0)}function m(){for(var n=t.$el.get(0).querySelectorAll("blockquote + blockquote"),i=0;i<n.length;i++){var o=n[i];t.node.attributes(o)==t.node.attributes(o.previousSibling)&&(e(o).prev().append(e(o).html()),e(o).remove())}}function v(){for(var e=t.$el.get(0).querySelectorAll("tr"),n=0;n<e.length;n++){for(var i=e[n].children,o=!0,r=0;r<i.length;r++)if("TH"!=i[r].tagName){o=!1;break}if(0!=o&&0!=i.length){for(var s=e[n];s&&"TABLE"!=s.tagName&&"THEAD"!=s.tagName;)s=s.parentNode;var a=s;"THEAD"!=a.tagName&&(a=t.doc.createElement("THEAD"),s.insertBefore(a,s.firstChild)),a.appendChild(e[n])}}}function b(){for(var n=t.$el.get(0).querySelectorAll("table"),i=0;i<n.length;i++){for(var o=n[i].previousSibling;o&&o.nodeType==Node.TEXT_NODE&&0==o.textContent.length;)o=o.previousSibling;!o||t.node.isBlock(o)||"BR"==o.tagName||o.nodeType!=Node.TEXT_NODE&&o.nodeType!=Node.ELEMENT_NODE||e(o).is(t.opts.htmlDoNotWrapTags.join(","))||n[i].parentNode.insertBefore(t.doc.createElement("br"),n[i])}}function y(){var n=t.html.defaultTag();if(n)for(var i=t.$el.get(0).querySelectorAll("td > "+n+", th > "+n),o=0;o<i.length;o++)""===t.node.attributes(i[o])&&e(i[o]).replaceWith(i[o].innerHTML+"<br>")}function w(){v(),b(),y()}function E(){var e=[],n=function(e){return!t.node.isList(e.parentNode)};do{if(e.length){var i=e[0],o=t.doc.createElement("ul");i.parentNode.insertBefore(o,i);do{var r=i;i=i.nextSibling,o.appendChild(r)}while(i&&"LI"==i.tagName)}e=[];for(var s=t.$el.get(0).querySelectorAll("li"),a=0;a<s.length;a++)n(s[a])&&e.push(s[a])}while(e.length>0)}function x(){for(var e=t.$el.get(0).querySelectorAll("ol + ol, ul + ul"),n=0;n<e.length;n++){var i=e[n];if(t.node.attributes(i)==t.node.attributes(i.previousSibling)){for(var o=t.node.contents(i),r=0;r<o.length;r++)i.previousSibling.appendChild(o[r]);i.parentNode.removeChild(i)}}}function C(){var e,n=function(t){0===t.querySelectorAll("LI").length&&(e=!0,t.parentNode.removeChild(t))};do{e=!1;for(var i=t.$el.get(0).querySelectorAll("li:empty"),o=0;o<i.length;o++)i[o].parentNode.removeChild(i[o]);for(var r=t.$el.get(0).querySelectorAll("ul, ol"),o=0;o<r.length;o++)n(r[o])}while(e===!0)}function S(){for(var n=t.$el.get(0).querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),i=0;i<n.length;i++){var o=n[i],r=o.previousSibling;r&&("LI"==r.tagName?r.appendChild(o):e(o).wrap("<li></li>"))}}function T(){for(var n=t.$el.get(0).querySelectorAll("li > ul, li > ol"),i=0;i<n.length;i++){var o=n[i];if(o.nextSibling){var r=o.nextSibling,s=e("<li>");e(o.parentNode).after(s);do{var a=r;r=r.nextSibling,s.append(a)}while(r)}}}function k(){for(var n=t.$el.get(0).querySelectorAll("li > ul, li > ol"),i=0;i<n.length;i++){var o=n[i];if(t.node.isFirstSibling(o))e(o).before("<br/>");else if(o.previousSibling&&"BR"==o.previousSibling.tagName){for(var r=o.previousSibling.previousSibling;r&&e(r).hasClass("fr-marker");)r=r.previousSibling;r&&"BR"!=r.tagName&&e(o.previousSibling).remove()}}}function $(){for(var n=t.$el.get(0).querySelectorAll("li:empty"),i=0;i<n.length;i++)e(n[i]).remove()}function _(){E(),x(),C(),S(),T(),k(),$()}function A(){t.opts.fullPage&&e.merge(t.opts.htmlAllowedTags,["head","title","style","link","base","body","html"])}var N,D,O,F=[],F=[];return{_init:A,html:g,toHTML5:d,tables:w,lists:_,quotes:m,invisibleSpaces:u,exec:c}},e.FE.XS=0,e.FE.SM=1,e.FE.MD=2,e.FE.LG=3,e.FE.MODULES.helpers=function(t){function n(){var e,t,n=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})"),null!==t.exec(e)&&(n=parseFloat(RegExp.$1))),n}function i(){var e={},t=n();if(t>0)e.msie=!0;else{var i=navigator.userAgent.toLowerCase(),o=/(edge)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],r={browser:o[1]||"",version:o[2]||"0"};o[1]&&(e[r.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function o(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!a()}function r(){return/(Android)/g.test(navigator.userAgent)&&!a()}function s(){return/(Blackberry)/g.test(navigator.userAgent)}function a(){return/(Windows Phone)/gi.test(navigator.userAgent)}function l(){return r()||o()||s()}function c(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function u(e){return parseInt(e,10)||0}function d(){var t=e('<div class="fr-visibility-helper"></div>').appendTo("body"),n=u(t.css("margin-left"));return t.remove(),n}function p(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function f(e){if(!/^(https?:|ftps?:|)\/\//.test(e))return!1;e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20");var t=/(http|ftp|https):\/\/[\w-]+(\.[\w-]*)*([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;return t.test(e)}function h(e){if(/^(https?:|ftps?:|)\/\//.test(e)){if(!f(e)&&!f("http:"+e))return""}else e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/g,"mailto:").replace(/file%3A/g,"file:").replace(/sms%3A/g,"sms:").replace(/tel%3A/g,"tel:").replace(/notes%3A/g,"notes:").replace(/data%3Aimage/g,"data:image").replace(/webkit-fake-url%3A/g,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@");return e}function g(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function m(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),("#"+t(e[1])+t(e[2])+t(e[3])).toUpperCase()):""}catch(n){return null}}function v(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?"rgb("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+")":""}function b(t){var n=(t.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(n)<0){if(!w){var i=e('<div dir="auto" style="text-align: initial; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');e("body").append(i);var o=i.find("#s1").get(0).getBoundingClientRect().left,r=i.find("#s2").get(0).getBoundingClientRect().left;i.remove(),w=r>o?"left":"right"}n=w}return n}function y(){t.browser=i()}var w;return{_init:y,isIOS:o,isAndroid:r,isBlackberry:s,isWindowsPhone:a,isMobile:l,requestAnimationFrame:c,getPX:u,screenSize:d,isTouch:p,sanitizeURL:h,isArray:g,RGBToHex:m,HEXtoRGB:v,isURL:f,getAlignment:b}},e.FE.MODULES.events=function(t){function n(e,t,n){b(e,t,n)}function i(){n(t.$el,"cut copy paste beforepaste",function(e){E(e.type,[e])})}function o(){n(t.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){E(e.type,[e])}),v("mousedown",function(){for(var n=0;n<e.FE.INSTANCES.length;n++)e.FE.INSTANCES[n]!=t&&e.FE.INSTANCES[n].popups&&e.FE.INSTANCES[n].popups.areVisible()&&e.FE.INSTANCES[n].$el.find(".fr-marker").remove()})}function r(){n(t.$el,"keydown keypress keyup input",function(e){E(e.type,[e])})}function s(){n(t.$win,t._mousedown,function(e){E("window.mousedown",[e]),f()}),n(t.$win,t._mouseup,function(e){E("window.mouseup",[e])}),n(t.$win,"keydown keyup touchmove touchend",function(e){E("window."+e.type,[e])})}function a(){n(t.$doc,"dragend drop",function(e){E("document."+e.type,[e])})}function l(n){if("undefined"==typeof n&&(n=!0),!t.$wp)return!1;if(!t.core.hasFocus()&&n)return t.$el.focus(),!1;if(!t.core.hasFocus()||t.$el.find(".fr-marker").length>0)return!1;var i=t.selection.info(t.$el.get(0));if(i.atStart&&t.selection.isCollapsed()&&null!=t.html.defaultTag()){var o=t.markers.insert();if(o&&!t.node.blockParent(o)){e(o).remove();var r=t.$el.find(t.html.blockTagsQuery()).get(0);r&&(e(r).prepend(e.FE.MARKERS),t.selection.restore())}else o&&e(o).remove()}}function c(){n(t.$el,"focus",function(e){g()&&(l(!1),_===!1&&E(e.type,[e]))}),n(t.$el,"blur",function(e){g()&&_===!0&&E(e.type,[e])}),v("focus",function(){_=!0}),v("blur",function(){_=!1})}function u(){t.helpers.isMobile()?(t._mousedown="touchstart",t._mouseup="touchend",t._move="touchmove",t._mousemove="touchmove"):(t._mousedown="mousedown",t._mouseup="mouseup",t._move="",t._mousemove="mousemove")}function d(n){var i=e(n.currentTarget);return t.edit.isDisabled()||i.hasClass("fr-disabled")?(n.preventDefault(),!1):"mousedown"===n.type&&1!==n.which?!0:(t.helpers.isMobile()||n.preventDefault(),(t.helpers.isAndroid()||t.helpers.isWindowsPhone())&&0===i.parents(".fr-dropdown-menu").length&&(n.preventDefault(),n.stopPropagation()),i.addClass("fr-selected"),void t.events.trigger("commands.mousedown",[i]))}function p(n,i){var o=e(n.currentTarget);if(t.edit.isDisabled()||o.hasClass("fr-disabled"))return n.preventDefault(),!1;if("mouseup"===n.type&&1!==n.which)return!0;if(!o.hasClass("fr-selected"))return!0;if("touchmove"!=n.type){if(n.stopPropagation(),n.stopImmediatePropagation(),n.preventDefault(),!o.hasClass("fr-selected"))return e(".fr-selected").removeClass("fr-selected"),!1;if(e(".fr-selected").removeClass("fr-selected"),o.data("dragging")||o.attr("disabled"))return o.removeData("dragging"),!1;var r=o.data("timeout");r&&(clearTimeout(r),o.removeData("timeout")),i.apply(t,[n])}else o.data("timeout")||o.data("timeout",setTimeout(function(){o.data("dragging",!0)},100))}function f(){k=!0}function h(){k=!1}function g(){return k}function m(e,n,i){b(e,t._mousedown,n,function(e){d(e)},!0),b(e,t._mouseup+" "+t._move,n,function(e){p(e,i)},!0),b(e,"mousedown click mouseup",n,function(e){e.stopPropagation()},!0),v("window.mouseup",function(){e.find(n).removeClass("fr-selected"),f()})}function v(e,n,i){var o=e.split(" ");if(o.length>1){for(var r=0;r<o.length;r++)v(o[r],n,i);return!0}"undefined"==typeof i&&(i=!1);var s;s=0!=e.indexOf("shared.")?$[e]=$[e]||[]:t.shared._events[e]=t.shared._events[e]||[],i?s.unshift(n):s.push(n)}function b(e,n,i,o,r){"function"==typeof i&&(r=o,o=i,i=!1);var s=r?t.shared.$_events:A,a=r?t.sid:t.id;i?e.on(n.split(" ").join(".ed"+a+" ")+".ed"+a,i,o):e.on(n.split(" ").join(".ed"+a+" ")+".ed"+a,o),s.indexOf(e.get(0))<0&&s.push(e.get(0))}function y(t,n){for(var i=0;i<t.length;i++)e(t[i]).off(".ed"+n)}function w(){y(A,t.id),0==t.shared.count&&y(t.shared.$_events,t.sid)}function E(n,i,o){if(!t.edit.isDisabled()||o){var r;if(0!=n.indexOf("shared."))r=$[n];else{if(t.shared.count>0)return!1;r=t.shared._events[n]}var s;if(r)for(var a=0;a<r.length;a++)if(s=r[a].apply(t,i),s===!1)return!1;return s=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],i||[])),s===!1?!1:s}}function x(n,i,o){if(!t.edit.isDisabled()||o){var r;if(0!=n.indexOf("shared."))r=$[n];else{if(t.shared.count>0)return!1;r=t.shared._events[n]}var s;if(r)for(var a=0;a<r.length;a++)s=r[a].apply(t,[i]),"undefined"!=typeof s&&(i=s);return s=t.$oel.triggerHandler("froalaEditor."+n,e.merge([t],[i])),"undefined"!=typeof s&&(i=s),i}}function C(){for(var e in $)$.hasOwnProperty(e)&&delete $[e]}function S(){for(var e in t.shared._events)t.shared._events.hasOwnProperty(e)&&delete t.shared._events[e]}function T(){t.shared.$_events=t.shared.$_events||[],t.shared._events={},u(),o(),s(),a(),r(),c(),f(),i(),v("destroy",C),v("shared.destroy",S)}var k,$={},_=!1,A=[];return{_init:T,on:v,trigger:E,bindClick:m,disableBlur:h,enableBlur:f,blurActive:g,focus:l,chainTrigger:x,$on:b,$off:w}},e.FE.INVISIBLE_SPACE="&#8203;",e.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",e.FE.MARKERS=e.FE.START_MARKER+e.FE.END_MARKER,e.FE.MODULES.markers=function(t){function n(n,i){return e('<span class="fr-marker" data-id="'+i+'" data-type="'+n+'" style="display: '+(t.browser.safari?"none":"inline-block")+'; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0]}function i(i,o,r){try{var s=i.cloneRange();if(s.collapse(o),s.insertNode(n(o,r)),o===!0&&i.collapsed)for(var a=t.$el.find('span.fr-marker[data-type="true"][data-id="'+r+'"]'),l=a.get(0).nextSibling;l&&l.nodeType===Node.TEXT_NODE&&0===l.textContent.length;)e(l).remove(),l=a.nextSibling;if(o===!0&&!i.collapsed){var a=t.$el.find('span.fr-marker[data-type="true"][data-id="'+r+'"]').get(0),l=a.nextSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do l=c[0],c=t.node.contents(l);while(c[0]&&t.node.isBlock(c[0]));e(l).prepend(e(a))}}if(o===!1&&!i.collapsed){var a=t.$el.find('span.fr-marker[data-type="false"][data-id="'+r+'"]').get(0),l=a.previousSibling;if(l&&l.nodeType===Node.ELEMENT_NODE&&t.node.isBlock(l)){var c=[l];do l=c[c.length-1],c=t.node.contents(l);while(c[c.length-1]&&t.node.isBlock(c[c.length-1]));e(l).append(e(a))}a.parentNode&&["TD","TH"].indexOf(a.parentNode.tagName)>=0&&a.parentNode.previousSibling&&!a.previousSibling&&e(a.parentNode.previousSibling).append(a)}var u=t.$el.find('span.fr-marker[data-type="'+o+'"][data-id="'+r+'"]').get(0);return u&&(u.style.display="none"),u}catch(d){return null}}function o(){if(!t.$wp)return null;try{var n=t.selection.ranges(0),i=n.commonAncestorContainer;if(i!=t.$el.get(0)&&0==t.$el.find(i).length)return null;var o=n.cloneRange(),r=n.cloneRange();o.collapse(!0);var s=e('<span class="fr-marker" style="display: none; line-height: 0;">'+e.FE.INVISIBLE_SPACE+"</span>",t.doc)[0];if(o.insertNode(s),s=t.$el.find("span.fr-marker").get(0)){for(var a=s.nextSibling;a&&a.nodeType===Node.TEXT_NODE&&0===a.textContent.length;)e(a).remove(),a=t.$el.find("span.fr-marker").get(0).nextSibling;return t.selection.clear(),t.selection.get().addRange(r),s}return null}catch(l){}}function r(){t.selection.isCollapsed()||t.selection.remove();var n=t.$el.find(".fr-marker").get(0);if(null==n&&(n=o()),null==n)return null;var i;if(i=t.node.deepestParent(n))if(t.node.isBlock(i)&&t.node.isEmpty(i))e(i).replaceWith('<span class="fr-marker"></span>');else{var r=n,s="",a="";do r=r.parentNode,s+=t.node.closeTagString(r),a=t.node.openTagString(r)+a;while(r!=i);e(n).replaceWith('<span id="fr-break"></span>');var l=t.node.openTagString(i)+e(i).html()+t.node.closeTagString(i);l=l.replace(/<span id="fr-break"><\/span>/g,s+'<span class="fr-marker"></span>'+a),e(i).replaceWith(l)}return t.$el.find(".fr-marker").get(0)}function s(e){var n=e.clientX,i=e.clientY;a();var r,s=null;if("undefined"!=typeof t.doc.caretPositionFromPoint?(r=t.doc.caretPositionFromPoint(n,i),s=t.doc.createRange(),s.setStart(r.offsetNode,r.offset),s.setEnd(r.offsetNode,r.offset)):"undefined"!=typeof t.doc.caretRangeFromPoint&&(r=t.doc.caretRangeFromPoint(n,i),s=t.doc.createRange(),s.setStart(r.startContainer,r.startOffset),s.setEnd(r.startContainer,r.startOffset)),null!==s&&"undefined"!=typeof t.win.getSelection){var l=t.win.getSelection();l.removeAllRanges(),l.addRange(s)}else if("undefined"!=typeof t.doc.body.createTextRange)try{s=t.doc.body.createTextRange(),s.moveToPoint(n,i);var c=s.duplicate();c.moveToPoint(n,i),s.setEndPoint("EndToEnd",c),s.select()}catch(u){return!1}o()}function a(){t.$el.find(".fr-marker").remove()}return{place:i,insert:o,split:r,insertAtPoint:s,remove:a}},e.FE.MODULES.selection=function(t){function n(){var e="";return t.win.getSelection?e=t.win.getSelection():t.doc.getSelection?e=t.doc.getSelection():t.doc.selection&&(e=t.doc.selection.createRange().text),e.toString()}function i(){var e="";return e=t.win.getSelection?t.win.getSelection():t.doc.getSelection?t.doc.getSelection():t.doc.selection.createRange()}function o(e){var n=i(),o=[];if(n&&n.getRangeAt&&n.rangeCount)for(var o=[],r=0;r<n.rangeCount;r++)o.push(n.getRangeAt(r));else o=t.doc.createRange?[t.doc.createRange()]:[];return"undefined"!=typeof e?o[e]:o}function r(){var e=i();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(t){}}function s(){var r=i();try{if(r.rangeCount){var s=o(0),a=s.startContainer;if(a.nodeType==Node.ELEMENT_NODE){var l=!1;if(a.childNodes.length>0&&a.childNodes[s.startOffset]){for(var c=a.childNodes[s.startOffset];c&&c.nodeType==Node.TEXT_NODE&&0==c.textContent.length;)c=c.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(a=c,l=!0)}else if(!s.collapsed&&a.nextSibling&&a.nextSibling.nodeType==Node.ELEMENT_NODE){var c=a.nextSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(a=c,l=!0)}!l&&a.childNodes.length>0&&e(a.childNodes[0]).text().replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(a.childNodes[0].tagName)<0&&(a=a.childNodes[0])}for(;a.nodeType!=Node.ELEMENT_NODE&&a.parentNode;)a=a.parentNode;for(var u=a;u&&"HTML"!=u.tagName;){if(u==t.$el.get(0))return a;u=e(u).parent()[0]}}}catch(d){}return t.$el.get(0)}function a(){
var r=i();try{if(r.rangeCount){var s=o(0),a=s.endContainer;if(a.nodeType==Node.ELEMENT_NODE){var l=!1;if(a.childNodes.length>0&&a.childNodes[s.endOffset]&&e(a.childNodes[s.endOffset]).text()===n())a=a.childNodes[s.endOffset],l=!0;else if(!s.collapsed&&a.previousSibling&&a.previousSibling.nodeType==Node.ELEMENT_NODE){var c=a.previousSibling;c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(a=c,l=!0)}else if(!s.collapsed&&a.childNodes.length>0&&a.childNodes[s.endOffset]){var c=a.childNodes[s.endOffset].previousSibling;c.nodeType==Node.ELEMENT_NODE&&c&&c.textContent.replace(/\u200B/g,"")===n().replace(/\u200B/g,"")&&(a=c,l=!0)}!l&&a.childNodes.length>0&&e(a.childNodes[a.childNodes.length-1]).text()===n()&&["BR","IMG","HR"].indexOf(a.childNodes[a.childNodes.length-1].tagName)<0&&(a=a.childNodes[a.childNodes.length-1])}for(a.nodeType==Node.TEXT_NODE&&0==s.endOffset&&a.previousSibling&&a.previousSibling.nodeType==Node.ELEMENT_NODE&&(a=a.previousSibling);a.nodeType!=Node.ELEMENT_NODE&&a.parentNode;)a=a.parentNode;for(var u=a;u&&"HTML"!=u.tagName;){if(u==t.$el.get(0))return a;u=e(u).parent()[0]}}}catch(d){}return t.$el.get(0)}function l(e,t){var n=e;return n.nodeType==Node.ELEMENT_NODE&&n.childNodes.length>0&&n.childNodes[t]&&(n=n.childNodes[t]),n.nodeType==Node.TEXT_NODE&&(n=n.parentNode),n}function c(){var n=[],r=i();if(y()&&r.rangeCount)for(var s=o(),a=0;a<s.length;a++){var c=s[a],u=l(c.startContainer,c.startOffset),d=l(c.endContainer,c.endOffset);t.node.isBlock(u)&&n.indexOf(u)<0&&n.push(u);var p=t.node.blockParent(u);p&&n.indexOf(p)<0&&n.push(p);for(var f=[],h=u;h!==d&&h!==t.$el.get(0);)f.indexOf(h)<0&&h.children&&h.children.length?(f.push(h),h=h.children[0]):h.nextSibling?h=h.nextSibling:h.parentNode&&(h=h.parentNode,f.push(h)),t.node.isBlock(h)&&f.indexOf(h)<0&&n.indexOf(h)<0&&(h!==d||c.endOffset>0)&&n.push(h);t.node.isBlock(d)&&n.indexOf(d)<0&&c.endOffset>0&&n.push(d);var p=t.node.blockParent(d);p&&n.indexOf(p)<0&&n.push(p)}for(var a=n.length-1;a>0;a--)e(n[a]).find(n).length&&"LI"!=n[a].tagName&&n.splice(a,1);return n}function u(){if(t.$wp){t.markers.remove();for(var e=o(),n=[],i=0;i<e.length;i++)if(e[i].startContainer!==t.doc){var r=e[i],s=r.collapsed,a=t.markers.place(r,!0,i),l=t.markers.place(r,!1,i);if(t.browser.safari&&!s){var r=t.doc.createRange();r.setStartAfter(a),r.setEndBefore(l),n.push(r)}}if(t.browser.safari&&n.length){t.selection.clear();for(var i=0;i<n.length;i++)t.selection.get().addRange(n[i])}}}function d(){var n=t.$el.get(0).querySelectorAll('.fr-marker[data-type="true"]');if(!t.$wp)return t.markers.remove(),!1;if(0===n.length)return!1;if(t.browser.msie||t.browser.edge)for(var o=0;o<n.length;o++)n[o].style.display="inline-block";t.core.hasFocus()||t.browser.msie||t.browser.webkit||t.$el.focus(),r();for(var s=i(),o=0;o<n.length;o++){var a=e(n[o]).data("id"),l=n[o],c=t.doc.createRange(),u=t.$el.find('.fr-marker[data-type="false"][data-id="'+a+'"]');(t.browser.msie||t.browser.edge)&&u.css("display","inline-block");var d=null;if(u.length>0){u=u[0];try{for(var f=!1,h=l.nextSibling;h&&h.nodeType==Node.TEXT_NODE&&0==h.textContent.length;){var g=h;h=h.nextSibling,e(g).remove()}for(var m=u.nextSibling;m&&m.nodeType==Node.TEXT_NODE&&0==m.textContent.length;){var g=m;m=m.nextSibling,e(g).remove()}if(l.nextSibling==u||u.nextSibling==l){for(var v=l.nextSibling==u?l:u,b=v==l?u:l,y=v.previousSibling;y&&y.nodeType==Node.TEXT_NODE&&0==y.length;){var g=y;y=y.previousSibling,e(g).remove()}if(y&&y.nodeType==Node.TEXT_NODE)for(;y&&y.previousSibling&&y.previousSibling.nodeType==Node.TEXT_NODE;)y.previousSibling.textContent=y.previousSibling.textContent+y.textContent,y=y.previousSibling,e(y.nextSibling).remove();for(var w=b.nextSibling;w&&w.nodeType==Node.TEXT_NODE&&0==w.length;){var g=w;w=w.nextSibling,e(g).remove()}if(w&&w.nodeType==Node.TEXT_NODE)for(;w&&w.nextSibling&&w.nextSibling.nodeType==Node.TEXT_NODE;)w.nextSibling.textContent=w.textContent+w.nextSibling.textContent,w=w.nextSibling,e(w.previousSibling).remove();if(y&&(t.node.isVoid(y)||t.node.isBlock(y))&&(y=null),w&&(t.node.isVoid(w)||t.node.isBlock(w))&&(w=null),y&&w&&y.nodeType==Node.TEXT_NODE&&w.nodeType==Node.TEXT_NODE){e(l).remove(),e(u).remove();var E=y.textContent.length;y.textContent=y.textContent+w.textContent,e(w).remove(),t.html.normalizeSpaces(y),c.setStart(y,E),c.setEnd(y,E),f=!0}else!y&&w&&w.nodeType==Node.TEXT_NODE?(e(l).remove(),e(u).remove(),t.html.normalizeSpaces(w),d=e(t.doc.createTextNode("\u200b")),e(w).before(d),c.setStart(w,0),c.setEnd(w,0),f=!0):!w&&y&&y.nodeType==Node.TEXT_NODE&&(e(l).remove(),e(u).remove(),t.html.normalizeSpaces(y),d=e(t.doc.createTextNode("\u200b")),e(y).after(d),c.setStart(y,y.textContent.length),c.setEnd(y,y.textContent.length),f=!0)}if(!f){var x,C;if(t.browser.chrome&&l.nextSibling==u)x=p(u,c,!0)||c.setStartAfter(u),C=p(l,c,!1)||c.setEndBefore(l);else{l.previousSibling==u&&(l=u,u=l.nextSibling),u.nextSibling&&"BR"===u.nextSibling.tagName||!u.nextSibling&&t.node.isBlock(l.previousSibling)||l.previousSibling&&"BR"==l.previousSibling.tagName||(l.style.display="inline",u.style.display="inline",d=e(t.doc.createTextNode("\u200b")));var S=l.previousSibling;S&&S.style&&"block"==t.win.getComputedStyle(S).display?(c.setEndAfter(S),c.setStartAfter(S)):(x=p(l,c,!0)||e(l).before(d)&&c.setStartBefore(l),C=p(u,c,!1)||e(u).after(d)&&c.setEndAfter(u))}"function"==typeof x&&x(),"function"==typeof C&&C()}}catch(T){}}d&&d.remove();try{s.addRange(c)}catch(T){}}t.markers.remove()}function p(n,i,o){var r=n.previousSibling,s=n.nextSibling;if(r&&s&&r.nodeType==Node.TEXT_NODE&&s.nodeType==Node.TEXT_NODE){var a=r.textContent.length;return o?(s.textContent=r.textContent+s.textContent,e(r).remove(),e(n).remove(),t.html.normalizeSpaces(s),function(){i.setStart(s,a)}):(r.textContent=r.textContent+s.textContent,e(s).remove(),e(n).remove(),t.html.normalizeSpaces(r),function(){i.setEnd(r,a)})}if(r&&!s&&r.nodeType==Node.TEXT_NODE){var a=r.textContent.length;return o?(t.html.normalizeSpaces(r),function(){i.setStart(r,a)}):(t.html.normalizeSpaces(r),function(){i.setEnd(r,a)})}return s&&!r&&s.nodeType==Node.TEXT_NODE?o?(t.html.normalizeSpaces(s),function(){i.setStart(s,0)}):(t.html.normalizeSpaces(s),function(){i.setEnd(s,0)}):!1}function f(){return!0}function h(){for(var e=o(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function g(e){var n,i,o=!1,r=!1;if(t.win.getSelection){var s=t.win.getSelection();s.rangeCount&&(n=s.getRangeAt(0),i=n.cloneRange(),i.selectNodeContents(e),i.setEnd(n.startContainer,n.startOffset),o=""===i.toString(),i.selectNodeContents(e),i.setStart(n.endContainer,n.endOffset),r=""===i.toString())}else t.doc.selection&&"Control"!=t.doc.selection.type&&(n=t.doc.selection.createRange(),i=n.duplicate(),i.moveToElementText(e),i.setEndPoint("EndToStart",n),o=""===i.text,i.moveToElementText(e),i.setEndPoint("StartToEnd",n),r=""===i.text);return{atStart:o,atEnd:r}}function m(){if(h())return!1;t.$el.find("td").prepend('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>"),t.$el.find("img").append('<span class="fr-mk">'+e.FE.INVISIBLE_SPACE+"</span>");var n=!1,i=g(t.$el.get(0));return i.atStart&&i.atEnd&&(n=!0),t.$el.find(".fr-mk").remove(),n}function v(n,i){"undefined"==typeof i&&(i=!0);var o=e(n).html();o&&o.replace(/\u200b/g,"").length!=o.length&&e(n).html(o.replace(/\u200b/g,""));for(var r=t.node.contents(n),s=0;s<r.length;s++)r[s].nodeType!=Node.ELEMENT_NODE?e(r[s]).remove():(v(r[s],0==s),0==s&&(i=!1));n.nodeType==Node.TEXT_NODE?e(n).replaceWith('<span data-first="true" data-text="true"></span>'):i&&e(n).attr("data-first",!0)}function b(n,i){var o=t.node.contents(n.get(0));["TD","TH"].indexOf(n.get(0).tagName)>=0&&1==n.find(".fr-marker").length&&e(o[0]).hasClass("fr-marker")&&n.attr("data-del-cell",!0);for(var r=0;r<o.length;r++){var s=o[r];e(s).hasClass("fr-marker")?i=(i+1)%2:i?e(s).find(".fr-marker").length>0?i=b(e(s),i):["TD","TH"].indexOf(s.tagName)<0&&!e(s).hasClass("fr-inner")?!t.opts.keepFormatOnDelete||i>1||t.$el.find("[data-first]").length>0?e(s).remove():v(s):e(s).hasClass("fr-inner")?0==e(s).find(".fr-inner").length?e(s).html("<br>"):e(s).find(".fr-inner").filter(function(){return 0==e(this).find("fr-inner").length}).html("<br>"):(e(s).empty(),e(s).attr("data-del-cell",!0)):e(s).find(".fr-marker").length>0&&(i=b(e(s),i))}return i}function y(){try{if(!t.$wp)return!1;for(var e=o(0),n=e.commonAncestorContainer;n&&!t.node.isElement(n);)n=n.parentNode;return!!t.node.isElement(n)}catch(i){return!1}}function w(){if(h())return!0;u();for(var n=function(t){for(var n=t.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var i=n,n=n.previousSibling;e(i).remove()}return n},i=function(t){for(var n=t.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0==n.textContent.length;){var i=n,n=n.nextSibling;e(i).remove()}return n},o=t.$el.find('.fr-marker[data-type="true"]'),r=0;r<o.length;r++)for(var s=o[r];!n(s)&&!t.node.isBlock(s.parentNode)&&!t.$el.is(s.parentNode);)e(s.parentNode).before(s);for(var a=t.$el.find('.fr-marker[data-type="false"]'),r=0;r<a.length;r++){for(var l=a[r];!i(l)&&!t.node.isBlock(l.parentNode)&&!t.$el.is(l.parentNode);)e(l.parentNode).after(l);l.parentNode&&t.node.isBlock(l.parentNode)&&t.node.isEmpty(l.parentNode)&&!t.$el.is(l.parentNode)&&e(l.parentNode).after(l)}if(f()){b(t.$el,0);var c=t.$el.find('[data-first="true"]');if(c.length)t.$el.find(".fr-marker").remove(),c.append(e.FE.INVISIBLE_SPACE+e.FE.MARKERS).removeAttr("data-first"),c.attr("data-text")&&c.replaceWith(c.html());else{t.$el.find("table").filter(function(){var t=e(this).find("[data-del-cell]").length>0&&e(this).find("[data-del-cell]").length==e(this).find("td, th").length;return t}).remove(),t.$el.find("[data-del-cell]").removeAttr("data-del-cell");for(var o=t.$el.find('.fr-marker[data-type="true"]'),r=0;r<o.length;r++){var p=o[r],g=p.nextSibling,m=t.$el.find('.fr-marker[data-type="false"][data-id="'+e(p).data("id")+'"]').get(0);if(m){if(g&&g==m);else if(p){var v=t.node.blockParent(p),y=t.node.blockParent(m);if(e(p).after(m),v==y);else if(null==v){var w=t.node.deepestParent(p);w?(e(w).after(e(y).html()),e(y).remove()):0==e(y).parentsUntil(t.$el,"table").length&&(e(p).next().after(e(y).html()),e(y).remove())}else if(null==y&&0==e(v).parentsUntil(t.$el,"table").length){for(var g=v;!g.nextSibling&&g.parentNode!=t.$el.get(0);)g=g.parentNode;for(g=g.nextSibling;g&&"BR"!=g.tagName;){var E=g.nextSibling;e(v).append(g),g=E}}else 0==e(v).parentsUntil(t.$el,"table").length&&0==e(y).parentsUntil(t.$el,"table").length&&(e(v).append(e(y).html()),e(y).remove())}}else m=e(p).clone().attr("data-type",!1),e(p).after(m)}}}t.opts.keepFormatOnDelete||t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(!0),t.clean.lists(),t.html.normalizeSpaces(),d()}function E(n){if(e(n).find(".fr-marker").length>0)return!1;for(var i=t.node.contents(n);i.length&&t.node.isBlock(i[0]);)n=i[0],i=t.node.contents(n);e(n).prepend(e.FE.MARKERS)}function x(n){if(e(n).find(".fr-marker").length>0)return!1;for(var i=t.node.contents(n);i.length&&t.node.isBlock(i[i.length-1]);)n=i[i.length-1],i=t.node.contents(n);e(n).append(e.FE.MARKERS)}function C(n){for(var i=n.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;)i=i.previousSibling;return i?(t.node.isBlock(i)?x(i):"BR"==i.tagName?e(i).before(e.FE.MARKERS):e(i).after(e.FE.MARKERS),!0):!1}function S(n){for(var i=n.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0==i.textContent.length;)i=i.nextSibling;return i?(t.node.isBlock(i)?E(i):e(i).before(e.FE.MARKERS),!0):!1}return{text:n,get:i,ranges:o,clear:r,element:s,endElement:a,save:u,restore:d,isCollapsed:h,isFull:m,inEditor:y,remove:w,blocks:c,info:g,setAtEnd:x,setAtStart:E,setBefore:C,setAfter:S,rangeElement:l}},e.FE.UNICODE_NBSP=String.fromCharCode(160),e.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e.FE.BLOCK_TAGS=["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote","ul","ol","li","table","td","th","thead","tfoot","tbody","tr","hr","dl","dt","dd","form"],e.extend(e.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1}),e.FE.MODULES.html=function(t){function n(){return t.opts.enter==e.FE.ENTER_P?"p":t.opts.enter==e.FE.ENTER_DIV?"div":t.opts.enter==e.FE.ENTER_BR?null:void 0}function i(){for(var n=[],i=t.$el.get(0).querySelectorAll(r()),o=0;o<i.length;o++)if(!(i[o].querySelectorAll(e.FE.VOID_ELEMENTS.join(",")).length>0||i[o].querySelectorAll(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)").length>0||i[o].querySelectorAll(r()).length>0)){for(var s=t.node.contents(i[o]),a=!1,l=0;l<s.length;l++)if(s[l].nodeType!=Node.COMMENT_NODE&&s[l].textContent&&s[l].textContent.replace(/\u200B/g,"").replace(/\n/g,"").length>0){a=!0;break}a||n.push(i[o])}return n}function o(){return e.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function r(){return e.FE.BLOCK_TAGS.join(", ")}function s(n){var i=e.merge([],e.FE.VOID_ELEMENTS);i=e.merge(i,t.opts.htmlAllowedEmptyTags),"undefined"==typeof n&&(i=e.merge(i,e.FE.BLOCK_TAGS));var o,r;do{r=!1,o=t.$el.get(0).querySelectorAll("*:empty:not("+i.join("):not(")+"):not(.fr-marker)");for(var s=0;s<o.length;s++)(0===o[s].attributes.length||"undefined"!=typeof o[s].getAttribute("href"))&&(e(o[s]).remove(),r=!0);o=t.$el.get(0).querySelectorAll("*:empty:not("+i.join("):not(")+"):not(.fr-marker)")}while(o.length&&r)}function a(i,o){var r=n();if(o&&(r='div class="fr-temp-div"'),r)for(var s=t.node.contents(i.get(0)),a=null,l=0;l<s.length;l++){var c=s[l];if(c.nodeType==Node.ELEMENT_NODE&&(t.node.isBlock(c)||e(c).is(t.opts.htmlDoNotWrapTags.join(","))&&!e(c).hasClass("fr-marker")))a=null;else if(c.nodeType!=Node.ELEMENT_NODE&&c.nodeType!=Node.TEXT_NODE)a=null;else if(c.nodeType==Node.ELEMENT_NODE&&"BR"==c.tagName)if(null==a)o?e(c).replaceWith("<"+r+' data-empty="true"><br></div>'):e(c).replaceWith("<"+r+"><br></"+r+">");else{e(c).remove();for(var u=t.node.contents(a),d=!1,p=0;p<u.length;p++)if(!e(u[p]).hasClass("fr-marker")&&(u[p].nodeType!=Node.TEXT_NODE||0!==u[p].textContent.replace(/ /g,"").length)){d=!0;break}d===!1&&(a.append("<br>"),a.data("empty",!0)),a=null}else c.nodeType==Node.TEXT_NODE&&0==e(c).text().trim().length?e(c).remove():(null==a&&(a=e("<"+r+">"),e(c).before(a)),c.nodeType==Node.TEXT_NODE&&e(c).text().trim().length>0?(a.append(e(c).clone()),e(c).remove()):a.append(e(c)))}}function l(n,i,o,r){return t.$wp?("undefined"==typeof n&&(n=!1),"undefined"==typeof i&&(i=!1),"undefined"==typeof o&&(o=!1),"undefined"==typeof r&&(r=!1),a(t.$el,n),r&&t.$el.find(".fr-inner").each(function(){a(e(this),n)}),i&&t.$el.find("td, th").each(function(){a(e(this),n)}),void(o&&t.$el.find("blockquote").each(function(){a(e(this),n)}))):!1}function c(){t.$el.find("div.fr-temp-div").each(function(){e(this).data("empty")||"LI"==this.parentNode.tagName?e(this).replaceWith(e(this).html()):e(this).replaceWith(e(this).html()+"<br>")}),t.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""==e(this).attr("class")}).removeAttr("class")}function u(){for(var n=i(),o=0;o<n.length;o++){var r=n[o];"false"==r.getAttribute("contenteditable")||0!=r.querySelectorAll(t.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)").length||t.node.isVoid(r)||"TABLE"!=r.tagName&&r.appendChild(t.doc.createElement("br"))}if(t.browser.msie&&t.opts.enter==e.FE.ENTER_BR){var s=t.node.contents(t.$el.get(0));s.length&&s[s.length-1].nodeType==Node.TEXT_NODE&&t.$el.append("<br>")}}function d(){return t.$el.find(r())}function p(e){if("undefined"==typeof e&&(e=t.$el.get(0)),e&&["SCRIPT","STYLE","PRE"].indexOf(e.tagName)>=0)return!1;for(var n=t.node.contents(e),i=n.length-1;i>=0;i--)n[i].nodeType==Node.TEXT_NODE?(n[i].textContent=n[i].textContent.replace(/(?!^)( ){2,}(?!$)/g," "),n[i].textContent=n[i].textContent.replace(/\n/g," "),n[i].textContent=n[i].textContent.replace(/^[ ]{2,}/g," "),n[i].textContent=n[i].textContent.replace(/[ ]{2,}$/g," "),(t.node.isBlock(e)||t.node.isElement(e))&&(n[i].previousSibling||(n[i].textContent=n[i].textContent.replace(/^ */,"")),n[i].nextSibling||(n[i].textContent=n[i].textContent.replace(/ *$/,"")),n[i].previousSibling&&n[i].nextSibling&&" "==n[i].textContent&&(n[i].previousSibling&&n[i].nextSibling&&t.node.isBlock(n[i].previousSibling)&&t.node.isBlock(n[i].nextSibling)?n[i].textContent="":n[i].textContent="\n"))):p(n[i])}function f(e){return e&&(t.node.isBlock(e)||["STYLE","SCRIPT","HEAD","BR","HR"].indexOf(e.tagName)>=0||e.nodeType==Node.COMMENT_NODE)}function h(n,i){if("undefined"!=typeof n&&n||(n=t.$el.get(0)),"undefined"==typeof i&&(i=!1),!n.getAttribute||"false"!=n.getAttribute("contenteditable"))if(n.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","HEAD"].indexOf(n.tagName)<0)for(var o=t.node.contents(n),r=o.length-1;r>=0;r--)(o[r].tagName!=Node.ELEMENT_NODE||(o[r].className||"").indexOf("fr-marker")<0)&&h(o[r],i);else if(n.nodeType==Node.TEXT_NODE&&n.textContent.length>0){var s=n.previousSibling,a=n.nextSibling;if(f(s)&&f(a)&&0===n.textContent.trim().length&&t.opts.enter!=e.FE.ENTER_BR)e(n).remove();else{var l=n.textContent;if(i){for(var c=n;t.node.isFirstSibling(c)&&!t.node.isBlock(c);)c=c.parentNode;(t.node.isBlock(c)||c&&c.previousSibling&&"BR"==c.previousSibling.tagName)&&(l=l.replace(/^ */,"")),t.node.isBlock(s)&&(l=l.replace(/^ */,"")),t.node.isBlock(a)&&(l=l.replace(/ *$/,""))}l=l.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var u="",d=0;d<l.length;d++)u+=32!=l.charCodeAt(d)||0!==d&&32!=u.charCodeAt(d-1)?l[d]:e.FE.UNICODE_NBSP;(!n.nextSibling||t.node.isBlock(n.nextSibling))&&(u=u.replace(/ $/,e.FE.UNICODE_NBSP)),!n.previousSibling||t.node.isVoid(n.previousSibling)||t.node.isBlock(n.previousSibling)||(u=u.replace(/^\u00A0([^ $])/," $1")),u=u.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=u&&(n.textContent=u)}}}function g(n){if("undefined"==typeof n&&(n=t.$el.get(0)),n.nodeType==Node.ELEMENT_NODE&&["STYLE","SCRIPT","HEAD"].indexOf(n.tagName)<0){for(var i=t.node.contents(n),o=i.length-1;o>=0;o--)if(!e(i[o]).hasClass("fr-marker")){var r=g(i[o]);if(1==r)return!0}}else if(n.nodeType==Node.TEXT_NODE&&n.textContent.length>0){var s=n.previousSibling,a=n.nextSibling;if(f(s)&&f(a)&&0===n.textContent.trim().length)return!0;var l=n.textContent;l=l.replace(new RegExp(e.FE.UNICODE_NBSP,"g")," ");for(var c="",u=0;u<l.length;u++)c+=32!=l.charCodeAt(u)||0!==u&&32!=c.charCodeAt(u-1)?l[u]:e.FE.UNICODE_NBSP;if(n.nextSibling||(c=c.replace(/ $/,e.FE.UNICODE_NBSP)),n.previousSibling&&!t.node.isVoid(n.previousSibling)&&(c=c.replace(/^\u00A0([^ $])/," $1")),c=c.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),n.textContent!=c)return!0}return!1}function m(e,t,n){var i=new RegExp(t,"gi"),o=i.exec(e);return o?o[n]:null}function v(e,t){var n=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return n?t.implementation.createDocumentType(n[1],n[3],n[4]):t.implementation.createDocumentType("html")}function b(e){var t=e.doctype,n="<!DOCTYPE html>";return t&&(n="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),n}function y(){l(),p(),s(),h(null,!0),t.html.fillEmptyBlocks(),t.clean.quotes(),t.clean.lists(),t.clean.tables(),t.clean.toHTML5(),t.selection.restore(),w(),t.placeholder.refresh()}function w(){t.core.isEmpty()&&(null!=n()?0===t.$el.get(0).querySelectorAll(r()).length&&0===t.$el.get(0).querySelectorAll(t.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)").length&&(t.core.hasFocus()?(t.$el.html("<"+n()+">"+e.FE.MARKERS+"<br/></"+n()+">"),t.selection.restore()):t.$el.html("<"+n()+"><br/></"+n()+">")):0===t.$el.get(0).querySelectorAll("*:not(.fr-marker):not(br)").length&&(t.core.hasFocus()?(t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore()):t.$el.html("<br/>")))}function E(e,t){return m(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function x(n,i){var o=e("<div "+(m(n,"<"+i+"([^>]*?)>",1)||"")+">");return t.node.rawAttributes(o.get(0))}function C(e){return m(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function S(n){var i=t.clean.html(n||"",[],[],t.opts.fullPage);if(t.opts.fullPage){var o=E(i,"body")||(i.indexOf("<body")>=0?"":i),r=x(i,"body"),s=E(i,"head")||"<title></title>",a=x(i,"head"),l=e("<div>").append(s).find("base, link, meta, noscript, script, style, template, title").remove().end().html().trim();s=e("<div>").append(s).find("base, link, meta, noscript, script, style, template, title").map(function(){return this.outerHTML}).toArray().join("");var c=C(i),u=x(i,"html");t.$el.html(l+"\n"+o),t.node.clearAttributes(t.$el.get(0)),t.$el.attr(r),t.$head.html(s),t.node.clearAttributes(t.$head.get(0)),t.$head.attr(a),t.node.clearAttributes(t.$html.get(0)),t.$html.attr(u),t.iframe_document.doctype.parentNode.replaceChild(v(c,t.iframe_document),t.iframe_document.doctype)}else t.$el.html(i);var d=t.edit.isDisabled();t.edit.on(),t.core.injectStyle(t.opts.iframeStyle),y(),t.opts.useClasses||(t.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),t.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),d&&t.edit.off(),t.events.trigger("html.set")}function T(e,n){if(!t.$wp)return t.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var i="";t.events.trigger("html.beforeGet");var o,r=function(e){var t=/(#[^\s\+>~\.\[:]+)/g,n=/(\[[^\]]+\])/g,i=/(\.[^\s\+>~\.\[:]+)/g,o=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,r=/(:[\w-]+\([^\)]*\))/gi,s=/(:[^\s\+>~\.\[:]+)/g,a=/([^\s\+>~\.\[:]+)/g;!function(){var t=/:not\(([^\)]*)\)/g;t.test(e)&&(e=e.replace(t,"     $1 "))}();var l=100*(e.match(t)||[]).length+10*(e.match(n)||[]).length+10*(e.match(i)||[]).length+10*(e.match(r)||[]).length+10*(e.match(s)||[]).length+(e.match(o)||[]).length;return e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),l+=(e.match(a)||[]).length},s=[],a={};if(!t.opts.useClasses&&!n){for(o=0;o<t.doc.styleSheets.length;o++){var l,c=0;try{l=t.doc.styleSheets[o].cssRules,t.doc.styleSheets[o].ownerNode&&"STYLE"==t.doc.styleSheets[o].ownerNode.nodeType&&(c=1)}catch(u){}if(l)for(var d=0,p=l.length;p>d;d++){var f=t.opts.iframe?"body ":".fr-view ";if(l[d].selectorText&&0===l[d].selectorText.indexOf(f)&&l[d].style.cssText.length>0)for(var h=l[d].selectorText.replace(f,"").replace(/::/g,":"),g=t.$el.get(0).querySelectorAll(h),m=0;m<g.length;m++){!g[m].getAttribute("fr-original-style")&&g[m].getAttribute("style")?(g[m].setAttribute("fr-original-style",g[m].getAttribute("style")),s.push(g[m])):g[m].getAttribute("fr-original-style")||s.push(g[m]),a[g[m]]||(a[g[m]]={});for(var v=1e3*c+r(l[d].selectorText),y=l[d].style.cssText.split(";"),w=0;w<y.length;w++){var E=y[w].trim().split(":")[0];a[g[m]][E]||(a[g[m]][E]=0,(g[m].getAttribute("fr-original-style")||"").indexOf(E+":")>=0&&(a[g[m]][E]=1e4)),v>=a[g[m]][E]&&(a[g[m]][E]=v,y[w].trim().length&&(g[m].style[E.trim()]=y[w].trim().split(":")[1].trim()))}}}}for(o=0;o<s.length;o++)s[o].getAttribute("class")&&(s[o].setAttribute("fr-original-class",s[o].getAttribute("class")),s[o].removeAttribute("class"))}if(t.core.isEmpty()?t.opts.fullPage&&(i=b(t.iframe_document),i+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.find("head").get(0).outerHTML+"<body></body></html>"):("undefined"==typeof e&&(e=!1),t.opts.fullPage?(i=b(t.iframe_document),i+="<html"+t.node.attributes(t.$html.get(0))+">"+t.$html.html()+"</html>"):i=t.$el.html()),!t.opts.useClasses&&!n)for(o=0;o<s.length;o++)s[o].getAttribute("fr-original-class")&&(s[o].setAttribute("class",s[o].getAttribute("fr-original-class")),s[o].removeAttribute("fr-original-class")),s[o].getAttribute("fr-original-style")?(s[o].setAttribute("style",s[o].getAttribute("fr-original-style")),s[o].removeAttribute("fr-original-style")):s[o].removeAttribute("style");t.opts.fullPage&&(i=i.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,""),i=i.replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,""),i=i.replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>"),i=i.replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),i=i.replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>"),i=i.replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>'),i=i.replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),t.opts.htmlSimpleAmpersand&&(i=i.replace(/\&amp;/gi,"&")),t.events.trigger("html.afterGet"),e||(i=i.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),i=t.clean.invisibleSpaces(i);var x=t.events.chainTrigger("html.get",i);return"string"==typeof x&&(i=x),i=i.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})}function k(){var n=function(n,i){for(;i&&(i.nodeType==Node.TEXT_NODE||!t.node.isBlock(i));)i&&i.nodeType!=Node.TEXT_NODE&&e(n).wrapInner(t.node.openTagString(i)+t.node.closeTagString(i)),i=i.parentNode;i&&n.innerHTML==i.innerHTML&&(n.innerHTML=i.outerHTML)},i=function(){var n,i=null;return t.win.getSelection?(n=t.win.getSelection(),n&&n.rangeCount&&(i=n.getRangeAt(0).commonAncestorContainer,i.nodeType!=Node.ELEMENT_NODE&&(i=i.parentNode))):(n=t.doc.selection)&&"Control"!=n.type&&(i=n.createRange().parentElement()),null!=i&&(e.inArray(t.$el.get(0),e(i).parents())>=0||i==t.$el.get(0))?i:null},o="";if("undefined"!=typeof t.win.getSelection){t.browser.mozilla&&(t.selection.save(),t.$el.find('.fr-marker[data-type="false"]').length>1&&(t.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),t.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),t.$el.find(".fr-marker").not('[data-id="0"]').remove()),t.selection.restore());for(var r=t.selection.ranges(),s=0;s<r.length;s++){var a=document.createElement("div");a.appendChild(r[s].cloneContents()),n(a,i()),e(a).find(".fr-element").length>0&&(a=t.$el.get(0)),o+=a.innerHTML}}else"undefined"!=typeof t.doc.selection&&"Text"==t.doc.selection.type&&(o=t.doc.selection.createRange().htmlText);return o}function $(t){var n=e("<div>").html(t);return n.find(r()).length>0}function _(e){var n=t.doc.createElement("div");return n.innerHTML=e,t.selection.setAtEnd(n),n.innerHTML}function A(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&apos;")}function N(n,i,o){t.selection.isCollapsed()||t.selection.remove();var r;if(r=i?n:t.clean.html(n),r=r.replace(/\r|\n/g," "),n.indexOf('class="fr-marker"')<0&&(r=_(r)),t.core.isEmpty())t.$el.html(r);else{var s=t.markers.insert();if(s){var a;if(($(r)||o)&&(a=t.node.deepestParent(s))){var s=t.markers.split();if(!s)return!1;e(s).replaceWith(r)}else e(s).replaceWith(r)}else t.$el.append(r)}y(),t.events.trigger("html.inserted")}function D(n){var i=null;"undefined"==typeof n&&(i=t.selection.element());var o,r;do{r=!1,o=t.$el.get(0).querySelectorAll("*:not(.fr-marker)");for(var s=0;s<o.length;s++){var a=o[s];if(i!=a){var l=a.textContent;0===a.children.length&&1===l.length&&8203==l.charCodeAt(0)&&(e(a).remove(),r=!0)}}}while(r)}function O(){var e=function(){D(),t.placeholder&&t.placeholder.refresh()};t.events.on("mouseup",e),t.events.on("keydown",e),t.events.on("contentChanged",w)}return{defaultTag:n,emptyBlocks:i,emptyBlockTagsQuery:o,blockTagsQuery:r,fillEmptyBlocks:u,cleanEmptyTags:s,cleanWhiteTags:D,normalizeSpaces:h,doNormalize:g,cleanBlankSpaces:p,blocks:d,getDoctype:b,set:S,get:T,getSelected:k,insert:N,wrap:l,unwrap:c,escapeEntities:A,checkIfEmpty:w,extractNode:E,extractNodeAttrs:x,extractDoctype:C,_init:O}},e.extend(e.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),e.FE.MODULES.size=function(e){function t(){e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function n(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$wp.css("overflow","auto")):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function i(){return e.$wp?(n(),void(e.opts.iframe&&(e.events.on("keyup",t),e.events.on("commands.after",t),e.events.on("html.set",t),e.events.on("init",t),e.events.on("initialized",t)))):!1}return{_init:i,syncIframe:t,refresh:n}},e.extend(e.FE.DEFAULTS,{language:null}),e.FE.LANGUAGE={},e.FE.MODULES.language=function(t){function n(e){return o&&o.translation[e]?o.translation[e]:e}function i(){e.FE.LANGUAGE&&(o=e.FE.LANGUAGE[t.opts.language]),o&&o.direction&&(t.opts.direction=o.direction)}var o;return{_init:i,translate:n}},e.extend(e.FE.DEFAULTS,{placeholderText:"Type something"}),e.FE.MODULES.placeholder=function(t){function n(){t.$placeholder||s();var n=0,i=t.node.contents(t.$el.get(0));i.length&&i[0].nodeType==Node.ELEMENT_NODE?(t.opts.toolbarInline||(n=t.helpers.getPX(e(i[0]).css("margin-top"))),t.$placeholder.css("font-size",e(i[0]).css("font-size")),t.$placeholder.css("line-height",e(i[0]).css("line-height"))):(t.$placeholder.css("font-size",t.$el.css("font-size")),t.$placeholder.css("line-height",t.$el.css("line-height"))),t.$wp.addClass("show-placeholder"),t.$placeholder.css("margin-top",Math.max(t.helpers.getPX(t.$el.css("margin-top")),n)).text(t.language.translate(t.opts.placeholderText||t.$oel.attr("placeholder")||""))}function i(){t.$wp.removeClass("show-placeholder")}function o(){return t.$wp?t.$wp.hasClass("show-placeholder"):!0}function r(){return t.$wp?void(t.core.isEmpty()?n():i()):!1}function s(){t.$placeholder=e('<span class="fr-placeholder"></span>'),t.$wp.append(t.$placeholder)}function a(){return t.$wp?void t.events.on("init input keydown keyup contentChanged",r):!1}return{_init:a,show:n,hide:i,refresh:r,isVisible:o}},e.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(t){}}function n(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled"),e.$tb&&e.$tb.removeClass("fr-disabled"),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),r=!1}function i(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled"),e.$tb&&e.$tb.addClass("fr-disabled")):e.$el.is("a")&&e.$el.attr("contenteditable",!1),r=!0}function o(){return r}var r=!1;return{on:n,off:i,disableDesign:t,isDisabled:o}},e.extend(e.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin: 0px;}body{padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;}body:after{content:"";display:block;clear:both}',direction:"auto",zIndex:1,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),e.FE.MODULES.core=function(t){function n(e){t.opts.iframe&&(t.$head.find("style[data-fr-style]").remove(),t.$head.append('<style data-fr-style="true">'+e+"</style>"))}function i(){t.opts.iframe||t.$el.addClass("fr-element fr-view")}function o(){if(t.$box.addClass("fr-box"+(t.opts.editorClass?" "+t.opts.editorClass:"")),t.$wp.addClass("fr-wrapper"),i(),t.opts.iframe){t.$iframe.addClass("fr-iframe");for(var e=0;e<t.o_doc.styleSheets.length;e++){var n;try{n=t.o_doc.styleSheets[e].cssRules}catch(o){}if(n)for(var r=0,s=n.length;s>r;r++)!n[r].selectorText||0!==n[r].selectorText.indexOf(".fr-view")&&0!==n[r].selectorText.indexOf(".fr-element")||n[r].style.cssText.length>0&&(0===n[r].selectorText.indexOf(".fr-view")?t.opts.iframeStyle+=n[r].selectorText.replace(/\.fr-view/g,"body")+"{"+n[r].style.cssText+"}":t.opts.iframeStyle+=n[r].selectorText.replace(/\.fr-element/g,"body")+"{"+n[r].style.cssText+"}")}}"auto"!=t.opts.direction&&t.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.$el.attr("dir",t.opts.direction),t.$wp.attr("dir",t.opts.direction),t.opts.zIndex>1&&t.$box.css("z-index",t.opts.zIndex),
t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")}function r(){return t.node.isEmpty(t.$el.get(0))}function s(){t.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!t.win.FormData,progress:"upload"in new XMLHttpRequest}}function a(e,n){var i=new XMLHttpRequest;i.open(n,e,!0),t.opts.requestWithCORS&&(i.withCredentials=!0);for(var o in t.opts.requestHeaders)t.opts.requestHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,t.opts.requestHeaders[o]);return i}function l(){"TEXTAREA"==t.$oel.get(0).tagName&&t.$oel.val(t.html.get()),t.$wp&&("TEXTAREA"==t.$oel.get(0).tagName?(t.$box.replaceWith(t.$oel),t.$oel.show()):(t.$wp.replaceWith(t.html.get()),t.$box.removeClass("fr-view fr-ltr fr-box "+(t.opts.editorClass||"")),t.opts.theme&&t.$box.addClass(t.opts.theme+"-theme")))}function c(){return t.browser.mozilla&&t.helpers.isMobile()?t.selection.inEditor():t.node.hasFocus(t.$el.get(0))||t.$el.find("*:focus").length>0}function u(e){if(!e)return!1;var n=e.data("instance");return n?n.id==t.id:!1}function d(){if(e.FE.INSTANCES.push(t),s(),t.$wp){o(),t.html.set(t._original_html),t.$el.attr("spellcheck",t.opts.spellcheck),t.helpers.isMobile()&&(t.$el.attr("autocomplete",t.opts.spellcheck?"on":"off"),t.$el.attr("autocorrect",t.opts.spellcheck?"on":"off"),t.$el.attr("autocapitalize",t.opts.spellcheck?"on":"off")),t.opts.disableRightClick&&t.events.$on(t.$el,"contextmenu",function(e){return 2==e.button?!1:void 0});try{t.doc.execCommand("styleWithCSS",!1,!1)}catch(n){}}t.events.on("drop",function(e){e.preventDefault(),e.stopPropagation()}),t.events.on("destroy",l),"TEXTAREA"==t.$oel.get(0).tagName&&(t.events.on("contentChanged",function(){t.$oel.val(t.html.get())}),t.events.on("form.submit",function(){t.$oel.val(t.html.get())}),t.events.on("form.reset",function(){t.html.set(t._original_html)}),t.$oel.val(t.html.get())),t.events.trigger("init")}return{_init:d,isEmpty:r,getXHR:a,injectStyle:n,hasFocus:c,sameInstance:u}},e.FE.COMMANDS={bold:{title:"Bold",refresh:function(e){this.refresh["default"](e,"bold")}},italic:{title:"Italic",refresh:function(e){this.refresh["default"](e,"italic")}},underline:{title:"Underline",refresh:function(e){this.refresh["default"](e,"underline")}},strikeThrough:{title:"Strikethrough",refresh:function(e){this.refresh["default"](e,"strikethrough")}},subscript:{title:"Subscript",refresh:function(e){this.refresh["default"](e,"subscript")}},superscript:{title:"Superscript",refresh:function(e){this.refresh["default"](e,"superscript")}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},e.FE.RegisterCommand=function(t,n){e.FE.COMMANDS[t]=n},e.FE.MODULES.commands=function(t){function n(n,i){if(t.events.trigger("commands.before",e.merge([n],i||[]))!==!1){var o=e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].callback||u[n],r=!0;e.FE.COMMANDS[n]&&"undefined"!=typeof e.FE.COMMANDS[n].focus&&(r=e.FE.COMMANDS[n].focus),t.core.hasFocus()||!r||t.popups.areVisible()||t.events.focus(!0),e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].undo!==!1&&t.undo.saveStep(),o&&o.apply(t,e.merge([n],i||[])),t.events.trigger("commands.after",e.merge([n],i||[])),e.FE.COMMANDS[n]&&e.FE.COMMANDS[n].undo!==!1&&t.undo.saveStep()}}function i(n,i){if(t.selection.isCollapsed()&&t.doc.queryCommandState(n)===!1){t.markers.insert();var o=t.$el.find(".fr-marker");o.replaceWith("<"+i+">"+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</"+i+">"),t.selection.restore()}else{var r=t.selection.element();if(t.selection.isCollapsed()&&t.doc.queryCommandState(n)===!0&&r.tagName==i.toUpperCase()&&0===(r.textContent||"").replace(/\u200B/g,"").length)e(r).replaceWith(e.FE.INVISIBLE_SPACE+e.FE.MARKERS),t.selection.restore();else{var s=t.$el.find("span"),a=!1;t.doc.queryCommandState(n)!==!1||t.browser.chrome||(t.selection.save(),a=!0),t.browser.mozilla&&t.$el.find(".fr-marker").css("display","inline-block"),t.doc.execCommand(n,!1,!1),a&&t.selection.restore();var l=t.$el.find("span[style]").not(s).filter(function(){return e(this).attr("style").indexOf("font-weight: normal")>=0});l.length&&(t.selection.save(),l.each(function(){e(this).replaceWith(e(this).html())}),t.selection.restore()),t.clean.toHTML5()}}}function o(n){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var i=t.selection.blocks(),o=0;o<i.length;o++)if("LI"!=i[o].tagName&&"LI"!=i[o].parentNode.tagName){var r=e(i[o]),s="rtl"==t.opts.direction||"rtl"==r.css("direction")?"margin-right":"margin-left",a=t.helpers.getPX(r.css(s));r.css(s,Math.max(a+20*n,0)||""),r.removeClass("fr-temp-div")}t.selection.save(),t.html.unwrap(),t.selection.restore()}function r(){var n=function(e){return e.attr("style").indexOf("font-size")>=0};t.$el.find("[style]").each(function(){var t=e(this);n(t)&&(t.attr("data-font-size",t.css("font-size")),t.css("font-size",""))})}function s(){t.$el.find("[data-font-size]").each(function(){var t=e(this);t.css("font-size",t.attr("data-font-size")),t.removeAttr("data-font-size")})}function a(){t.$el.find("span").each(function(){""===t.node.attributes(this)&&e(this).replaceWith(e(this).html())})}function l(n,i){if(t.selection.isCollapsed()){t.markers.insert();var o=t.$el.find(".fr-marker"),l=o.parent();t.node.openTagString(l.get(0))=='<span style="'+n+": "+l.css("font-size")+';">'&&t.node.isEmpty(l.get(0))?l.replaceWith('<span style="'+n+": "+i+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>"):o.replaceWith('<span style="'+n+": "+i+';">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>"),t.selection.restore()}else{r(),t.doc.execCommand("fontSize",!1,4),t.selection.save(),s();for(var c,u=function(t){var i=e(t);i.css(n,""),""===i.attr("style")&&i.replaceWith(i.html())},d=function(){return 0===e(this).attr("style").indexOf(n+":")||e(this).attr("style").indexOf(";"+n+":")>=0||e(this).attr("style").indexOf("; "+n+":")>=0};t.$el.find("font").length>0;){var p=t.$el.find("font:first"),f=e('<span class="fr-just" style="'+n+": "+i+';">'+p.html()+"</span>");p.replaceWith(f);var h=f.find("span");for(c=h.length-1;c>=0;c--)u(h[c]);var g=f.parentsUntil(t.$el,"span[style]").filter(d);if(g.length){var m="",v="",b="",y="",w=f.get(0);do w=w.parentNode,m+=t.node.closeTagString(w),v=t.node.openTagString(w)+v,g.get(0)!=w&&(b+=t.node.closeTagString(w),y=t.node.openTagString(w)+y);while(g.get(0)!=w);var E=m+'<span class="fr-just" style="'+n+": "+i+';">'+y+f.html()+b+"</span>"+v;f.replaceWith('<span id="fr-break"></span>');var x=g.get(0).outerHTML;e(g.get(0)).replaceWith(x.replace(/<span id="fr-break"><\/span>/g,E))}}t.html.cleanEmptyTags(),a();var C=t.$el.find(".fr-just + .fr-just");for(c=0;c<C.length;c++){var S=e(C[c]);S.prepend(S.prev().html()),S.prev().remove()}t.$el.find(".fr-marker + .fr-just").each(function(){e(this).prepend(e(this).prev())}),t.$el.find(".fr-just + .fr-marker").each(function(){e(this).append(e(this).next())}),t.$el.find(".fr-just").removeAttr("class"),t.selection.restore()}}function c(e){return function(){n(e)}}var u={bold:function(){i("bold","strong")},subscript:function(){i("subscript","sub")},superscript:function(){i("superscript","sup")},italic:function(){i("italic","em")},strikeThrough:function(){i("strikeThrough","s")},underline:function(){i("underline","u")},undo:function(){t.undo.run()},redo:function(){t.undo.redo()},indent:function(){o(1)},outdent:function(){o(-1)},show:function(){t.opts.toolbarInline&&t.toolbar.showInline(null,!0)},insertHR:function(){t.selection.remove(),t.html.insert('<hr id="fr-just">');var e=t.$el.find("hr#fr-just");e.removeAttr("id"),t.selection.setAfter(e.get(0))||t.selection.setBefore(e.get(0)),t.selection.restore()},clearFormatting:function(){if(t.browser.msie||t.browser.edge){var n=function(n){t.commands.applyProperty(n,"#123456"),t.selection.save(),t.$el.find("span:not(.fr-marker)").each(function(i,o){var r=e(o),s=r.css(n);("#123456"===s||"#123456"===t.helpers.RGBToHex(s))&&r.replaceWith(r.html())}),t.selection.restore()};n("color"),n("background-color")}t.doc.execCommand("removeFormat",!1,!1),t.doc.execCommand("unlink",!1,!1)},selectAll:function(){t.doc.execCommand("selectAll",!1,!1)}},d={};for(var p in u)u.hasOwnProperty(p)&&(d[p]=c(p));return e.extend(d,{exec:n,applyProperty:l})},e.FE.MODULES.cursorLists=function(t){function n(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function i(e){for(var n=e;!t.node.isList(n);)n=n.parentNode;return n}function o(o){var r,s=n(o),a=s.nextSibling,l=s.previousSibling,c=t.html.defaultTag();if(t.node.isEmpty(s,!0)&&a){for(var u="",d="",p=o.parentNode;!t.node.isList(p)&&p.parentNode&&"LI"!==p.parentNode.tagName;)u=t.node.openTagString(p)+u,d+=t.node.closeTagString(p),p=p.parentNode;u=t.node.openTagString(p)+u,d+=t.node.closeTagString(p);var f="";for(f=p.parentNode&&"LI"==p.parentNode.tagName?d+"<li>"+e.FE.MARKERS+"<br>"+u:c?d+"<"+c+">"+e.FE.MARKERS+"<br></"+c+">"+u:d+e.FE.MARKERS+"<br>"+u,e(s).html('<span id="fr-break"></span>');["UL","OL"].indexOf(p.tagName)<0||p.parentNode&&"LI"===p.parentNode.tagName;)p=p.parentNode;var h=t.node.openTagString(p)+e(p).html()+t.node.closeTagString(p);h=h.replace(/<span id="fr-break"><\/span>/g,f),e(p).replaceWith(h),t.$el.find("li:empty").remove()}else l&&a||!t.node.isEmpty(s,!0)?(e(s).before("<li><br></li>"),e(o).remove()):l?(r=i(s),r.parentNode&&"LI"==r.parentNode.tagName?e(r.parentNode).after("<li>"+e.FE.MARKERS+"<br></li>"):c?e(r).after("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(r).after(e.FE.MARKERS+"<br>"),e(s).remove()):(r=i(s),r.parentNode&&"LI"==r.parentNode.tagName?e(r.parentNode).before("<li>"+e.FE.MARKERS+"<br></li>"):c?e(r).before("<"+c+">"+e.FE.MARKERS+"<br></"+c+">"):e(r).before(e.FE.MARKERS+"<br>"),e(s).remove())}function r(i){for(var o=n(i),r="",s=i,a="",l="";s!=o;){s=s.parentNode;var c="A"==s.tagName&&t.cursor.isAtEnd(i,s)?"fr-to-remove":"";a=t.node.openTagString(e(s).clone().addClass(c).get(0))+a,l=t.node.closeTagString(s)+l}r=l+r+a+e.FE.MARKERS,e(i).replaceWith('<span id="fr-break"></span>');var u=t.node.openTagString(o)+e(o).html()+t.node.closeTagString(o);u=u.replace(/<span id="fr-break"><\/span>/g,r),e(o).replaceWith(u)}function s(i){for(var o=n(i),r=e.FE.MARKERS,s=i;s!=o;){s=s.parentNode;var a="A"==s.tagName&&t.cursor.isAtEnd(i,s)?"fr-to-remove":"";r=t.node.openTagString(e(s).clone().addClass(a).get(0))+r+t.node.closeTagString(s)}e(i).remove(),e(o).after(r)}function a(o){var r=n(o),s=r.previousSibling;if(s){s=e(s).find(t.html.blockTagsQuery()).get(-1)||s,e(o).replaceWith(e.FE.MARKERS);var a=t.node.contents(s);a.length&&"BR"==a[a.length-1].tagName&&e(a[a.length-1]).remove(),e(r).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==r&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var l,c=t.node.contents(r)[0];c&&!t.node.isList(c);)l=c.nextSibling,e(s).append(c),c=l;for(s=r.previousSibling;c;)l=c.nextSibling,e(s).append(c),c=l;e(r).remove()}else{var u=i(r);if(e(o).replaceWith(e.FE.MARKERS),u.parentNode&&"LI"==u.parentNode.tagName){var d=u.previousSibling;t.node.isBlock(d)?(e(r).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==r&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(d).append(e(r).html())):e(u).before(e(r).html())}else{var p=t.html.defaultTag();p&&0===e(r).find(t.html.blockTagsQuery()).length?e(u).before("<"+p+">"+e(r).html()+"</"+p+">"):e(u).before(e(r).html())}e(r).remove(),0===e(u).find("li").length&&e(u).remove()}}function l(i){var o,r=n(i),s=r.nextSibling;if(s){o=t.node.contents(s),o.length&&"BR"==o[0].tagName&&e(o[0]).remove(),e(s).find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==s&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))});for(var a,l=i,c=t.node.contents(s)[0];c&&!t.node.isList(c);)a=c.nextSibling,e(l).after(c),l=c,c=a;for(;c;)a=c.nextSibling,e(r).append(c),c=a;e(i).replaceWith(e.FE.MARKERS),e(s).remove()}else{for(var u=r;!u.nextSibling&&u!=t.$el.get(0);)u=u.parentNode;if(u==t.$el.get(0))return!1;if(u=u.nextSibling,t.node.isBlock(u))e.FE.NO_DELETE_TAGS.indexOf(u.tagName)<0&&(e(i).replaceWith(e.FE.MARKERS),o=t.node.contents(r),o.length&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),e(r).append(e(u).html()),e(u).remove());else for(o=t.node.contents(r),o.length&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),e(i).replaceWith(e.FE.MARKERS);u&&!t.node.isBlock(u)&&"BR"!=u.tagName;)e(r).append(e(u)),u=u.nextSibling}}return{_startEnter:o,_middleEnter:r,_endEnter:s,_backspace:a,_del:l}},e.FE.NO_DELETE_TAGS=["TH","TD","TABLE","FORM"],e.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],e.FE.MODULES.cursor=function(t){function n(e){return e?t.node.isBlock(e)?!0:e.nextSibling?!1:n(e.parentNode):!1}function i(e){return e?t.node.isBlock(e)?!0:e.previousSibling?!1:i(e.parentNode):!1}function o(e,n){return e?e==t.$wp.get(0)?!1:e.previousSibling?!1:e.parentNode==n?!0:o(e.parentNode,n):!1}function r(e,n){return e?e==t.$wp.get(0)?!1:e.nextSibling?!1:e.parentNode==n?!0:r(e.parentNode,n):!1}function s(n){return e(n).parentsUntil(t.$el,"LI").length>0&&0===e(n).parentsUntil("LI","TABLE").length}function a(n){var i=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,o=t.node.deepestParent(n,[],!i);if(o&&"BLOCKQUOTE"==o.tagName){var r=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);r&&r.previousSibling&&(o=r)}if(null!==o){var s,a=o.previousSibling;if(t.node.isBlock(o)&&t.node.isEditable(o)&&a&&e.FE.NO_DELETE_TAGS.indexOf(a.tagName)<0&&t.node.isEditable(a))if(t.node.isBlock(a))if(t.node.isEmpty(a)&&!t.node.isList(a))e(a).remove();else{if(t.node.isList(a)&&(a=e(a).find("li:last").get(0)),s=t.node.contents(a),s.length&&"BR"==s[s.length-1].tagName&&e(s[s.length-1]).remove(),"BLOCKQUOTE"==a.tagName&&"BLOCKQUOTE"!=o.tagName)for(s=t.node.contents(a);s.length&&t.node.isBlock(s[s.length-1]);)a=s[s.length-1],s=t.node.contents(a);else if("BLOCKQUOTE"!=a.tagName&&"BLOCKQUOTE"==o.tagName)for(s=t.node.contents(o);s.length&&t.node.isBlock(s[0]);)o=s[0],s=t.node.contents(o);e(n).replaceWith(e.FE.MARKERS),e(a).append(t.node.isEmpty(o)?e.FE.MARKERS:o.innerHTML),e(o).remove()}else e(n).replaceWith(e.FE.MARKERS),"BLOCKQUOTE"==o.tagName&&a.nodeType==Node.ELEMENT_NODE?e(a).remove():(e(a).after(t.node.isEmpty(o)?"":e(o).html()),e(o).remove(),"BR"==a.tagName&&e(a).remove())}}function l(n){for(var i=n;!i.previousSibling;)i=i.parentNode;i=i.previousSibling;var o;if(!t.node.isBlock(i)&&t.node.isEditable(i)){for(o=t.node.contents(i);i.nodeType!=Node.TEXT_NODE&&o.length&&t.node.isEditable(i);)i=o[o.length-1],o=t.node.contents(i);if(i.nodeType==Node.TEXT_NODE){if(t.helpers.isIOS())return!0;var r=i.textContent,s=r.length-1;if(t.opts.tabSpaces&&r.length>=t.opts.tabSpaces){var a=r.substr(r.length-t.opts.tabSpaces,r.length-1);0==a.replace(/ /g,"").replace(new RegExp(e.FE.UNICODE_NBSP,"g"),"").length&&(s=r.length-t.opts.tabSpaces)}i.textContent=r.substring(0,s),i.textContent.length&&55357==i.textContent.charCodeAt(i.textContent.length-1)&&(i.textContent=i.textContent.substr(0,i.textContent.length-1)),0==i.textContent.length?2!=i.parentNode.childNodes.length||i.parentNode!=n.parentNode||t.node.isBlock(i.parentNode)?(e(i).after(e.FE.MARKERS),i.parentNode.removeChild(i)):(e(i.parentNode).after(e.FE.MARKERS),e(i.parentNode).remove()):e(i).after(e.FE.MARKERS)}else t.events.trigger("node.remove",[e(i)])!==!1&&(e(i).after(e.FE.MARKERS),e(i).remove())}else if(e.FE.NO_DELETE_TAGS.indexOf(i.tagName)<0&&t.node.isEditable(i))if(t.node.isEmpty(i)&&!t.node.isList(i))e(i).remove(),e(n).replaceWith(e.FE.MARKERS);else{for(t.node.isList(i)&&(i=e(i).find("li:last").get(0)),o=t.node.contents(i),o&&"BR"==o[o.length-1].tagName&&e(o[o.length-1]).remove(),o=t.node.contents(i);o&&t.node.isBlock(o[o.length-1]);)i=o[o.length-1],o=t.node.contents(i);e(i).append(e.FE.MARKERS);for(var l=n;!l.previousSibling;)l=l.parentNode;for(;l&&"BR"!==l.tagName&&!t.node.isBlock(l);){var c=l;l=l.nextSibling,e(i).append(c)}l&&"BR"==l.tagName&&e(l).remove(),e(n).remove()}}function c(){var r=!1,c=t.markers.insert();if(!c)return!0;t.$el.get(0).normalize();var u=c.previousSibling;if(u){var d=u.textContent;d&&d.length&&8203==d.charCodeAt(d.length-1)&&(1==d.length?e(u).remove():(u.textContent=u.textContent.substr(0,d.length-1),u.textContent.length&&55357==u.textContent.charCodeAt(u.textContent.length-1)&&(u.textContent=u.textContent.substr(0,u.textContent.length-1))))}return n(c)?r=l(c):i(c)?s(c)&&o(c,e(c).parents("li:first").get(0))?t.cursorLists._backspace(c):a(c):r=l(c),e(c).remove(),t.$el.find("blockquote:empty").remove(),t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists(),t.html.normalizeSpaces(),t.selection.restore(),r}function u(n){var i=e(n).parentsUntil(t.$el,"BLOCKQUOTE").length>0,o=t.node.deepestParent(n,[],!i);if(o&&"BLOCKQUOTE"==o.tagName){var r=t.node.deepestParent(n,[e(n).parentsUntil(t.$el,"BLOCKQUOTE").get(0)]);r&&r.nextSibling&&(o=r)}if(null!==o){var s,a=o.nextSibling;if(t.node.isBlock(o)&&t.node.isEditable(o)&&a&&e.FE.NO_DELETE_TAGS.indexOf(a.tagName)<0)if(t.node.isBlock(a)&&t.node.isEditable(a))if(t.node.isList(a))if(t.node.isEmpty(o,!0))e(o).remove(),e(a).find("li:first").prepend(e.FE.MARKERS);else{var l=e(a).find("li:first");"BLOCKQUOTE"==o.tagName&&(s=t.node.contents(o),s.length&&t.node.isBlock(s[s.length-1])&&(o=s[s.length-1])),0===l.find("ul, ol").length&&(e(n).replaceWith(e.FE.MARKERS),l.find(t.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==l.get(0)&&e(this).replaceWith(e(this).html()+(t.node.isEmpty(this)?"":"<br>"))}),e(o).append(t.node.contents(l.get(0))),l.remove(),0===e(a).find("li").length&&e(a).remove())}else{if(s=t.node.contents(a),s.length&&"BR"==s[0].tagName&&e(s[0]).remove(),"BLOCKQUOTE"!=a.tagName&&"BLOCKQUOTE"==o.tagName)for(s=t.node.contents(o);s.length&&t.node.isBlock(s[s.length-1]);)o=s[s.length-1],s=t.node.contents(o);else if("BLOCKQUOTE"==a.tagName&&"BLOCKQUOTE"!=o.tagName)for(s=t.node.contents(a);s.length&&t.node.isBlock(s[0]);)a=s[0],s=t.node.contents(a);e(n).replaceWith(e.FE.MARKERS),e(o).append(a.innerHTML),e(a).remove()}else{for(e(n).replaceWith(e.FE.MARKERS);a&&"BR"!==a.tagName&&!t.node.isBlock(a)&&t.node.isEditable(a);){var c=a;a=a.nextSibling,e(o).append(c)}a&&"BR"==a.tagName&&t.node.isEditable(a)&&e(a).remove()}}}function d(i){for(var o=i;!o.nextSibling;)o=o.parentNode;if(o=o.nextSibling,"BR"==o.tagName&&t.node.isEditable(o))if(o.nextSibling){if(t.node.isBlock(o.nextSibling)&&t.node.isEditable(o.nextSibling)){if(!(e.FE.NO_DELETE_TAGS.indexOf(o.nextSibling.tagName)<0))return;o=o.nextSibling,e(o.previousSibling).remove()}}else if(n(o)){if(s(i))t.cursorLists._del(i);else{var r=t.node.deepestParent(o);r&&(e(o).remove(),u(i))}return}var a;if(!t.node.isBlock(o)&&t.node.isEditable(o)){for(a=t.node.contents(o);o.nodeType!=Node.TEXT_NODE&&a.length&&t.node.isEditable(o);)o=a[0],a=t.node.contents(o);o.nodeType==Node.TEXT_NODE?(e(o).before(e.FE.MARKERS),o.textContent.length&&55357==o.textContent.charCodeAt(0)?o.textContent=o.textContent.substring(2,o.textContent.length):o.textContent=o.textContent.substring(1,o.textContent.length)):t.events.trigger("node.remove",[e(o)])!==!1&&(e(o).before(e.FE.MARKERS),e(o).remove()),e(i).remove()}else if(e.FE.NO_DELETE_TAGS.indexOf(o.tagName)<0)if(t.node.isList(o))i.previousSibling?(e(o).find("li:first").prepend(i),t.cursorLists._backspace(i)):(e(o).find("li:first").prepend(e.FE.MARKERS),e(i).remove());else if(a=t.node.contents(o),a&&"BR"==a[0].tagName&&e(a[0]).remove(),a&&"BLOCKQUOTE"==o.tagName){var l=a[0];for(e(i).before(e.FE.MARKERS);l&&"BR"!=l.tagName;){var c=l;l=l.nextSibling,e(i).before(c)}l&&"BR"==l.tagName&&e(l).remove()}else e(i).after(e(o).html()).after(e.FE.MARKERS),e(o).remove()}function p(){var o=t.markers.insert();if(!o)return!1;if(t.$el.get(0).normalize(),n(o))if(s(o))if(0===e(o).parents("li:first").find("ul, ol").length)t.cursorLists._del(o);else{var r=e(o).parents("li:first").find("ul:first, ol:first").find("li:first");r=r.find(t.html.blockTagsQuery()).get(-1)||r,r.prepend(o),t.cursorLists._backspace(o)}else u(o);else d(i(o)?o:o);e(o).remove(),t.$el.find("blockquote:empty").remove(),t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(),t.clean.quotes(),t.clean.lists(),t.html.normalizeSpaces(),t.selection.restore()}function f(){t.$el.find(".fr-to-remove").each(function(){for(var n=t.node.contents(this),i=0;i<n.length;i++)n[i].nodeType==Node.TEXT_NODE&&(n[i].textContent=n[i].textContent.replace(/\u200B/g,""));e(this).replaceWith(this.innerHTML)})}function h(n,i,o){var s,a=t.node.deepestParent(n,[],!o);if(a&&"BLOCKQUOTE"==a.tagName)return r(n,a)?(s=t.html.defaultTag(),s?e(a).after("<"+s+">"+e.FE.MARKERS+"<br></"+s+">"):e(a).after(e.FE.MARKERS+"<br>"),e(n).remove(),!1):(m(n,i,o),!1);if(null==a)e(n).replaceWith("<br/>"+e.FE.MARKERS+"<br/>");else{var l=n,c="";(!t.node.isBlock(a)||i)&&(c="<br/>");var u="",d="";s=t.html.defaultTag();var p="",f="";s&&t.node.isBlock(a)&&(p="<"+s+">",f="</"+s+">",a.tagName==s.toUpperCase()&&(p=t.node.openTagString(e(a).clone().removeAttr("id").get(0))));do if(l=l.parentNode,!i||l!=a||i&&!t.node.isBlock(a))if(u+=t.node.closeTagString(l),l==a&&t.node.isBlock(a))d=p+d;else{var h="A"==l.tagName&&r(n,l)?"fr-to-remove":"";d=t.node.openTagString(e(l).clone().addClass(h).get(0))+d}while(l!=a);c=u+c+d+(n.parentNode==a&&t.node.isBlock(a)?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS,t.node.isBlock(a)&&!e(a).find("*:last").is("br")&&e(a).append("<br/>"),e(n).after('<span id="fr-break"></span>'),e(n).remove(),a.nextSibling&&!t.node.isBlock(a.nextSibling)||t.node.isBlock(a)||e(a).after("<br>");var g;g=!i&&t.node.isBlock(a)?t.node.openTagString(a)+e(a).html()+f:t.node.openTagString(a)+e(a).html()+t.node.closeTagString(a),g=g.replace(/<span id="fr-break"><\/span>/g,c),e(a).replaceWith(g)}}function g(n,i,s){var a=t.node.deepestParent(n,[],!s);if(a&&"BLOCKQUOTE"==a.tagName){if(o(n,a)){var l=t.html.defaultTag();return l?e(a).before("<"+l+">"+e.FE.MARKERS+"<br></"+l+">"):e(a).before(e.FE.MARKERS+"<br>"),e(n).remove(),!1}r(n,a)?h(n,i,!0):m(n,i,!0)}if(null==a)e(n).replaceWith("<br>"+e.FE.MARKERS);else{if(t.node.isBlock(a))if(i)e(n).remove(),e(a).prepend("<br>"+e.FE.MARKERS);else{if(t.node.isEmpty(a,!0))return h(n,i,s);e(a).before(t.node.openTagString(e(a).clone().removeAttr("id").get(0))+"<br>"+t.node.closeTagString(a))}else e(a).before("<br>");e(n).remove()}}function m(n,i,s){var a=t.node.deepestParent(n,[],!s);if(null==a)t.html.defaultTag()&&n.parentNode===t.$el.get(0)?e(n).replaceWith("<"+t.html.defaultTag()+">"+e.FE.MARKERS+"<br></"+t.html.defaultTag()+">"):((!n.nextSibling||t.node.isBlock(n.nextSibling))&&e(n).after("<br>"),e(n).replaceWith("<br>"+e.FE.MARKERS));else{var l=n,c="";"PRE"==a.tagName&&(i=!0),(!t.node.isBlock(a)||i)&&(c="<br>");var u="",d="";do{var p=l;if(l=l.parentNode,"BLOCKQUOTE"==a.tagName&&t.node.isEmpty(p)&&!e(p).hasClass("fr-marker")&&e(p).find(n).length>0&&e(p).after(n),("BLOCKQUOTE"!=a.tagName||!r(n,l)&&!o(n,l))&&(!i||l!=a||i&&!t.node.isBlock(a))){u+=t.node.closeTagString(l);var f="A"==l.tagName&&r(n,l)?"fr-to-remove":"";d=t.node.openTagString(e(l).clone().addClass(f).removeAttr("id").get(0))+d}}while(l!=a);var h=a==n.parentNode&&t.node.isBlock(a)||n.nextSibling;if("BLOCKQUOTE"==a.tagName){n.previousSibling&&t.node.isBlock(n.previousSibling)&&n.nextSibling&&"BR"==n.nextSibling.tagName&&(e(n.nextSibling).after(n),n.nextSibling&&"BR"==n.nextSibling.tagName&&e(n.nextSibling).remove());var g=t.html.defaultTag();c=u+c+(g?"<"+g+">":"")+e.FE.MARKERS+"<br>"+(g?"</"+g+">":"")+d}else c=u+c+d+(h?"":e.FE.INVISIBLE_SPACE)+e.FE.MARKERS;e(n).replaceWith('<span id="fr-break"></span>');var m=t.node.openTagString(a)+e(a).html()+t.node.closeTagString(a);m=m.replace(/<span id="fr-break"><\/span>/g,c),e(a).replaceWith(m)}}function v(o){var r=t.markers.insert();if(!r)return!0;t.$el.get(0).normalize();var a=!1;e(r).parentsUntil(t.$el,"BLOCKQUOTE").length>0&&(o=!1,a=!0),e(r).parentsUntil(t.$el,"TD, TH").length&&(a=!1),n(r)?!s(r)||o||a?h(r,o,a):t.cursorLists._endEnter(r):i(r)?!s(r)||o||a?g(r,o,a):t.cursorLists._startEnter(r):!s(r)||o||a?m(r,o,a):t.cursorLists._middleEnter(r),f(),t.html.fillEmptyBlocks(),t.html.cleanEmptyTags(),t.clean.lists(),t.html.normalizeSpaces(),t.selection.restore()}return{enter:v,backspace:c,del:p,isAtEnd:r}},e.FE.MODULES.data=function(e){function t(e){return e}function n(e){if(!e)return e;for(var n="",r=t("charCodeAt"),s=t("fromCharCode"),a=d.indexOf(e[0]),l=1;l<e.length-2;l++){for(var c=i(++a),u=e[r](l),p="";/[0-9-]/.test(e[l+1]);)p+=e[++l];p=parseInt(p,10)||0,u=o(u,c,p),u^=a-1&31,n+=String[s](u)}return n}function i(e){for(var t=e.toString(),n=0,i=0;i<t.length;i++)n+=parseInt(t.charAt(i),10);return n>10?n%9+1:n}function o(e,t,n){for(var i=Math.abs(n);i-- >0;)e-=t;return 0>n&&(e+=123),e}function r(e){return e&&"none"==e.css("display")?(e.remove(),!0):!1}function s(){return r(c)||r(u)}function a(){return e.$box?(e.$box.append(f(t(f("kTDD4spmKD1klaMB1C7A5RA1G3RA10YA5qhrjuvnmE1D3FD2bcG-7noHE6B2JB4C3xXA8WF6F-10RG2C3G3B-21zZE3C3H3xCA16NC4DC1f1hOF1MB3B-21whzQH5UA2WB10kc1C2F4D3XC2YD4D1C4F3GF2eJ2lfcD-13HF1IE1TC11TC7WE4TA4d1A2YA6XA4d1A3yCG2qmB-13GF4A1B1KH1HD2fzfbeQC3TD9VE4wd1H2A20A2B-22ujB3nBG2A13jBC10D3C2HD5D1H1KB11uD-16uWF2D4A3F-7C9D-17c1E4D4B3d1D2CA6B2B-13qlwzJF2NC2C-13E-11ND1A3xqUA8UE6bsrrF-7C-22ia1D2CF2H1E2akCD2OE1HH1dlKA6PA5jcyfzB-22cXB4f1C3qvdiC4gjGG2H2gklC3D-16wJC1UG4dgaWE2D5G4g1I2H3B7vkqrxH1H2EC9C3E4gdgzKF1OA1A5PF5C4WWC3VA6XA4e1E3YA2YA5HE4oGH4F2H2IB10D3D2NC5G1B1qWA9PD6PG5fQA13A10XA4C4A3e1H2BA17kC-22cmOB1lmoA2fyhcptwWA3RA8A-13xB-11nf1I3f1B7GB3aD3pavFC10D5gLF2OG1LSB2D9E7fQC1F4F3wpSB5XD3NkklhhaE-11naKA9BnIA6D1F5bQA3A10c1QC6Kjkvitc2B6BE3AF3E2DA6A4JD2IC1jgA-64MB11D6C4==")))),c=e.$box.find("> div:last"),u=c.find("> a"),void("rtl"==e.opts.direction&&c.css("left","auto").css("right",0))):!1}function l(){var n=e.opts.key||[""];"string"==typeof n&&(n=[n]),e.ul=!0;for(var i=0;i<n.length;i++){var o=f(n[i])||"";if(!(o!==f(t(f("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&o.indexOf(p,o.length-p.length)<0&&[f("9qqG-7amjlwq=="),f("KA3B3C2A6D1D5H5H1A3==")].indexOf(p)<0)){e.ul=!1;break}}e.ul===!0&&a(),e.events.on("contentChanged",function(){e.ul===!0&&s()&&a()}),e.events.on("destroy",function(){c&&c.length&&c.remove()},!0)}var c,u,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",p=function(){for(var e=0,t=document.domain,n=t.split("."),i="_gd"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}(),f=t(n);return{_init:l}},e.FE.ENTER_P=0,e.FE.ENTER_DIV=1,e.FE.ENTER_BR=2,e.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221},e.extend(e.FE.DEFAULTS,{enter:e.FE.ENTER_P,multiLine:!0,tabSpaces:0}),e.FE.MODULES.keys=function(t){function n(){if(t.helpers.isIOS()){var n=navigator.userAgent.match("CriOS"),i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);if(!n&&!i){var o=e(t.o_win).scrollTop();t.events.disableBlur(),t.selection.save(),t.$el.blur(),t.selection.restore(),t.events.enableBlur(),e(t.o_win).scrollTop(o)}}}function i(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter()),n()}function o(e){e.preventDefault(),e.stopPropagation(),t.opts.multiLine&&(t.selection.isCollapsed()||t.selection.remove(),t.cursor.enter(!0))}function r(e){t.selection.isCollapsed()?t.cursor.backspace()||(e.preventDefault(),e.stopPropagation(),C=!1):(e.preventDefault(),e.stopPropagation(),t.selection.remove(),t.html.fillEmptyBlocks(),C=!1),t.placeholder.refresh()}function s(e){e.preventDefault(),e.stopPropagation(),""===t.selection.text()?t.cursor.del():t.selection.remove(),t.placeholder.refresh()}function a(n){if(t.browser.mozilla){n.preventDefault(),n.stopPropagation(),t.selection.isCollapsed()||t.selection.remove(),t.markers.insert();var i=t.$el.find(".fr-marker").get(0),o=i.previousSibling,r=i.nextSibling;!r&&i.parentNode&&"A"==i.parentNode.tagName?(e(i).parent().after("&nbsp;"+e.FE.MARKERS),e(i).remove()):(o&&o.nodeType==Node.TEXT_NODE&&1==o.textContent.length&&160==o.textContent.charCodeAt(0)?e(o).after(" "):e(i).before("&nbsp;"),e(i).replaceWith(e.FE.MARKERS)),t.selection.restore()}}function l(){if(t.browser.mozilla&&t.selection.isCollapsed()&&!k){var e=t.selection.ranges(0),n=e.startContainer,i=e.startOffset;n&&n.nodeType==Node.TEXT_NODE&&i<=n.textContent.length&&i>0&&32==n.textContent.charCodeAt(i-1)&&(t.selection.save(),t.html.normalizeSpaces(),t.selection.restore())}}function c(){t.selection.isFull()&&setTimeout(function(){var n=t.html.defaultTag();n?t.$el.html("<"+n+">"+e.FE.MARKERS+"<br/></"+n+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),t.placeholder.refresh(),t.button.bulkRefresh(),t.undo.saveStep()},0)}function u(e){if(t.opts.tabSpaces>0)if(t.selection.isCollapsed()){e.preventDefault(),e.stopPropagation();for(var n="",i=0;i<t.opts.tabSpaces;i++)n+="&nbsp;";t.html.insert(n),t.placeholder.refresh()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?t.commands.outdent():t.commands.indent()}function d(){k=!1}function p(){return k}function f(n){t.events.disableBlur(),C=!0;var l=n.which;if(16===l)return!0;if(229===l)return k=!0,!0;k=!1;var c=b(l)&&!v(n),d=l==e.FE.KEYCODE.BACKSPACE||l==e.FE.KEYCODE.DELETE;if((t.selection.isFull()&&!t.opts.keepFormatOnDelete&&!t.placeholder.isVisible()||d&&t.placeholder.isVisible()&&t.opts.keepFormatOnDelete)&&(c||d)){var p=t.html.defaultTag();return p?t.$el.html("<"+p+">"+e.FE.MARKERS+"<br/></"+p+">"):t.$el.html(e.FE.MARKERS+"<br/>"),t.selection.restore(),n.preventDefault(),!0}l==e.FE.KEYCODE.ENTER?n.shiftKey?o(n):i(n):l!=e.FE.KEYCODE.BACKSPACE||v(n)||n.altKey||t.placeholder.isVisible()?l!=e.FE.KEYCODE.DELETE||v(n)||n.altKey||t.placeholder.isVisible()?l==e.FE.KEYCODE.SPACE?a(n):l==e.FE.KEYCODE.TAB?u(n):v(n)||!b(n.which)||t.selection.isCollapsed()||t.selection.remove():s(n):r(n),t.events.enableBlur()}function h(n){for(var i=0;i<n.length;i++)n[i].nodeType==Node.TEXT_NODE&&/\u200B/gi.test(n[i].textContent)?(n[i].textContent=n[i].textContent.replace(/\u200B/gi,""),0===n[i].textContent.length&&e(n[i]).remove()):n[i].nodeType==Node.ELEMENT_NODE&&"IFRAME"!=n[i].nodeType&&h(t.node.contents(n[i]))}function g(){if(!t.$wp)return!0;var n;t.opts.height||t.opts.heightMax?(n=t.position.getBoundingRect().top,t.helpers.isIOS()&&(n-=e(t.o_win).scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.$wp.offset().top-e(t.o_win).scrollTop()+t.$wp.height()-20&&t.$wp.scrollTop(n+t.$wp.scrollTop()-(t.$wp.height()+t.$wp.offset().top)+e(t.o_win).scrollTop()+20)):(n=t.position.getBoundingRect().top,t.helpers.isIOS()&&(n-=e(t.o_win).scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n>t.o_win.innerHeight-20&&e(t.o_win).scrollTop(n+e(t.o_win).scrollTop()-t.o_win.innerHeight+20),n=t.position.getBoundingRect().top,t.helpers.isIOS()&&(n-=e(t.o_win).scrollTop()),t.opts.iframe&&(n+=t.$iframe.offset().top),n<t.$tb.height()+20&&e(t.o_win).scrollTop(n+e(t.o_win).scrollTop()-t.$tb.height()-20))}function m(n){if(k)return!1;if(!t.selection.isCollapsed())return!0;!n||n.which!=e.FE.KEYCODE.ENTER&&n.which!=e.FE.KEYCODE.BACKSPACE||n.which==e.FE.KEYCODE.BACKSPACE&&C||g();var i=t.$el.find(t.html.blockTagsQuery());i.push(t.$el.get(0));for(var o=[],r=0;r<i.length;r++)if(["TD","TH"].indexOf(i[r].tagName)<0)for(var s=i[r].children,a=0;a<s.length;a++)"BR"==s[a].tagName&&o.push(s[a]);for(var r=0;r<o.length;r++){var l=o[r],c=l.previousSibling,u=l.nextSibling,d=t.node.blockParent(l)||t.$el.get(0);c&&d&&"BR"!=c.tagName&&!t.node.isBlock(c)&&!u&&e(d).text().replace(/\u200B/g,"").length>0&&e(c).text().length>0&&(t.$el.is(d)&&!u&&t.opts.enter==e.FE.ENTER_BR&&t.browser.msie||(t.selection.save(),e(l).remove(),t.selection.restore()))}var p=function(t){if(!t)return!1;var n=e(t).html();return n=n.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""),!!(n&&/\u200B/.test(n)&&n.replace(/\u200B/gi,"").length>0)},f=function(e){var n=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;
return!t.helpers.isIOS()||0===((e.textContent||"").match(n)||[]).length},m=t.selection.element();p(m)&&0===e(m).find("li").length&&!e(m).hasClass("fr-marker")&&"IFRAME"!=m.tagName&&f(m)&&(t.selection.save(),h(t.node.contents(m)),t.selection.restore()),!t.browser.mozilla&&t.html.doNormalize()&&(t.selection.save(),t.html.normalizeSpaces(),t.selection.restore())}function v(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function b(n){if(n>=e.FE.KEYCODE.ZERO&&n<=e.FE.KEYCODE.NINE)return!0;if(n>=e.FE.KEYCODE.NUM_ZERO&&n<=e.FE.KEYCODE.NUM_MULTIPLY)return!0;if(n>=e.FE.KEYCODE.A&&n<=e.FE.KEYCODE.Z)return!0;if(t.browser.webkit&&0===n)return!0;switch(n){case e.FE.KEYCODE.SPACE:case e.FE.KEYCODE.QUESTION_MARK:case e.FE.KEYCODE.NUM_PLUS:case e.FE.KEYCODE.NUM_MINUS:case e.FE.KEYCODE.NUM_PERIOD:case e.FE.KEYCODE.NUM_DIVISION:case e.FE.KEYCODE.SEMICOLON:case e.FE.KEYCODE.FF_SEMICOLON:case e.FE.KEYCODE.DASH:case e.FE.KEYCODE.EQUALS:case e.FE.KEYCODE.FF_EQUALS:case e.FE.KEYCODE.COMMA:case e.FE.KEYCODE.PERIOD:case e.FE.KEYCODE.SLASH:case e.FE.KEYCODE.APOSTROPHE:case e.FE.KEYCODE.SINGLE_QUOTE:case e.FE.KEYCODE.OPEN_SQUARE_BRACKET:case e.FE.KEYCODE.BACKSLASH:case e.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function y(e){var n=e.which;return v(e)||n>=37&&40>=n?!0:(S||(T=t.snapshot.get()),clearTimeout(S),void(S=setTimeout(function(){S=null,t.undo.saveStep()},Math.max(250,t.opts.typingTimer))))}function w(e){return v(e)?!0:void(T&&S&&(t.undo.saveStep(T),T=null))}function E(){S&&(clearTimeout(S),t.undo.saveStep(),T=null)}function x(){if(t.events.on("keydown",y),t.events.on("input",l),t.events.on("keyup",w),t.events.on("keypress",d),t.events.on("keydown",f),t.events.on("keyup",m),t.events.on("html.inserted",m),t.events.on("cut",c),t.$el.get(0).msGetInputContext)try{t.$el.get(0).msGetInputContext().addEventListener("MSCandidateWindowShow",function(){k=!0}),t.$el.get(0).msGetInputContext().addEventListener("MSCandidateWindowHide",function(){k=!1,m()})}catch(e){}}var C,S,T,k=!1;return{_init:x,ctrlKey:v,isCharacter:b,forceUndo:E,isIME:p}},e.extend(e.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowLocalImages:!1}),e.FE.MODULES.paste=function(t){function n(n){e.FE.copied_html=t.html.getSelected(),e.FE.copied_text=e("<div>").html(e.FE.copied_html).text(),"cut"==n.type&&(t.undo.saveStep(),setTimeout(function(){t.html.wrap(),t.events.focus(),t.undo.saveStep()},0))}function i(e){if(h)return!1;if(e.originalEvent&&(e=e.originalEvent),t.events.trigger("paste.before",[e])===!1)return!1;if(d=t.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var n="",i=e.clipboardData.types;if(t.helpers.isArray(i))for(var r=0;r<i.length;r++)n+=i[r]+";";else n=i;if(p="",/text\/html/.test(n)?p=e.clipboardData.getData("text/html"):/text\/rtf/.test(n)&&t.browser.safari?p=e.clipboardData.getData("text/rtf"):/text\/plain/.test(n)&&!this.browser.mozilla&&(p=t.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==p)return a(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;p=null}o()}function o(){t.selection.save(),t.events.disableBlur(),p=null,f?f.html(""):(f=e('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 9999; line-height: 140%;" tabindex="-1"></div>'),t.$box.after(f)),f.focus(),t.win.setTimeout(a,1)}function r(n){n=n.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>"),n=n.replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>"),n=n.replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>"),n=n.replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>"),n=n.replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>"),n=n.replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span"),n=n.replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,""),n=n.replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,""),n=n.replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," "),n=n.replace(/<!--[\s\S]*?-->/gi,""),n=n.replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");for(var i=["style","script","applet","embed","noframes","noscript"],o=0;o<i.length;o++){var r=new RegExp("<"+i[o]+".*?"+i[o]+"(.*?)>","gi");n=n.replace(r,"")}n=n.replace(/&nbsp;/gi," "),n=n.replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>"),n=n.replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");var s;do s=n,n=n.replace(/<[^\/>][^>]*><\/[^>]+>/gi,"");while(n!=s);n=n.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>'),n=n.replace(/<lilevel1([^>]*)>/gi,"<li$1>"),n=t.clean.html(n,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),n=n.replace(/<a>(.[^<]+)<\/a>/gi,"$1");var a=e("<div>").html(n);return a.find("li[data-indent]").each(function(t,n){var i=e(n);if(i.prev("li").length>0){var o=i.prev("li").find("> ul, > ol");0===o.length&&(o=e("ul"),i.prev("li").append(o)),o.append(n)}else i.removeAttr("data-indent")}),t.html.cleanBlankSpaces(a.get(0)),n=a.html()}function s(n){var i=e("<div>").html(n);i.find("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote").each(function(n,i){e(i).replaceWith("<"+(t.html.defaultTag()||"DIV")+">"+e(i).html()+"</"+(t.html.defaultTag()||"DIV")+">")}),e(i.find("*").not("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img").get().reverse()).each(function(){e(this).replaceWith(e(this).html())});var o=function(n){for(var i=t.node.contents(n),r=0;r<i.length;r++)3!=i[r].nodeType&&1!=i[r].nodeType?e(i[r]).remove():o(i[r])};return o(i.get(0)),i.html()}function a(){t.keys.forceUndo();var n=t.snapshot.get();null===p&&(p=f.html(),t.selection.restore(),t.events.enableBlur());var i=t.events.chainTrigger("paste.beforeCleanup",p);if("string"==typeof i&&(p=i),p.indexOf("<body")>=0&&(p=p.replace(/[.\s\S\w\W<>]*<body[^>]*>([.\s\S\w\W<>]*)<\/body>[.\s\S\w\W<>]*/g,"$1")),p.indexOf('id="docs-internal-guid')>=0&&(p=p.replace(/^.* id="docs-internal-guid[^>]*>(.*)<\/b>.*$/,"$1")),p.match(/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/gi)?(p=p.replace(/^\n*/g,"").replace(/^ /g,""),0===p.indexOf("<colgroup>")&&(p="<table>"+p+"</table>"),p=r(p),p=c(p)):(t.opts.htmlAllowComments=!1,p=t.clean.html(p,t.opts.pasteDeniedTags,t.opts.pasteDeniedAttrs),t.opts.htmlAllowComments=!0,p=c(p),p=p.replace(/\r|\n|\t/g,""),e.FE.copied_text&&e("<div>").html(p).text().replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==e.FE.copied_text.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")&&(p=e.FE.copied_html),p=p.replace(/^ */g,"").replace(/ *$/g,"")),t.opts.pastePlain&&(p=s(p)),i=t.events.chainTrigger("paste.afterCleanup",p),"string"==typeof i&&(p=i),""!==p){var o=e("<div>").html(p);t.html.normalizeSpaces(o.get(0)),o.find("span").each(function(){0==this.attributes.length&&e(this).replaceWith(this.innerHTML)}),o.find("br").each(function(){this.previousSibling&&t.node.isBlock(this.previousSibling)&&e(this).remove()}),p=o.html(),t.html.insert(p,!0)}l(),t.undo.saveStep(n),t.undo.saveStep()}function l(){t.events.trigger("paste.after")}function c(t){for(var n,i=e("<div>").html(t),o=i.find("*:empty:not(br, img, td, th)");o.length;){for(n=0;n<o.length;n++)e(o[n]).remove();o=i.find("*:empty:not(br, img, td, th)")}for(var r=i.find("> div:not([style]), td > div, th > div, li > div");r.length;){var s=e(r[r.length-1]);s.replaceWith(s.html()+"<br>"),r=i.find("> div:not([style]), td > div, th > div, li > div")}for(r=i.find("div:not([style])");r.length;){for(n=0;n<r.length;n++){var a=e(r[n]),l=a.html().replace(/\u0009/gi,"").trim();a.replaceWith(l)}r=i.find("div:not([style])")}return i.html()}function u(){t.events.on("copy",n),t.events.on("cut",n),t.events.on("paste",i),t.browser.msie&&t.browser.version<11&&(t.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){h=!1},50),h=!0)},!0),t.events.on("beforepaste",i))}var d,p,f,h=!1;return{_init:u}},e.FE.MODULES.tooltip=function(t){function n(){t.$tooltip&&t.$tooltip.removeClass("fr-visible").css("left","-3000px")}function i(n,i){if(n.data("title")||n.data("title",n.attr("title")),!n.data("title"))return!1;t.$tooltip||r(),n.removeAttr("title"),t.$tooltip.text(n.data("title")),t.$tooltip.addClass("fr-visible");var o=n.offset().left+(n.outerWidth()-t.$tooltip.outerWidth())/2;0>o&&(o=0),o+t.$tooltip.outerWidth()>e(t.o_win).width()&&(o=e(t.o_win).width()-t.$tooltip.outerWidth()),"undefined"==typeof i&&(i=t.opts.toolbarBottom);var s=i?n.offset().top-t.$tooltip.height():n.offset().top+n.outerHeight();t.$tooltip.css("left",o),t.$tooltip.css("top",s)}function o(o,r,s){t.helpers.isMobile()||(t.events.$on(o,"mouseenter",r,function(t){e(t.currentTarget).hasClass("fr-disabled")||i(e(t.currentTarget),s)},!0),t.events.$on(o,"mouseleave "+t._mousedown+" "+t._mouseup,r,function(){n()},!0))}function r(){t.helpers.isMobile()||(t.shared.$tooltip?t.$tooltip=t.shared.$tooltip:(t.shared.$tooltip=e('<div class="fr-tooltip"></div>'),t.$tooltip=t.shared.$tooltip,t.opts.theme&&t.$tooltip.addClass(t.opts.theme+"-theme"),e(t.o_doc).find("body").append(t.$tooltip)),t.events.on("shared.destroy",function(){t.$tooltip.html("").removeData().remove()},!0))}return{hide:n,to:i,bind:o}},e.FE.ICON_DEFAULT_TEMPLATE="font_awesome",e.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />"},e.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},e.FE.DefineIconTemplate=function(t,n){e.FE.ICON_TEMPLATES[t]=n},e.FE.DefineIcon=function(t,n){e.FE.ICONS[t]=n},e.FE.MODULES.icon=function(){function t(t){var n=null,i=e.FE.ICONS[t];if("undefined"!=typeof i){var o=i.template||e.FE.ICON_DEFAULT_TEMPLATE;o&&(o=e.FE.ICON_TEMPLATES[o])&&(n=o.replace(/\[([a-zA-Z]*)\]/g,function(e,n){return"NAME"==n?i[n]||t:i[n]}))}return n||t}return{create:t}},e.FE.MODULES.button=function(t){function n(n){var i=e(n.currentTarget),o=i.next(),r=i.hasClass("fr-active"),s=(t.helpers.isMobile(),e(".fr-dropdown.fr-active").not(i)),a=i.parents(".fr-toolbar, .fr-popup").data("instance")||t;if(a.helpers.isIOS()&&0==a.$el.get(0).querySelectorAll(".fr-marker").length&&(a.selection.save(),a.selection.clear(),a.selection.restore()),!r){var l=i.data("cmd");o.find(".fr-command").removeClass("fr-active"),e.FE.COMMANDS[l]&&e.FE.COMMANDS[l].refreshOnShow&&e.FE.COMMANDS[l].refreshOnShow.apply(a,[i,o]),o.css("left",i.offset().left-i.parent().offset().left-("rtl"==t.opts.direction?o.width()-i.outerWidth():0)),t.opts.toolbarBottom?o.css("bottom",t.$tb.height()-i.position().top):o.css("top",i.position().top+i.outerHeight())}i.addClass("fr-blink").toggleClass("fr-active"),setTimeout(function(){i.removeClass("fr-blink")},300),o.offset().left+o.outerWidth()>e(t.opts.scrollableContainer).offset().left+e(t.opts.scrollableContainer).outerWidth()&&o.css("margin-left",-(o.offset().left+o.outerWidth()-e(t.opts.scrollableContainer).offset().left-e(t.opts.scrollableContainer).outerWidth())),s.removeClass("fr-active"),s.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!=i.parents(".fr-popup").length||t.opts.toolbarInline||(i.hasClass("fr-active")?t.$tb.css("zIndex",(t.opts.zIndex||1)+4):t.$tb.css("zIndex",""))}function i(t){t.addClass("fr-blink"),setTimeout(function(){t.removeClass("fr-blink")},500);for(var n=t.data("cmd"),i=[];"undefined"!=typeof t.data("param"+(i.length+1));)i.push(t.data("param"+(i.length+1)));var o=e(".fr-dropdown.fr-active");o.length&&(o.removeClass("fr-active"),o.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),t.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(n,i)}function o(t){var n=e(t.currentTarget);i(n)}function r(t){var i=e(t.currentTarget),r=i.parents(".fr-popup, .fr-toolbar").data("instance");if(0!=i.parents(".fr-popup").length||i.data("popup")||r.popups.hideAll(),r.popups.areVisible()&&!r.popups.areVisible(r)){for(var s=0;s<e.FE.INSTANCES.length;s++)e.FE.INSTANCES[s]!=r&&e.FE.INSTANCES[s].popups&&e.FE.INSTANCES[s].popups.areVisible()&&e.FE.INSTANCES[s].$el.find(".fr-marker").remove();r.popups.hideAll()}i.hasClass("fr-dropdown")?n(t):(o(t),e.FE.COMMANDS[i.data("cmd")]&&0!=e.FE.COMMANDS[i.data("cmd")].refreshAfterCallback&&r.button.bulkRefresh())}function s(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active"),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function a(e){e.preventDefault(),e.stopPropagation()}function l(e){return e.stopPropagation(),t.opts.toolbarInline?!1:void 0}function c(n,i){t.events.bindClick(n,".fr-command:not(.fr-disabled)",r),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu",a,!0),t.events.$on(n,t._mousedown+" "+t._mouseup+" "+t._move,".fr-dropdown-menu .fr-dropdown-wrapper",l,!0);var o=n.get(0).ownerDocument,c="defaultView"in o?o.defaultView:o.parentWindow,u=function(i){(!i||i.type==t._mouseup&&i.target!=e("html").get(0)||"keydown"==i.type&&(t.keys.isCharacter(i.which)&&!t.keys.ctrlKey(i)||i.which==e.FE.KEYCODE.ESC))&&s(n)};t.events.$on(e(c),t._mouseup+" resize keydown",u,!0),t.opts.iframe&&t.events.$on(t.$win,t._mouseup,u,!0),e.merge(m,n.find(".fr-btn").toArray()),t.tooltip.bind(n,".fr-btn, .fr-title",i)}function u(e,n){var i="";if(n.html)i+="function"==typeof n.html?n.html.call(t):n.html;else{var o=n.options;"function"==typeof o&&(o=o()),i+='<ul class="fr-dropdown-list">';for(var r in o)o.hasOwnProperty(r)&&(i+='<li><a class="fr-command" data-cmd="'+e+'" data-param1="'+r+'" title="'+o[r]+'">'+t.language.translate(o[r])+"</a></li>");i+="</ul>"}return i}function d(e,n,i){var o=n.displaySelection;"function"==typeof o&&(o=o(t));var r;if(o){var s="function"==typeof n.defaultSelection?n.defaultSelection(t):n.defaultSelection;r='<span style="width:'+(n.displaySelectionWidth||100)+'px">'+(s||t.language.translate(n.title))+"</span>"}else r=t.icon.create(n.icon||e);var a=n.popup?' data-popup="true"':"",l='<button type="button" tabindex="-1" title="'+(t.language.translate(n.title)||"")+'" class="fr-command fr-btn'+("dropdown"==n.type?" fr-dropdown":"")+(n.displaySelection?" fr-selection":"")+(n.back?" fr-back":"")+(n.disabled?" fr-disabled":"")+(i?"":" fr-hidden")+'" data-cmd="'+e+'"'+a+">"+r+"</button>";if("dropdown"==n.type){var c='<div class="fr-dropdown-menu"><div class="fr-dropdown-wrapper"><div class="fr-dropdown-content" tabindex="-1">';c+=u(e,n),c+="</div></div></div>",l+=c}return l}function p(n,i){for(var o="",r=0;r<n.length;r++){var s=n[r],a=e.FE.COMMANDS[s];if(!(a&&"undefined"!=typeof a.plugin&&t.opts.pluginsEnabled.indexOf(a.plugin)<0))if(a){var l="undefined"!=typeof i?i.indexOf(s)>=0:!0;o+=d(s,a,l)}else"|"==s?o+='<div class="fr-separator fr-vs"></div>':"-"==s&&(o+='<div class="fr-separator fr-hs"></div>')}return o}function f(n){var i,o=n.parents(".fr-popup, .fr-toolbar").data("instance")||t,r=n.data("cmd");n.hasClass("fr-dropdown")?i=n.next():n.removeClass("fr-active"),e.FE.COMMANDS[r]&&e.FE.COMMANDS[r].refresh?e.FE.COMMANDS[r].refresh.apply(o,[n,i]):t.refresh[r]&&o.refresh[r](n,i)}function h(){var n=t.$tb?t.$tb.data("instance")||t:t;return 0==t.events.trigger("buttons.refresh")?!0:void setTimeout(function(){for(var t=n.selection.inEditor()&&n.core.hasFocus(),i=0;i<m.length;i++){var o=e(m[i]),r=o.data("cmd");0==o.parents(".fr-popup").length?t||e.FE.COMMANDS[r]&&e.FE.COMMANDS[r].forcedRefresh?n.button.refresh(o):o.hasClass("fr-dropdown")||o.removeClass("fr-active"):o.parents(".fr-popup").is(":visible")&&n.button.refresh(o)}},0)}function g(){t.opts.toolbarInline?t.events.on("toolbar.show",h):(t.events.on("mouseup",h),t.events.on("keyup",h),t.events.on("blur",h),t.events.on("focus",h),t.events.on("contentChanged",h))}var m=[];return(t.opts.toolbarInline||t.opts.toolbarContainer)&&(t.shared.buttons||(t.shared.buttons=[]),m=t.shared.buttons),{_init:g,buildList:p,bindCommands:c,refresh:f,bulkRefresh:h,exec:i}},e.FE.MODULES.position=function(t){function n(){var n,i=t.selection.ranges(0);if(i&&i.collapsed&&t.selection.inEditor()){var o=!1;0==t.$el.find(".fr-marker").length&&(t.selection.save(),o=!0);var r=t.$el.find(".fr-marker:first");r.css("display","inline"),r.css("line-height","");var s=r.offset(),a=r.outerHeight();r.css("display","none"),r.css("line-height",0),n={},n.left=s.left,n.width=0,n.height=a,n.top=s.top-(t.helpers.isIOS()?0:e(t.o_win).scrollTop()),n.right=1,n.bottom=1,n.ok=!0,o&&t.selection.restore()}else i&&(n=i.getBoundingClientRect());return n}function i(n,i,o){var r=n.outerHeight();if(!t.helpers.isMobile()&&t.$tb&&n.parent().get(0)!=t.$tb.get(0)){var s=(n.parent().height()-20-(t.opts.toolbarBottom?t.$tb.outerHeight():0),n.parent().offset().top),a=i-r-(o||0);n.parent().get(0)==e(t.opts.scrollableContainer).get(0)&&(s-=n.parent().position().top);var l=e(t.opts.scrollableContainer).get(0).scrollHeight;s+i+r>e(t.opts.scrollableContainer).offset().top+l&&n.parent().offset().top+a>0?(i=a,n.addClass("fr-above")):n.removeClass("fr-above")}return i}function o(n,i){var o=n.outerWidth();return n.parent().offset().left+i+o>e(t.opts.scrollableContainer).width()-10&&(i=e(t.opts.scrollableContainer).width()-o-10-n.parent().offset().left+e(t.opts.scrollableContainer).offset().left),n.parent().offset().left+i<e(t.opts.scrollableContainer).offset().left&&(i=10-n.parent().offset().left+e(t.opts.scrollableContainer).offset().left),i}function r(i){var o=n();i.css("top",0).css("left",0);var r=o.top+o.height,a=o.left+o.width/2-i.outerWidth()/2+e(t.o_win).scrollLeft();t.opts.iframe||(r+=e(t.o_win).scrollTop()),s(a,r,i,o.height)}function s(e,n,r,s){var a=r.data("container");a&&"BODY"!=a.get(0).tagName&&(e&&(e-=a.offset().left),n&&(n-=a.offset().top-a.scrollTop())),t.opts.iframe&&a&&t.$tb&&a.get(0)!=t.$tb.get(0)&&(e&&(e+=t.$iframe.offset().left),n&&(n+=t.$iframe.offset().top));var l=o(r,e);if(e){r.css("left",l);var c=r.find(".fr-arrow");c.data("margin-left")||c.data("margin-left",t.helpers.getPX(c.css("margin-left"))),c.css("margin-left",e-l+c.data("margin-left"))}n&&r.css("top",i(r,n,s))}function a(n){var i=e(n),o=i.is(".fr-sticky-on"),r=i.data("sticky-top"),s=i.data("sticky-scheduled");if("undefined"==typeof r){i.data("sticky-top",0);var a=e('<div class="fr-sticky-dummy" style="height: '+i.outerHeight()+'px;"></div>');t.$box.prepend(a)}else t.$box.find(".fr-sticky-dummy").css("height",i.outerHeight());if(t.core.hasFocus()||t.$tb.find("input:visible:focus").length>0){var l=e(window).scrollTop(),c=Math.min(Math.max(l-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-i.outerHeight());c!=r&&c!=s&&(clearTimeout(i.data("sticky-timeout")),i.data("sticky-scheduled",c),i.outerHeight()<l-t.$tb.parent().offset().top&&i.addClass("fr-opacity-0"),i.data("sticky-timeout",setTimeout(function(){var n=e(window).scrollTop(),o=Math.min(Math.max(n-t.$tb.parent().offset().top,0),t.$tb.parent().outerHeight()-i.outerHeight());o>0&&"BODY"==t.$tb.parent().get(0).tagName&&(o+=t.$tb.parent().position().top),o!=r&&(i.css("top",Math.max(o,0)),i.data("sticky-top",o),i.data("sticky-scheduled",o)),i.removeClass("fr-opacity-0")},100))),o||(i.css("top","0"),i.width(t.$tb.parent().width()),i.addClass("fr-sticky-on"),t.$box.addClass("fr-sticky-box"))}else clearTimeout(e(n).css("sticky-timeout")),i.css("top","0"),i.css("position",""),i.width(""),i.data("sticky-top",0),i.removeClass("fr-sticky-on"),t.$box.removeClass("fr-sticky-box")}function l(n){if(n.offsetWidth){var i,o,r=e(n),s=r.outerHeight(),a=r.data("sticky-position"),l=e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer).outerHeight(),c=0,u=0;"body"!==t.opts.scrollableContainer&&(c=e(t.opts.scrollableContainer).offset().top,u=e(t.o_win).outerHeight()-c-l);var d="body"==t.opts.scrollableContainer?e(t.o_win).scrollTop():c,p=r.is(".fr-sticky-on");r.data("sticky-parent")||r.data("sticky-parent",r.parent());var f=r.data("sticky-parent"),h=f.offset().top,g=f.outerHeight();if(r.data("sticky-offset")||(r.data("sticky-offset",!0),r.after('<div class="fr-sticky-dummy" style="height: '+s+'px;"></div>')),!a){var m="auto"!==r.css("top")||"auto"!==r.css("bottom");m||r.css("position","fixed"),a={top:"auto"!==r.css("top"),bottom:"auto"!==r.css("bottom")},m||r.css("position",""),r.data("sticky-position",a),r.data("top",r.css("top")),r.data("bottom",r.css("bottom"))}var v=function(){return d+i>h&&h+g-s>=d+i},b=function(){return d+l-o>h+s&&h+g>d+l-o};i=t.helpers.getPX(r.data("top")),o=t.helpers.getPX(r.data("bottom"));var y=a.top&&v(),w=a.bottom&&b();y||w?(r.css("width",f.width()+"px"),p||(r.addClass("fr-sticky-on"),r.removeClass("fr-sticky-off"),r.css("top")&&("auto"!=r.data("top")?r.css("top",t.helpers.getPX(r.data("top"))+c):r.data("top","auto")),r.css("bottom")&&("auto"!=r.data("bottom")?r.css("bottom",t.helpers.getPX(r.data("bottom"))+u):r.css("bottom","auto")))):r.hasClass("fr-sticky-off")||(r.width(""),r.removeClass("fr-sticky-on"),r.addClass("fr-sticky-off"),r.css("top")&&"auto"!=r.css("top")&&r.css("top",0),r.css("bottom")&&r.css("bottom",0))}}function c(){var e=document.createElement("test"),n=e.style;return n.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==n.position.indexOf("sticky")&&!t.helpers.isIOS()&&!t.helpers.isAndroid()}function u(){if(!c())if(t._stickyElements=[],t.helpers.isIOS()){var n=function(){t.helpers.requestAnimationFrame()(n);for(var e=0;e<t._stickyElements.length;e++)a(t._stickyElements[e])};n(),t.events.$on(e(t.o_win),"scroll",function(){if(t.core.hasFocus())for(var n=0;n<t._stickyElements.length;n++){var i=e(t._stickyElements[n]),o=i.parent(),r=e(window).scrollTop();i.outerHeight()<r-o.offset().top&&(i.addClass("fr-opacity-0"),i.data("sticky-top",-1),i.data("sticky-scheduled",-1))}},!0)}else t.events.$on(e("body"==t.opts.scrollableContainer?t.o_win:t.opts.scrollableContainer),"scroll",d,!0),t.events.$on(e(t.o_win),"resize",d,!0),t.events.on("initialized",d),t.events.on("focus",d),t.events.$on(e(t.o_win),"resize","textarea",d,!0)}function d(){for(var e=0;e<t._stickyElements.length;e++)l(t._stickyElements[e])}function p(e){e.addClass("fr-sticky"),t.helpers.isIOS()&&e.addClass("fr-sticky-ios"),c()||t._stickyElements.push(e.get(0))}function f(){u()}return{_init:f,forSelection:r,addSticky:p,refresh:d,at:s,getBoundingRect:n}},e.extend(e.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","fontFamily","fontSize","|","color","emoticons","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting","selectAll","html"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:["fullscreen","bold","italic","underline","fontFamily","fontSize","color","paragraphStyle","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","insertHR","-","insertLink","insertImage","insertVideo","insertFile","insertTable","undo","redo","clearFormatting"],toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),e.FE.MODULES.toolbar=function(t){function n(e,t){for(var n=0;n<t.length;n++)"-"!=t[n]&&"|"!=t[n]&&e.indexOf(t[n])<0&&e.push(t[n])}function i(){var i=e.merge([],o());n(i,t.opts.toolbarButtonsXS||[]),n(i,t.opts.toolbarButtonsSM||[]),n(i,t.opts.toolbarButtonsMD||[]),n(i,t.opts.toolbarButtons);for(var r=i.length-1;r>=0;r--)"-"!=i[r]&&"|"!=i[r]&&i.indexOf(i[r])<r&&i.splice(r,1);var s=t.button.buildList(i,o());t.$tb.append(s),t.button.bindCommands(t.$tb)}function o(){var e=t.helpers.screenSize();return w[e]}function r(){var e=o();t.$tb.find(".fr-separator").remove(),t.$tb.find("> .fr-command").addClass("fr-hidden");for(var n=0;n<e.length;n++)if("|"==e[n]||"-"==e[n])t.$tb.append(t.button.buildList([e[n]]));else{var i=t.$tb.find('> .fr-command[data-cmd="'+e[n]+'"]'),r=null;i.next().hasClass("fr-dropdown-menu")&&(r=i.next()),i.removeClass("fr-hidden").appendTo(t.$tb),r&&r.appendTo(t.$tb)}}function s(){t.events.$on(e(t.o_win),"resize",r,!0),t.events.$on(e(t.o_win),"orientationchange",r,!0)}function a(n,i){setTimeout(function(){if(n&&n.which==e.FE.KEYCODE.ESC);else if(t.selection.inEditor()&&t.core.hasFocus()&&!t.popups.areVisible()&&(t.opts.toolbarVisibleWithoutSelection&&n&&"keyup"!=n.type||!t.selection.isCollapsed()&&!t.keys.isIME()||i)){if(t.$tb.data("instance",t),0==t.events.trigger("toolbar.show",[n]))return!1;t.opts.toolbarContainer||t.position.forSelection(t.$tb),t.$tb.show()}},0)}function l(){return 0==t.events.trigger("toolbar.hide")?!1:void t.$tb.hide()}function c(){return 0==t.events.trigger("toolbar.show")?!1:void t.$tb.show()}function u(){t.events.on("window.mousedown",l),t.events.on("keydown",l),t.events.on("blur",l),t.events.on("window.mouseup",a),t.helpers.isMobile()?t.helpers.isIOS()||(t.events.on("window.touchend",a),t.browser.mozilla&&setInterval(a,200)):t.events.on("window.keyup",a),t.events.on("keydown",function(t){t&&t.which==e.FE.KEYCODE.ESC&&l()}),t.events.$on(t.$wp,"scroll.toolbar",a),t.events.on("commands.after",a),t.helpers.isMobile()&&(t.events.$on(t.$doc,"selectionchange",a),t.events.$on(t.$doc,"orientationchange",a))}function d(){t.opts.toolbarInline?(e(t.opts.scrollableContainer).append(t.$tb),t.$tb.data("container",e(t.opts.scrollableContainer)),t.$tb.addClass("fr-inline"),t.$tb.prepend('<span class="fr-arrow"></span>'),u(),t.opts.toolbarBottom=!1):(t.opts.toolbarBottom&&!t.helpers.isIOS()?(t.$box.append(t.$tb),t.$tb.addClass("fr-bottom"),t.$box.addClass("fr-bottom")):(t.opts.toolbarBottom=!1,t.$box.prepend(t.$tb),t.$tb.addClass("fr-top"),t.$box.addClass("fr-top")),t.$tb.addClass("fr-basic"),t.opts.toolbarSticky&&(t.opts.toolbarStickyOffset&&(t.opts.toolbarBottom?t.$tb.css("bottom",t.opts.toolbarStickyOffset):t.$tb.css("top",t.opts.toolbarStickyOffset)),t.position.addSticky(t.$tb)))}function p(){t.$tb.html("").removeData().remove()}function f(){t.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),t.$box.find(".fr-sticky-dummy").remove()}function h(){t.opts.theme&&t.$tb.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+1),"auto"!=t.opts.direction&&t.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),t.helpers.isMobile()?t.$tb.addClass("fr-mobile"):t.$tb.addClass("fr-desktop"),t.opts.toolbarContainer?(t.opts.toolbarInline&&(u(),l()),t.opts.toolbarBottom?t.$tb.addClass("fr-bottom"):t.$tb.addClass("fr-top")):d(),b=t.$tb.get(0).ownerDocument,y="defaultView"in b?b.defaultView:b.parentWindow,i(),s(),t.events.$on(t.$tb,t._mousedown+" "+t._mouseup,function(e){var t=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;return t&&"INPUT"!=t.tagName?(e.stopPropagation(),e.preventDefault(),!1):void 0},!0)}function g(){return t.$wp?(t.opts.toolbarContainer?(t.shared.$tb?(t.$tb=t.shared.$tb,t.opts.toolbarInline&&u()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,e(t.opts.toolbarContainer).append(t.$tb),h(),t.$tb.data("instance",t)),t.events.on("focus",function(){t.$tb.data("instance",t)},!0),t.opts.toolbarInline=!1):t.opts.toolbarInline?(t.$box.addClass("fr-inline"),t.shared.$tb?(t.$tb=t.shared.$tb,u()):(t.shared.$tb=e('<div class="fr-toolbar"></div>'),t.$tb=t.shared.$tb,h())):(t.$box.addClass("fr-basic"),t.$tb=e('<div class="fr-toolbar"></div>'),h(),t.$tb.data("instance",t)),t.events.on("destroy",f,!0),void t.events.on(t.opts.toolbarInline?"shared.destroy":"destroy",p,!0)):!1}function m(){!E&&t.$tb&&(t.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh"),E=!0)}function v(){E&&t.$tb&&(t.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh"),E=!1),t.button.bulkRefresh()}var b,y,w=[];w[e.FE.XS]=t.opts.toolbarButtonsXS||t.opts.toolbarButtons,w[e.FE.SM]=t.opts.toolbarButtonsSM||t.opts.toolbarButtons,w[e.FE.MD]=t.opts.toolbarButtonsMD||t.opts.toolbarButtons,w[e.FE.LG]=t.opts.toolbarButtons;var E=!1;return{_init:g,hide:l,show:c,showInline:a,disable:m,enable:v}},e.FE.SHORTCUTS_MAP={69:{cmd:"show"},66:{cmd:"bold"},73:{cmd:"italic"},85:{cmd:"underline"},83:{cmd:"strikeThrough"},221:{cmd:"indent"},219:{cmd:"outdent"},90:{cmd:"undo"},"-90":{cmd:"redo"}},e.extend(e.FE.DEFAULTS,{shortcutsEnabled:["show","bold","italic","underline","strikeThrough","indent","outdent","undo","redo"]}),e.FE.RegisterShortcut=function(t,n,i,o){e.FE.SHORTCUTS_MAP[t*(o?-1:1)]={cmd:n,val:i},e.FE.DEFAULTS.shortcutsEnabled.push(n)},e.FE.MODULES.shortcuts=function(t){function n(n){if(!t.core.hasFocus())return!0;var i=n.which;if(t.keys.ctrlKey(n)&&(n.shiftKey&&e.FE.SHORTCUTS_MAP[-i]||!n.shiftKey&&e.FE.SHORTCUTS_MAP[i])){var o=e.FE.SHORTCUTS_MAP[i*(n.shiftKey?-1:1)].cmd;if(o&&t.opts.shortcutsEnabled.indexOf(o)>=0){var r,s=e.FE.SHORTCUTS_MAP[i*(n.shiftKey?-1:1)].val;if(o&&!s?r=t.$tb.find('.fr-command[data-cmd="'+o+'"]'):o&&s&&(r=t.$tb.find('.fr-command[data-cmd="'+o+'"][data-param1="'+s+'"]')),r.length)return n.preventDefault(),n.stopPropagation(),r.parents(".fr-toolbar").data("instance",t),"keydown"==n.type&&t.button.exec(r),!1;if(o&&t.commands[o])return n.preventDefault(),n.stopPropagation(),"keydown"==n.type&&t.commands[o](),!1}}}function i(){t.events.on("keydown",n,!0),t.events.on("keyup",n,!0)}return{_init:i}},e.FE.MODULES.snapshot=function(e){function t(e){for(var t=e.parentNode.childNodes,n=0,i=null,o=0;o<t.length;o++){if(i){var r=t[o].nodeType===Node.TEXT_NODE&&""===t[o].textContent,s=i.nodeType===Node.TEXT_NODE&&t[o].nodeType===Node.TEXT_NODE;r||s||n++}if(t[o]==e)return n;i=t[o]}}function n(n){var i=[];if(!n.parentNode)return[];for(;!e.node.isElement(n);)i.push(t(n)),n=n.parentNode;return i.reverse()}function i(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var n=e.previousSibling;n&&n.nodeType==Node.TEXT_NODE&&(t+=n.textContent.length),e=n}return t}function o(e){return{scLoc:n(e.startContainer),scOffset:i(e.startContainer,e.startOffset),ecLoc:n(e.endContainer),ecOffset:i(e.endContainer,e.endOffset)}}function r(){var t={};if(e.events.trigger("snapshot.before"),t.html=e.$wp?e.$el.html():e.$oel.get(0).outerHTML,t.ranges=[],e.$wp&&e.selection.inEditor()&&e.core.hasFocus())for(var n=e.selection.ranges(),i=0;i<n.length;i++)t.ranges.push(o(n[i]));return e.events.trigger("snapshot.after"),t}function s(t){for(var n=e.$el.get(0),i=0;i<t.length;i++)n=n.childNodes[t[i]];return n}function a(t,n){try{var i=s(n.scLoc),o=n.scOffset,r=s(n.ecLoc),a=n.ecOffset,l=e.doc.createRange();l.setStart(i,o),l.setEnd(r,a),t.addRange(l)}catch(c){}}function l(t){e.$el.html()!=t.html&&e.$el.html(t.html);var n=e.selection.get();e.selection.clear(),e.events.focus(!0);for(var i=0;i<t.ranges.length;i++)a(n,t.ranges[i])}function c(t,n){return t.html!=n.html?!1:!e.core.hasFocus()||JSON.stringify(t.ranges)==JSON.stringify(n.ranges)}return{get:r,restore:l,equal:c}},e.FE.MODULES.undo=function(e){function t(t){var n=t.which,i=e.keys.ctrlKey(t);i&&(90==n&&t.shiftKey&&t.preventDefault(),90==n&&t.preventDefault())}function n(){return!(0===e.undo_stack.length||e.undo_index<=1)}function i(){return e.undo_index!=e.undo_stack.length}function o(t){return!e.undo_stack||e.undoing||e.$el.get(0).querySelectorAll(".fr-marker").length?!1:(r(),void("undefined"==typeof t?(t=e.snapshot.get(),e.undo_stack[e.undo_index-1]&&e.snapshot.equal(e.undo_stack[e.undo_index-1],t)||(e.undo_stack.push(t),e.undo_index++,t.html!=u&&(e.events.trigger("contentChanged"),u=t.html))):e.undo_index>0?e.undo_stack[e.undo_index-1]=t:(e.undo_stack.push(t),e.undo_index++)))}function r(){if(!e.undo_stack||e.undoing)return!1;
for(;e.undo_stack.length>e.undo_index;)e.undo_stack.pop()}function s(){if(e.undo_index>1){e.undoing=!0;var t=e.undo_stack[--e.undo_index-1];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.undo"),e.undoing=!1}}function a(){if(e.undo_index<e.undo_stack.length){e.undoing=!0;var t=e.undo_stack[e.undo_index++];clearTimeout(e._content_changed_timer),e.snapshot.restore(t),e.popups.hideAll(),e.toolbar.enable(),e.events.trigger("contentChanged"),e.events.trigger("commands.redo"),e.undoing=!1}}function l(){e.undo_index=0,e.undo_stack=[]}function c(){l(),e.events.on("initialized",function(){u=e.html.get(!1,!0)}),e.events.on("blur",function(){e.undo.saveStep()}),e.events.on("keydown",t)}var u=null;return{_init:c,run:s,redo:a,canDo:n,canRedo:i,dropRedo:r,reset:l,saveStep:o}},e.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},e.FE.RegisterTemplate=function(t,n){e.FE.POPUP_TEMPLATES[t]=n},e.FE.MODULES.popups=function(t){function n(n,i){i.is(":visible")||(i=e(t.opts.scrollableContainer)),i.is(C[n].data("container"))||(C[n].data("container",i),i.append(C[n]))}function i(i,o,a,l){if(s()&&t.$el.find(".fr-marker").length>0&&(t.events.disableBlur(),t.selection.restore()),p([i]),!C[i])return!1;e(".fr-dropdown.fr-active").removeClass("fr-active").parent(".fr-toolbar").css("zIndex",""),C[i].data("instance",t),t.$tb&&t.$tb.data("instance",t);var c=C[i].outerWidth(),u=(C[i].outerHeight(),r(i));C[i].addClass("fr-active").find("input, textarea").removeAttr("disabled");var d=C[i].data("container");d.is(t.$tb)&&t.$tb.css("zIndex",(t.opts.zIndex||1)+4),t.opts.toolbarInline&&d&&t.$tb&&d.get(0)==t.$tb.get(0)&&(n(i,t.opts.toolbarInline?e(t.opts.scrollableContainer):t.$box),a&&(a=t.$tb.offset().top-t.helpers.getPX(t.$tb.css("margin-top"))),o&&(o=t.$tb.offset().left+t.$tb.width()/2),t.$tb.hasClass("fr-above")&&a&&(a+=t.$tb.outerHeight()),l=0),d=C[i].data("container"),!t.opts.iframe||l||u||(o&&(o-=t.$iframe.offset().left),a&&(a-=t.$iframe.offset().top)),o&&(o-=c/2),t.opts.toolbarBottom&&d&&t.$tb&&d.get(0)==t.$tb.get(0)&&(C[i].addClass("fr-above"),a&&(a-=C[i].outerHeight())),C[i].removeClass("fr-active"),t.position.at(o,a,C[i],l||0),C[i].addClass("fr-active");var f=C[i].find("input:visible, textarea:visible").get(0);f&&(0==t.$el.find(".fr-marker").length&&t.core.hasFocus()&&t.selection.save(),t.events.disableBlur(),e(f).select().focus()),t.opts.toolbarInline&&t.toolbar.hide(),t.events.trigger("popups.show."+i)}function o(e,n){t.events.on("popups.show."+e,n)}function r(e){return C[e]&&C[e].hasClass("fr-active")&&t.core.sameInstance(C[e])||!1}function s(e){for(var t in C)if(C.hasOwnProperty(t)&&r(t)&&("undefined"==typeof e||C[t].data("instance")==e))return!0;return!1}function a(e){C[e]&&C[e].hasClass("fr-active")&&(C[e].removeClass("fr-active fr-above"),t.events.trigger("popups.hide."+e),t.$tb&&(t.opts.zIndex>1?t.$tb.css("zIndex",t.opts.zIndex+1):t.$tb.css("zIndex","")),t.events.disableBlur(),C[e].find("input, textarea, button").filter(":focus").blur(),C[e].find("input, textarea").attr("disabled","disabled"))}function l(e,n){t.events.on("popups.hide."+e,n)}function c(e){var n=C[e];if(n&&!n.data("inst"+t.id)){var i=b(e);y(i,e)}return n}function u(e,n){t.events.on("popups.refresh."+e,n)}function d(n){t.events.trigger("popups.refresh."+n);for(var i=C[n].find(".fr-command"),o=0;o<i.length;o++){var r=e(i[o]);0==r.parents(".fr-dropdown-menu").length&&t.button.refresh(r)}}function p(e){"undefined"==typeof e&&(e=[]);for(var t in C)C.hasOwnProperty(t)&&e.indexOf(t)<0&&a(t)}function f(){t.shared.exit_flag=!0}function h(){t.shared.exit_flag=!1}function g(){return t.shared.exit_flag}function m(n,i){var o=e.FE.POPUP_TEMPLATES[n];"function"==typeof o&&(o=o.apply(t));for(var r in i)i.hasOwnProperty(r)&&(o=o.replace("[_"+r.toUpperCase()+"_]",i[r]));return o}function v(n,i){var o=m(n,i),r=e('<div class="fr-popup'+(t.helpers.isMobile()?" fr-mobile":" fr-desktop")+(t.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+o+"</div>");t.opts.theme&&r.addClass(t.opts.theme+"-theme"),t.opts.zIndex>1&&t.$tb.css("z-index",t.opts.zIndex+2),"auto"!=t.opts.direction&&r.removeClass("fr-ltr fr-rtl").addClass("fr-"+t.opts.direction),r.find("input, textarea").attr("dir",t.opts.direction).attr("disabled","disabled");var s=e("body");return s.append(r),r.data("container",s),C[n]=r,t.button.bindCommands(r,!1),r}function b(n){var i=C[n];return{_windowResize:function(){var e=i.data("instance")||t;!e.helpers.isMobile()&&i.is(":visible")&&(e.events.disableBlur(),e.popups.hide(n),e.events.enableBlur())},_inputFocus:function(n){var o=i.data("instance")||t;if(n.preventDefault(),n.stopPropagation(),setTimeout(function(){o.events.enableBlur()},0),o.helpers.isMobile()){var r=e(o.o_win).scrollTop();setTimeout(function(){e(o.o_win).scrollTop(r)},0)}},_inputBlur:function(){var n=i.data("instance")||t;document.activeElement!=this&&e(this).is(":visible")&&(n.events.blurActive()&&n.events.trigger("blur"),n.events.enableBlur())},_inputKeydown:function(o){var s=i.data("instance")||t,a=o.which;if(e.FE.KEYCODE.TAB==a){o.preventDefault();var l=i.find("input, textarea, button, select").filter(":visible").not(":disabled").toArray();l.sort(function(t,n){return o.shiftKey?e(t).attr("tabIndex")<e(n).attr("tabIndex"):e(t).attr("tabIndex")>e(n).attr("tabIndex")}),s.events.disableBlur();var c=l.indexOf(this)+1;c==l.length&&(c=0),e(l[c]).focus()}else if(e.FE.KEYCODE.ENTER==a)i.find(".fr-submit:visible").length>0&&(o.preventDefault(),o.stopPropagation(),s.events.disableBlur(),s.button.exec(i.find(".fr-submit:visible:first")));else{if(e.FE.KEYCODE.ESC==a)return o.preventDefault(),o.stopPropagation(),s.$el.find(".fr-marker")&&(s.events.disableBlur(),e(this).data("skip",!0),s.selection.restore(),s.events.enableBlur()),r(n)&&i.find(".fr-back:visible").length?s.button.exec(i.find(".fr-back:visible:first")):s.popups.hide(n),s.opts.toolbarInline&&s.toolbar.showInline(null,!0),!1;o.stopPropagation()}},_windowKeydown:function(o){if(!t.core.sameInstance(i))return!0;var s=i.data("instance")||t,a=o.which;if(e.FE.KEYCODE.ESC==a){if(r(n)&&s.opts.toolbarInline)return o.stopPropagation(),r(n)&&i.find(".fr-back:visible").length?s.button.exec(i.find(".fr-back:visible:first")):(s.popups.hide(n),s.toolbar.showInline(null,!0)),!1;r(n)&&i.find(".fr-back:visible").length?s.button.exec(i.find(".fr-back:visible:first")):s.popups.hide(n)}},_editorKeydown:function(o){var s=i.data("instance")||t;s.keys.ctrlKey(o)||o.which==e.FE.KEYCODE.ESC||(r(n)&&i.find(".fr-back:visible").length?s.button.exec(i.find(".fr-back:visible:first")):s.popups.hide(n))},_preventFocus:function(n){var o=i.data("instance")||t;o.events.disableBlur();var r=n.originalEvent?n.originalEvent.target||n.originalEvent.originalTarget:null,s="input, textarea, button, select, label, .fr-command";return r&&!e(r).is(s)&&0===e(r).parents(s).length?(n.stopPropagation(),!1):void(r&&e(r).is(s)&&n.stopPropagation())},_editorMouseup:function(){i.is(":visible")&&g()&&i.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length>0&&t.events.disableBlur()},_windowMouseup:function(e){if(!t.core.sameInstance(i))return!0;var o=i.data("instance")||t;i.is(":visible")&&g()&&(e.stopPropagation(),o.markers.remove(),o.popups.hide(n),h())},_doPlaceholder:function(){var t=e(this).next();0==t.length&&e(this).after("<span>"+e(this).attr("placeholder")+"</span>"),e(this).toggleClass("fr-not-empty",""!=e(this).val())},_repositionPopup:function(){if(r(n)&&i.parent().get(0)==e(t.opts.scrollableContainer).get(0)){var o=i.offset().top-t.$wp.offset().top,s=(t.$wp.scrollTop(),t.$wp.outerHeight());o>s||0>o?i.addClass("fr-hidden"):i.removeClass("fr-hidden")}}}}function y(e,n){t.events.on("mouseup",e._editorMouseup,!0),t.$wp&&t.events.on("keydown",e._editorKeydown),t.events.on("blur",function(){s()&&t.markers.remove(),p()}),t.$wp&&!t.helpers.isMobile()&&t.events.$on(t.$wp,"scroll.popup"+n,e._repositionPopup),t.events.on("window.keydown",e._windowKeydown),t.events.on("window.mouseup",e._windowMouseup,!0),C[n].data("inst"+t.id,!0),t.events.on("destroy",function(){t.core.sameInstance(C[n])&&C[n].removeClass("fr-active").appendTo("body")},!0)}function w(n,i){var o=v(n,i),r=b(n);return y(r,n),t.events.$on(o,"mousedown mouseup touchstart touchend touch","*",r._preventFocus,!0),t.events.$on(o,"focus","input, textarea, button, select",r._inputFocus,!0),t.events.$on(o,"blur","input, textarea, button, select",r._inputBlur,!0),t.events.$on(o,"keydown","input, textarea, button, select",r._inputKeydown,!0),t.events.$on(o,"keydown keyup change input","input, textarea",r._doPlaceholder,!0),t.helpers.isIOS()&&t.events.$on(o,"touchend","label",function(){e("#"+e(this).attr("for")).prop("checked",function(e,t){return!t})},!0),t.events.$on(e(t.o_win),"resize",r._windowResize,!0),o}function E(){for(var e in C)if(C.hasOwnProperty(e)){var t=C[e];t.html("").removeData().remove()}}function x(){t.events.on("shared.destroy",E,!0),t.events.on("window.mousedown",f),t.events.on("window.touchmove",h),t.events.on("mousedown",function(e){s()&&(e.stopPropagation(),t.$el.find(".fr-marker").remove(),f(),t.events.disableBlur())})}t.shared.popups||(t.shared.popups={});var C=t.shared.popups;return t.shared.exit_flag=!1,{_init:x,create:w,get:c,show:i,hide:a,onHide:l,hideAll:p,setContainer:n,refresh:d,onRefresh:u,onShow:o,isVisible:r,areVisible:s}},e.FE.MODULES.refresh=function(t){function n(e,n){try{t.doc.queryCommandState(n)===!0&&e.addClass("fr-active")}catch(i){}}function i(e){e.toggleClass("fr-disabled",!t.undo.canDo())}function o(e){e.toggleClass("fr-disabled",!t.undo.canRedo())}function r(e){if(e.hasClass("fr-no-refresh"))return!1;for(var n=t.selection.blocks(),i=0;i<n.length;i++){for(var o=n[i].previousSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.previousSibling;if("LI"!=n[i].tagName||o)return e.removeClass("fr-disabled"),!0;e.addClass("fr-disabled")}}function s(n){if(n.hasClass("fr-no-refresh"))return!1;for(var i=t.selection.blocks(),o=0;o<i.length;o++){var r="rtl"==t.opts.direction||"rtl"==e(i[o]).css("direction")?"margin-right":"margin-left";if("LI"==i[o].tagName||"LI"==i[o].parentNode.tagName)return n.removeClass("fr-disabled"),!0;if(t.helpers.getPX(e(i[o]).css(r))>0)return n.removeClass("fr-disabled"),!0}n.addClass("fr-disabled")}return{"default":n,undo:i,redo:o,outdent:s,indent:r}},e.extend(e.FE.DEFAULTS,{editInPopup:!1}),e.FE.MODULES.textEdit=function(t){function n(){var e='<div id="fr-text-edit-'+t.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+t.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>",n={edit:e};t.popups.create("text.edit",n)}function i(){var n,i=t.popups.get("text.edit");n="INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder"):t.$el.text(),i.find("input").val(n).trigger("change"),t.popups.setContainer("text.edit",e("body")),t.popups.show("text.edit",t.$el.offset().left+t.$el.outerWidth()/2,t.$el.offset().top+t.$el.outerHeight(),t.$el.outerHeight())}function o(){t.events.$on(t.$el,t._mouseup,function(){setTimeout(function(){i()},10)})}function r(){var e=t.popups.get("text.edit"),n=e.find("input").val();0==n.length&&(n=t.opts.placeholderText),"INPUT"===t.$el.prop("tagName")?t.$el.attr("placeholder",n):t.$el.text(n),t.events.trigger("contentChanged"),t.popups.hide("text.edit")}function s(){t.opts.editInPopup&&(n(),o())}return{_init:s,update:r}},e.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_]"}),e.extend(e.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),e.FE.PLUGINS.colors=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="color"]'),n=t.popups.get("colors.picker");if(n||(n=o()),!n.hasClass("fr-active")){t.popups.setContainer("colors.picker",t.$tb),a(n.find(".fr-selected-tab").attr("data-param1"));var i=e.offset().left+e.outerWidth()/2,r=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("colors.picker",i,r,e.outerHeight())}}function i(){t.popups.hide("colors.picker")}function o(){var e='<div class="fr-buttons fr-colors-buttons">';t.opts.toolbarInline&&t.opts.colorsButtons.length>0&&(e+=t.button.buildList(t.opts.colorsButtons)),e+=r()+"</div>";var n={buttons:e,text_colors:s("text"),background_colors:s("background")},i=t.popups.create("colors.picker",n);return i}function r(){var e='<div class="fr-colors-tabs">';return e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" data-param1="text" data-cmd="colorChangeSet" title="'+t.language.translate("Text")+'">'+t.language.translate("Text")+"</span>",e+='<span class="fr-colors-tab '+("background"==t.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" data-param1="background" data-cmd="colorChangeSet" title="'+t.language.translate("Background")+'">'+t.language.translate("Background")+"</span>",e+"</div>"}function s(e){for(var n="text"==e?t.opts.colorsText:t.opts.colorsBackground,i='<div class="fr-color-set fr-'+e+"-color"+(t.opts.colorsDefaultTab==e||"text"!=t.opts.colorsDefaultTab&&"background"!=t.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',o=0;o<n.length;o++)0!==o&&o%t.opts.colorsStep===0&&(i+="<br>"),i+="REMOVE"!=n[o]?'<span class="fr-command fr-select-color" style="background: '+n[o]+';" data-cmd="'+e+'Color" data-param1="'+n[o]+'"></span>':'<span class="fr-command fr-select-color" data-cmd="'+e+'Color" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i></span>';return i+"</div>"}function a(n){var i,o=t.popups.get("colors.picker"),r=e(t.selection.element());for(i="background"==n?"background-color":"color",o.find(".fr-"+n+"-color .fr-select-color").removeClass("fr-selected-color");r.get(0)!=t.$el.get(0);){if("transparent"!=r.css(i)&&"rgba(0, 0, 0, 0)"!=r.css(i)){o.find(".fr-"+n+'-color .fr-select-color[data-param1="'+t.helpers.RGBToHex(r.css(i))+'"]').addClass("fr-selected-color");break}r=r.parent()}}function l(e,t){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab"),e.addClass("fr-selected-tab"),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+t+"-color").addClass("fr-selected-set"),a(t))}function c(n){"REMOVE"!=n?t.commands.applyProperty("background-color",t.helpers.HEXtoRGB(n)):(t.commands.applyProperty("background-color","#123456"),t.selection.save(),t.$el.find("span").each(function(n,i){var o=e(i),r=o.css("background-color");("#123456"===r||"#123456"===t.helpers.RGBToHex(r))&&o.replaceWith(o.html())}),t.selection.restore()),i()}function u(n){"REMOVE"!=n?t.commands.applyProperty("color",t.helpers.HEXtoRGB(n)):(t.commands.applyProperty("color","#123456"),t.selection.save(),t.$el.find("span").each(function(n,i){var o=e(i),r=o.css("color");("#123456"===r||"#123456"===t.helpers.RGBToHex(r))&&o.replaceWith(o.html())}),t.selection.restore()),i()}function d(){t.popups.hide("colors.picker"),t.toolbar.showInline()}return{showColorsPopup:n,hideColorsPopup:i,changeSet:l,background:c,text:u,back:d}},e.FE.DefineIcon("colors",{NAME:"tint"}),e.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),e.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),e.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),e.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var n=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(n,t)}}),e.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),e.FE.PLUGINS.fontFamily=function(t){function n(e){t.commands.applyProperty("font-family",e)}function i(e,t){t.find(".fr-command.fr-active").removeClass("fr-active"),t.find('.fr-command[data-param1="'+s()+'"]').addClass("fr-active");var n=t.find(".fr-dropdown-list"),i=t.find(".fr-active").parent();i.length?n.parent().scrollTop(i.offset().top-n.offset().top-(n.parent().outerHeight()/2-i.outerHeight()/2)):n.parent().scrollTop(0)}function o(t){var n=t.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return e.grep(n,function(e){return e.length>0})}function r(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)if(e[n]==t[i])return[n,i];return null}function s(){var n=e(t.selection.element()).css("font-family"),i=o(n),s=[];for(var a in t.opts.fontFamily)if(t.opts.fontFamily.hasOwnProperty(a)){var l=o(a),c=r(i,l);c&&s.push([a,c])}return 0===s.length?null:(s.sort(function(e,t){var n=e[1][0]-t[1][0];return 0===n?e[1][1]-t[1][1]:n}),s[0][0])}function a(n){if(t.opts.fontFamilySelection){var i=e(t.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");n.find("> span").text(t.opts.fontFamily[s()]||i[0]||t.opts.fontFamilyDefaultSelection)}}return{apply:n,refreshOnShow:i,refresh:a}},e.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.fontFamily;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" data-cmd="fontFamily" data-param1="'+n+'" style="font-family: '+n+'" title="'+t[n]+'">'+t[n]+"</a></li>");return e+="</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),e.FE.DefineIcon("fontFamily",{NAME:"font"})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),e.FE.PLUGINS.fontSize=function(t){function n(e){t.commands.applyProperty("font-size",e)}function i(n,i){var o=e(t.selection.element()).css("font-size");i.find(".fr-command.fr-active").removeClass("fr-active"),i.find('.fr-command[data-param1="'+o+'"]').addClass("fr-active");var r=i.find(".fr-dropdown-list"),s=i.find(".fr-active").parent();s.length?r.parent().scrollTop(s.offset().top-r.offset().top-(r.parent().outerHeight()/2-s.outerHeight()/2)):r.parent().scrollTop(0)}function o(n){if(t.opts.fontSizeSelection){var i=t.helpers.getPX(e(t.selection.element()).css("font-size"));n.find("> span").text(i)}}return{apply:n,refreshOnShow:i,refresh:o}},e.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list">',t=this.opts.fontSize,n=0;n<t.length;n++){var i=t[n];e+='<li><a class="fr-command" data-cmd="fontSize" data-param1="'+i+'px" title="'+i+'">'+i+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),e.FE.DefineIcon("fontSize",{NAME:"text-height"})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"http://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imageMinWidth:16,imageOutputSize:!1}),e.FE.PLUGINS.image=function(t){function n(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");n.val(""),me&&n.val(me.attr("src")),n.trigger("change")}function i(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),n=t.popups.get("image.insert");if(n||(n=M()),v(),!n.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",i,o,e.outerHeight())}else t.position.forSelection(n),t.popups.show("image.insert")}function o(){var n=t.popups.get("image.edit");n||(n=g()),t.popups.setContainer("image.edit",e(t.opts.scrollableContainer)),t.popups.refresh("image.edit");var i=me.offset().left+me.outerWidth()/2,o=me.offset().top+me.outerHeight();t.popups.show("image.edit",i,o,me.outerHeight())}function r(){v()}function s(e){if(!e.hasClass("fr-dii")&&!e.hasClass("fr-dib")){var n=e.css("float");e.css("float","none"),"block"==e.css("display")?(e.css("float",n),t.opts.imageEditButtons.indexOf("imageAlign")>=0&&(0===parseInt(e.css("margin-left"),10)&&(e.attr("style")||"").indexOf("margin-right: auto")>=0?e.addClass("fr-fil"):0===parseInt(e.css("margin-right"),10)&&(e.attr("style")||"").indexOf("margin-left: auto")>=0&&e.addClass("fr-fir")),e.addClass("fr-dib")):(e.css("float",n),t.opts.imageEditButtons.indexOf("imageAlign")>=0&&("left"==e.css("float")?e.addClass("fr-fil"):"right"==e.css("float")&&e.addClass("fr-fir")),e.addClass("fr-dii")),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align","")}}function a(){for(var n="IMG"==t.$el.get(0).tagName?[t.$el.get(0)]:t.$el.get(0).querySelectorAll("img"),i=0;i<n.length;i++){var o=e(n[i]);(t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&s(o),o.attr("width")&&(o.css("width",o.width()),o.removeAttr("width")),t.opts.imageTextNear||o.removeClass("fr-dii").addClass("fr-dib"),t.opts.iframe&&o.on("load",t.size.syncIframe)}}function l(){var n,i=Array.prototype.slice.call(t.$el.get(0).querySelectorAll("img")),o=[];for(n=0;n<i.length;n++)o.push(i[n].getAttribute("src")),e(i[n]).toggleClass("fr-draggable",t.opts.imageMove);if(Ae)for(n=0;n<Ae.length;n++)o.indexOf(Ae[n].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Ae[n])]);Ae=i}function c(){ve||V();var n=t.$wp||e(t.opts.scrollableContainer);n.append(ve),ve.data("instance",t);var i=n.scrollTop()-("static"!=n.css("position")?n.offset().top:0),o=n.scrollLeft()-("static"!=n.css("position")?n.offset().left:0);o-=t.helpers.getPX(n.css("border-left-width")),i-=t.helpers.getPX(n.css("border-top-width")),ve.css("top",(t.opts.iframe?me.offset().top:me.offset().top+i)-1).css("left",(t.opts.iframe?me.offset().left:me.offset().left+o)-1).css("width",me.get(0).getBoundingClientRect().width).css("height",me.get(0).getBoundingClientRect().height).addClass("fr-active")}function u(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function d(n){if(!t.core.sameInstance(ve))return!0;if(n.preventDefault(),n.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep(),be=e(this),be.data("start-x",n.pageX||n.originalEvent.touches[0].pageX),be.data("start-width",me.width()),be.data("start-height",me.height());var i=me.width();if(t.opts.imageResizeWithPercent){var o=me.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.$el.get(0);me.css("width",(i/e(o).outerWidth()*100).toFixed(2)+"%")}else me.css("width",i);ye.show(),t.popups.hideAll(),oe()}function p(n){if(!t.core.sameInstance(ve))return!0;if(be&&me){if(n.preventDefault(),t.$el.find("img.fr-error").left)return!1;var i=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null);if(!i)return!1;var o=be.data("start-x"),r=i-o,s=be.data("start-width");if((be.hasClass("fr-hnw")||be.hasClass("fr-hsw"))&&(r=0-r),t.opts.imageResizeWithPercent){var a=me.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.$el.get(0);s=((s+r)/e(a).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(s=Math.round(s)),me.css("width",s+"%"),me.css("height","").removeAttr("height")}else s+r>=t.opts.imageMinWidth&&me.css("width",s+r),me.css("height",be.data("start-height")*me.width()/be.data("start-width"));c(),t.events.trigger("image.resize",[he()])}}function f(e){if(!t.core.sameInstance(ve))return!0;if(be&&me){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;be=null,ye.hide(),c(),o(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[he()])}}function h(e,n){t.edit.on(),me&&me.addClass("fr-error"),y(t.language.translate("Something went wrong. Please try again.")),t.events.trigger("image.error",[{code:e,message:_e[e]},n])}function g(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",function(){me&&t.popups.isVisible("image.edit")&&o()}),!0;var n="";t.opts.imageEditButtons.length>1&&(n+='<div class="fr-buttons">',n+=t.button.buildList(t.opts.imageEditButtons),n+="</div>");var i={buttons:n},r=t.popups.create("image.edit",i);return r}function m(n){var i=t.popups.get("image.insert");if(i||(i=M()),t.popups.setContainer("image.insert",e(t.opts.scrollableContainer)),i.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),i.find(".fr-image-progress-bar-layer").addClass("fr-active"),i.find(".fr-buttons").hide(),me){var o=me.offset().left+me.width()/2,r=me.offset().top+me.height();t.popups.show("image.insert",o,r,me.outerHeight())}"undefined"==typeof n&&b("Uploading",0)}function v(e){var n=t.popups.get("image.insert");n&&(n.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),n.find(".fr-image-progress-bar-layer").removeClass("fr-active"),n.find(".fr-buttons").show(),(e||t.$el.find("img.fr-error").length)&&(t.events.focus(),t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()))}function b(e,n){var i=t.popups.get("image.insert");if(i){var o=i.find(".fr-image-progress-bar-layer");o.find("h3").text(e+(n?" "+n+"%":"")),o.removeClass("fr-error"),n?(o.find("div").removeClass("fr-indeterminate"),o.find("div > span").css("width",n+"%")):o.find("div").addClass("fr-indeterminate")}}function y(e){var n=t.popups.get("image.insert"),i=n.find(".fr-image-progress-bar-layer");i.addClass("fr-error"),i.find("h3").text(e)}function w(){var e=t.popups.get("image.insert"),n=e.find(".fr-image-by-url-layer input");n.val().length>0&&(m(),b("Loading image"),C(t.helpers.sanitizeURL(n.val()),!0,[],me),n.val(""),n.blur())}function E(e){te.call(e.get(0))}function x(){var n=e(this);t.popups.hide("image.insert"),n.removeClass("fr-uploading"),n.next().is("br")&&n.next().remove(),E(n),t.events.trigger("image.loaded",[n])}function C(e,n,i,o,r){t.edit.off(),b("Loading image");var s=new Image;s.onload=function(){var n,s;if(o){var a=o.data("fr-old-src");t.$wp?(n=o.clone().removeData("fr-old-src").removeClass("fr-uploading"),n.off("load"),a&&o.attr("src",a),o.replaceWith(n)):n=o;for(var c=n.get(0).attributes,u=0;u<c.length;u++){var d=c[u];0===d.nodeName.indexOf("data-")&&n.removeAttr(d.nodeName)}if("undefined"!=typeof i)for(s in i)i.hasOwnProperty(s)&&"link"!=s&&n.attr("data-"+s,i[s]);n.on("load",x),n.attr("src",e),t.edit.on(),l(),t.undo.saveStep(),t.events.trigger(a?"image.replaced":"image.inserted",[n,r])}else n=A(e,i,x),l(),t.undo.saveStep(),t.events.trigger("image.inserted",[n,r])},s.onerror=function(){h(Ee)},s.src=e}function S(n){try{if(t.events.trigger("image.uploaded",[n],!0)===!1)return t.edit.on(),!1;var i=e.parseJSON(n);return i.link?i:(h(xe,n),!1)}catch(o){return h(Se,n),!1}}function T(n){try{var i=e(n).find("Location").text(),o=e(n).find("Key").text();return t.events.trigger("image.uploadedToS3",[i,o,n],!0)===!1?(t.edit.on(),!1):i}catch(r){return h(Se,n),!1}}function k(e){b("Loading image");var n=this.status,i=this.response,o=this.responseXML,r=this.responseText;try{if(t.opts.imageUploadToS3)if(201==n){var s=T(o);s&&C(s,!1,[],e,i||o)}else h(Se,i||o);else if(n>=200&&300>n){var a=S(r);a&&C(a.link,!1,a,e,i||r)}else h(Ce,i||r)}catch(l){h(Se,i||r)}}function $(){h(Se,this.response||this.responseText||this.responseXML)}function _(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;b("Uploading",t)}}function A(n,i,o){var r,s="";if(i&&"undefined"!=typeof i)for(r in i)i.hasOwnProperty(r)&&"link"!=r&&(s+=" data-"+r+'="'+i[r]+'"');var a=t.opts.imageDefaultWidth||"auto";a&&"auto"!=a&&(""+a).indexOf("px")<0&&(""+a).indexOf("%")<0&&(a+="px");var l=e('<img class="fr-di'+t.opts.imageDefaultDisplay[0]+("center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+n+'"'+s+(a?' style="width: '+a+';"':"")+">");l.on("load",o),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert();var c=t.$el.find(".fr-marker");return c.replaceWith(l),t.html.wrap(),t.selection.clear(),l}function N(){t.edit.on(),v(!0)}function D(n,i,o){function r(){var o=e(this);o.off("load"),o.addClass("fr-uploading"),o.next().is("br")&&o.next().remove(),t.placeholder.refresh(),o.is(me)||E(o),c(),m(),t.edit.off(),n.onload=function(){k.call(n,o)},n.onerror=$,n.upload.onprogress=_,n.onabort=N,o.off("abortUpload").on("abortUpload",function(){4!=n.readyState&&n.abort()}),n.send(i)}var s,a=new FileReader;a.addEventListener("load",function(){var e=a.result;if(a.result.indexOf("svg+xml")<0){for(var n=atob(a.result.split(",")[1]),i=[],o=0;o<n.length;o++)i.push(n.charCodeAt(o));e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:"image/jpeg"}))}me?(me.on("load",r),t.edit.on(),t.undo.saveStep(),me.data("fr-old-src",me.attr("src")),me.attr("src",e)):s=A(e,null,r)},!1),a.readAsDataURL(o)}function O(e){if(t.events.trigger("image.beforeUpload",[e])===!1)return!1;if("undefined"!=typeof e&&e.length>0){var n=e[0];if(n.size>t.opts.imageMaxSize)return h(Te),!1;if(t.opts.imageAllowedTypes.indexOf(n.type.replace(/image\//g,""))<0)return h(ke),!1;var i;if(t.drag_support.formdata&&(i=t.drag_support.formdata?new FormData:null),i){var o;if(t.opts.imageUploadToS3!==!1){i.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",n.type);for(o in t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(o)&&i.append(o,t.opts.imageUploadToS3.params[o])}for(o in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(o)&&i.append(o,t.opts.imageUploadParams[o]);i.append(t.opts.imageUploadParam,n);var r=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(r="https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket);var s=t.core.getXHR(r,t.opts.imageUploadMethod);D(s,i,n)}}}function F(n){t.events.$on(n,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(n,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(n,"drop",".fr-image-upload-layer",function(i){i.preventDefault(),i.stopPropagation(),e(this).removeClass("fr-drop");var o=i.originalEvent.dataTransfer;if(o&&o.files){var r=n.data("instance")||t;r.image.upload(o.files)}}),t.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var i=n.data("instance")||t;i.image.upload(this.files)}e(this).val("")})}function I(n){var i=n.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){var o=i.files[0];if(o&&o.type&&t.opts.imageAllowedTypes.indexOf(o.type.replace(/image\//g,""))>=0){t.markers.remove(),t.markers.insertAtPoint(n.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.popups.hideAll();var r=t.popups.get("image.insert");return r||(r=M()),t.popups.setContainer("image.insert",e(t.opts.scrollableContainer)),t.popups.show("image.insert",n.originalEvent.pageX,n.originalEvent.pageY),m(),O(i.files),n.preventDefault(),n.stopPropagation(),!1}}}function R(){var n,i,o=t.selection.ranges(0);o.collapsed&&o.startContainer.nodeType==Node.ELEMENT_NODE&&(o.startContainer.childNodes.length==o.startOffset?(n=o.startContainer.childNodes[o.startOffset-1],n&&"IMG"==n.tagName&&"block"==e(n).css("display")&&(i=t.node.blockParent(n),i&&t.html.defaultTag()?i.nextSibling||(e(i).after("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"),t.selection.restore()):i||(e(n).after("<br>"+e.FE.MARKERS),t.selection.restore()))):0===o.startOffset&&o.startContainer.childNodes.length>o.startOffset&&(n=o.startContainer.childNodes[o.startOffset],n&&"IMG"==n.tagName&&"block"==e(n).css("display")&&(i=t.node.blockParent(n),i&&t.html.defaultTag()?i.previousSibling||(e(i).before("<"+t.html.defaultTag()+"><br>"+e.FE.MARKERS+"</"+t.html.defaultTag()+">"),t.selection.restore()):i||(e(n).before(e.FE.MARKERS+"<br>"),t.selection.restore()))))}function L(){t.events.$on(t.$el,t._mousedown,"IMG"==t.$el.get(0).tagName?null:'img:not([contenteditable="false"])',function(n){return e(this).parents('[contenteditable="false"]:not(.fr-element):not(body)').length?!0:(t.selection.clear(),we=!0,t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||n.preventDefault(),void n.stopPropagation())}),t.events.$on(t.$el,t._mouseup,"IMG"==t.$el.get(0).tagName?null:'img:not([contenteditable="false"])',function(n){return e(this).parents('[contenteditable="false"]:not(.fr-element):not(body)').length?!0:void(we&&(we=!1,n.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur())))}),t.events.on("drop",I),t.events.on("mousedown window.mousedown",ie),t.events.on("window.touchmove",oe),t.events.on("mouseup window.mouseup",function(){return me?(ne(),!1):void 0}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&ne()}),t.events.on("mouseup",R),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){we=!1,ne(!0)})}function M(e){if(e)return t.popups.onRefresh("image.insert",n),t.popups.onHide("image.insert",r),!0;var i,o="";t.opts.imageInsertButtons.length>1&&(o='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var s=t.opts.imageInsertButtons.indexOf("imageUpload"),a=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";s>=0&&(i=" fr-active",a>=0&&s>a&&(i=""),l='<div class="fr-image-upload-layer'+i+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/*" tabIndex="-1"></div></div>');var c="";a>=0&&(i=" fr-active",s>=0&&a>s&&(i=""),c='<div class="fr-image-by-url-layer'+i+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input type="text" placeholder="http://" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2">'+t.language.translate("Insert")+"</button></div></div>");var u='<div class="fr-image-progress-bar-layer fr-layer"><h3 class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-back" data-cmd="imageDismissError" tabIndex="2">OK</button></div></div>',d={buttons:o,upload_layer:l,by_url_layer:c,progress_bar:u},p=t.popups.create("image.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll",function(){me&&t.popups.isVisible("image.insert")&&de()}),F(p),p}function B(){if(me){var e=t.popups.get("image.alt");e.find("input").val(me.attr("alt")||"").trigger("change")}}function P(){var n=t.popups.get("image.alt");n||(n=j()),v(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",e(t.opts.scrollableContainer));var i=me.offset().left+me.width()/2,o=me.offset().top+me.height();t.popups.show("image.alt",i,o,me.outerHeight())}function j(e){if(e)return t.popups.onRefresh("image.alt",B),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>";var i="";i='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>";var o={buttons:n,alt_layer:i},r=t.popups.create("image.alt",o);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",function(){me&&t.popups.isVisible("image.alt")&&P()}),r}function H(e){if(me){var n=t.popups.get("image.alt");me.attr("alt",e||n.find("input").val()||""),n.find("input:focus").blur(),E(me)}}function z(){if(me){var e=t.popups.get("image.size");e.find('input[name="width"]').val(me.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(me.get(0).style.height).trigger("change")}}function U(){var n=t.popups.get("image.size");n||(n=q()),v(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",e(t.opts.scrollableContainer));var i=me.offset().left+me.width()/2,o=me.offset().top+me.height();t.popups.show("image.size",i,o,me.outerHeight())}function q(e){if(e)return t.popups.onRefresh("image.size",z),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>";var i="";i='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>";var o={buttons:n,size_layer:i},r=t.popups.create("image.size",o);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",function(){me&&t.popups.isVisible("image.size")&&U()}),r}function W(e,n){if(me){var i=t.popups.get("image.size");me.css("width",e||i.find('input[name="width"]').val()),me.css("height",n||i.find('input[name="height"]').val()),i.find("input:focus").blur(),E(me)}}function K(e){var n,i,o=t.popups.get("image.insert");if(me||t.opts.toolbarInline)me&&(i=me.offset().top+me.outerHeight());else{var r=t.$tb.find('.fr-command[data-cmd="insertImage"]');n=r.offset().left+r.outerWidth()/2,i=r.offset().top+(t.opts.toolbarBottom?10:r.outerHeight()-10)}!me&&t.opts.toolbarInline&&(i=o.offset().top-t.helpers.getPX(o.css("margin-top")),o.hasClass("fr-above")&&(i+=o.outerHeight())),o.find(".fr-layer").removeClass("fr-active"),o.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",n,i,me?me.outerHeight():0)}function X(e){var n=t.popups.get("image.insert");n.find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active")}function Y(e){var n=t.popups.get("image.insert");n.find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active")}function V(){var n;t.shared.$image_resizer?(ve=t.shared.$image_resizer,ye=t.shared.$img_overlay,t.events.on("destroy",function(){ve.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),ve=t.shared.$image_resizer,t.events.$on(ve,"mousedown",function(e){e.stopPropagation()},!0),t.opts.imageResize&&(ve.append(u("nw")+u("ne")+u("sw")+u("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),ye=t.shared.$img_overlay,n=ve.get(0).ownerDocument,e(n).find("body").append(ye))),t.events.on("shared.destroy",function(){ve.html("").removeData().remove(),t.opts.imageResize&&ye.remove()},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",function(){me&&!me.hasClass("fr-uploading")?ne(!0):me&&(c(),de(),m(!1))}),t.opts.imageResize&&(n=ve.get(0).ownerDocument,t.events.$on(ve,t._mousedown,".fr-handler",d),t.events.$on(e(n),t._mousemove,p),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,f),t.events.$on(ye,"mouseleave",f))}function Q(n){n=n||me,n&&t.events.trigger("image.beforeRemove",[n])!==!1&&(t.popups.hideAll(),ne(!0),n.get(0)==t.$el.get(0)?n.removeAttr("src"):("A"==n.get(0).parentNode.tagName?(t.selection.setBefore(n.get(0).parentNode)||t.selection.setAfter(n.get(0).parentNode)||n.parent().after(e.FE.MARKERS),e(n.get(0).parentNode).remove()):(t.selection.setBefore(n.get(0))||t.selection.setAfter(n.get(0))||n.after(e.FE.MARKERS),n.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function G(){if(L(),"IMG"==t.$el.get(0).tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.$el.get(0).tagName?null:'img:not([contenteditable="false"])',te),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.$el.get(0).tagName?null:'img:not([contenteditable="false"])',function(){Ne=!1}),t.events.$on(t.$el,"touchmove",function(){Ne=!0})),t.events.on("window.keydown keydown",function(n){var i=n.which;return!me||i!=e.FE.KEYCODE.BACKSPACE&&i!=e.FE.KEYCODE.DELETE?me&&i==e.FE.KEYCODE.ESC?(ne(!0),n.preventDefault(),!1):me&&!t.keys.ctrlKey(n)?(n.preventDefault(),!1):void 0:(n.preventDefault(),n.stopPropagation(),Q(),!1)},!0),t.events.$on(e(t.o_win),"keydown",function(t){var n=t.which;return me&&n==e.FE.KEYCODE.BACKSPACE?(t.preventDefault(),!1):void 0}),t.events.$on(t.$win,"keydown",function(t){var n=t.which;me&&me.hasClass("fr-uploading")&&n==e.FE.KEYCODE.ESC&&me.trigger("abortUpload")}),t.events.on("paste.before",Z),t.events.on("paste.beforeCleanup",ee),t.events.on("paste.after",J),t.events.on("html.set",a),t.events.on("html.inserted",a),a(),t.events.on("html.get",function(e){return e=e.replace(/<(img)((?:[\w\W]*?))class="([\w\W]*?)(fr-uploading|fr-error)([\w\W]*?)"((?:[\w\W]*?))>/g,"")}),t.opts.imageOutputSize){var n;t.events.on("html.beforeGet",function(){n=t.$el.get(0).querySelectorAll("img");for(var i=0;i<n.length;i++)n[i].setAttribute("width",e(n[i]).width()),n[i].setAttribute("height",e(n[i]).height())}),t.events.on("html.afterGet",function(){for(var e=0;e<n.length;e++)n[e].removeAttribute("width"),n[e].removeAttribute("height")})}t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(l(),t.events.on("contentChanged",l)),t.events.$on(e(t.o_win),"orientationchange.image",function(){setTimeout(function(){var e=he();e&&E(e)},0)}),g(!0),M(!0),q(!0),j(!0),t.events.on("node.remove",function(e){return"IMG"==e.get(0).tagName?(Q(e),!1):void 0})}function J(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each(function(n,i){var r=t.opts.imageDefaultWidth||"auto";if("auto"!=r&&(r+=t.opts.imageResizeWithPercent?"%":"px"),e(i).css("width",r),e(i).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass("fr-di"+t.opts.imageDefaultDisplay[0]+("center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")),0===i.src.indexOf("data:")){if(t.events.trigger("image.beforePasteUpload",[i])===!1)return!1;me=e(i),c(),o(),de(),m(),t.edit.off();for(var s=atob(e(i).attr("src").split(",")[1]),a=[],l=0;l<s.length;l++)a.push(s.charCodeAt(l));var u=new Blob([new Uint8Array(a)],{type:"image/jpeg"});O([u]),e(i).removeAttr("data-fr-image-pasted")}else 0!==i.src.indexOf("http")?(t.selection.save(),e(i).remove(),t.selection.restore()):e(i).removeAttr("data-fr-image-pasted")}):t.$el.find("img[data-fr-image-pasted]").remove()}function Z(e){if(e&&e.clipboardData&&e.clipboardData.items&&e.clipboardData.items[0]){var n=e.clipboardData.items[0].getAsFile();if(n){var i=new FileReader;return i.onload=function(e){var n=e.target.result,i=t.opts.imageDefaultWidth||"auto";i&&"auto"!=i&&(""+i).indexOf("px")<0&&(""+i).indexOf("%")<0&&(i+="px"),t.html.insert('<img data-fr-image-pasted="true" class="fr-di'+t.opts.imageDefaultDisplay[0]+("center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+n+'"'+(i?' style="width: '+i+';"':"")+">"),t.events.trigger("paste.after")},i.readAsDataURL(n),!1}}}function ee(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function te(n){if(e(this).parents('[contenteditable="false"]:not(.fr-element):not(body)').length)return!0;if(n&&"touchend"==n.type&&Ne)return!0;if(n&&t.edit.isDisabled())return n.stopPropagation(),n.preventDefault(),!1;for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=t&&e.FE.INSTANCES[i].events.trigger("image.hideResizer");t.toolbar.disable(),n&&(n.stopPropagation(),n.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),me=e(this),pe(),c(),o(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function ne(e){me&&(re()||e===!0)&&(t.toolbar.enable(),ve.removeClass("fr-active"),t.popups.hide("image.edit"),me=null,oe())}function ie(){De=!0}function oe(){De=!1}function re(){return De}function se(e){me.removeClass("fr-fir fr-fil"),"left"==e?me.addClass("fr-fil"):"right"==e&&me.addClass("fr-fir"),c(),o()}function ae(e){me&&(me.hasClass("fr-fil")?e.find("> *:first").replaceWith(t.icon.create("align-left")):me.hasClass("fr-fir")?e.find("> *:first").replaceWith(t.icon.create("align-right")):e.find("> *:first").replaceWith(t.icon.create("align-justify")))}function le(e,t){if(me){var n="justify";me.hasClass("fr-fil")?n="left":me.hasClass("fr-fir")&&(n="right"),t.find('.fr-command[data-param1="'+n+'"]').addClass("fr-active")}}function ce(e){me.removeClass("fr-dii fr-dib"),"inline"==e?me.addClass("fr-dii"):"block"==e&&me.addClass("fr-dib"),c(),o()}function ue(e,t){var n="block";me.hasClass("fr-dii")&&(n="inline"),t.find('.fr-command[data-param1="'+n+'"]').addClass("fr-active")}function de(){var n=t.popups.get("image.insert");n||(n=M()),t.popups.isVisible("image.insert")||(v(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",e(t.opts.scrollableContainer)));var i=me.offset().left+me.width()/2,o=me.offset().top+me.height();t.popups.show("image.insert",i,o,me.outerHeight())}function pe(){if(me){t.selection.clear();var e=t.doc.createRange();e.selectNode(me.get(0));var n=t.selection.get();n.addRange(e)}}function fe(){me?(e(".fr-popup input:focus").blur(),E(me)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())}function he(){return me}function ge(e,n,i){if("undefined"==typeof n&&(n=t.opts.imageStyles),"undefined"==typeof i&&(i=t.opts.imageMultipleStyles),!me)return!1;if(!i){var o=Object.keys(n);o.splice(o.indexOf(e),1),me.removeClass(o.join(" "))}me.toggleClass(e),E(me)}var me,ve,be,ye,we=!1,Ee=1,xe=2,Ce=3,Se=4,Te=5,ke=6,$e=7,_e={};_e[Ee]="Image cannot be loaded from the passed link.",_e[xe]="No link in upload response.",_e[Ce]="Error during file upload.",_e[Se]="Parsing response failed.",_e[Te]="File is too large.",_e[ke]="Image file type is invalid.",_e[$e]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Ae,Ne,De=!1;return{_init:G,showInsertPopup:i,showLayer:K,refreshUploadButton:X,refreshByURLButton:Y,upload:O,insertByURL:w,align:se,refreshAlign:ae,refreshAlignOnShow:le,display:ce,refreshDisplayOnShow:ue,replace:de,back:fe,get:he,insert:C,showProgressBar:m,remove:Q,hideProgressBar:v,applyStyle:ge,showAltPopup:P,showSizePopup:U,setAlt:H,setSize:W,exitEdit:ne,edit:E}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(80,"insertImage"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refershAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){var t=this.image.get();t?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("imageAlign",{NAME:"align-center"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",justify:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.imageAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command fr-title" data-cmd="imageAlign" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("align-"+i)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){var t=this.image.get();t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.imageStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" data-cmd="imageStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,n){var i=this.image.get();i&&n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",i.hasClass(t))})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,
title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),e.FE.PLUGINS.inlineStyle=function(t){function n(n){""!==t.selection.text()?t.html.insert(e.FE.START_MARKER+'<span style="'+n+'">'+t.selection.text()+"</span>"+e.FE.END_MARKER):t.html.insert('<span style="'+n+'">'+e.FE.INVISIBLE_SPACE+e.FE.MARKERS+"</span>")}return{apply:n}},e.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.inlineStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><span style="'+t[n]+'"><a class="fr-command" data-cmd="inlineStyle" data-param1="'+t[n]+'" title="'+this.language.translate(n)+'">'+this.language.translate(n)+"</a></span></li>");return e+="</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),e.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{lineBreakerTags:["table","hr","iframe","form","dl"],lineBreakerOffset:15}),e.FE.PLUGINS.lineBreaker=function(t){function n(n,i){var o,r,s,a,l,c,u,d;if(null==n)a=i.parent(),l=a.offset().top,u=i.offset().top,o=u-Math.min((u-l)/2,t.opts.lineBreakerOffset),s=a.outerWidth(),r=a.offset().left;else if(null==i)a=n.parent(),c=a.offset().top+a.outerHeight(),d=n.offset().top+n.outerHeight(),o=d+Math.min((c-d)/2,t.opts.lineBreakerOffset),s=a.outerWidth(),r=a.offset().left;else{a=n.parent();var p=n.offset().top+n.height(),h=i.offset().top;if(p>h)return!1;o=(p+h)/2,s=a.outerWidth(),r=a.offset().left}t.opts.iframe&&(r+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),o+=t.$iframe.offset().top-e(t.o_win).scrollTop()),t.$box.append(f),f.css("top",o-t.win.pageYOffset),f.css("left",r-t.win.pageXOffset),f.css("width",s),f.data("tag1",n),f.data("tag2",i),f.addClass("fr-visible").data("instance",t)}function i(e,i){var r,s,a=e.offset().top,l=e.offset().top+e.outerHeight();if(Math.abs(l-i)<=t.opts.lineBreakerOffset||Math.abs(i-a)<=t.opts.lineBreakerOffset)if(Math.abs(l-i)<Math.abs(i-a)){s=e.get(0);for(var c=s.nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;)c=c.nextSibling;if(!c)return n(e,null),!0;if(r=o(c))return n(e,r),!0}else{if(s=e.get(0),!s.previousSibling)return n(null,e),!0;if(r=o(s.previousSibling))return n(r,e),!0}f.removeClass("fr-visible").removeData("instance")}function o(n){if(n){var i=e(n);if(0===t.$el.find(i).length)return null;if(n.nodeType!=Node.TEXT_NODE&&t.opts.lineBreakerTags.indexOf(n.tagName.toLowerCase())>=0)return i;if(i.parents(t.opts.lineBreakerTags.join(",")).length>0)return n=i.parents(t.opts.lineBreakerTags.join(",")).get(0),e(n)}return null}function r(n){g=null;var r,s,a,l=null,c=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset);if(c&&("HTML"==c.tagName||"BODY"==c.tagName||t.node.isElement(c)))for(r=1;r<=t.opts.lineBreakerOffset;r++){if(s=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset-r),s&&!t.node.isElement(s)&&s!=t.$wp.get(0)&&e(s).parents(t.$wp).length){l=o(s);break}if(a=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+r),a&&!t.node.isElement(a)&&a!=t.$wp.get(0)&&e(a).parents(t.$wp).length){l=o(a);break}}else l=o(c);l?i(l,n.pageY):t.core.sameInstance(f)&&f.removeClass("fr-visible").removeData("instance")}function s(e){return f.hasClass("fr-visible")&&!t.core.sameInstance(f)?!1:t.popups.areVisible()||t.$el.get(0).querySelectorAll(".fr-selected-cell").length?(f.removeClass("fr-visible"),!0):void(h===!1&&(g&&clearTimeout(g),g=setTimeout(r,30,e)))}function a(){g&&clearTimeout(g),f.hasClass("fr-visible")&&f.removeClass("fr-visible").removeData("instance")}function l(){h=!0,a()}function c(){h=!1}function u(n){if(!t.core.sameInstance(f))return!0;n.preventDefault(),f.removeClass("fr-visible").removeData("instance");var i=f.data("tag1"),o=f.data("tag2"),r=t.html.defaultTag();null==i?r&&"TD"!=o.parent().get(0).tagName?o.before("<"+r+">"+e.FE.MARKERS+"<br></"+r+">"):o.before(e.FE.MARKERS+"<br>"):r&&"TD"!=i.parent().get(0).tagName?i.after("<"+r+">"+e.FE.MARKERS+"<br></"+r+">"):i.after(e.FE.MARKERS+"<br>"),t.selection.restore()}function d(){t.shared.$line_breaker||(t.shared.$line_breaker=e('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabindex="-1" title="'+t.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),f=t.shared.$line_breaker,t.events.on("shared.destroy",function(){f.html("").removeData().remove()},!0),t.events.on("destroy",function(){f.removeData("instance").removeClass("fr-visible").appendTo("body")},!0),t.events.$on(f,"mouseleave",a,!0),t.events.$on(f,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(f,"mousedown","a",function(e){e.stopPropagation()},!0),t.events.$on(f,"click","a",u,!0)}function p(){return t.$wp?(d(),h=!1,t.events.$on(t.$win,"mousemove",s),t.events.$on(e(t.win),"scroll",a),t.events.on("popups.show.table.edit",a),t.events.$on(e(t.win),"mousedown",l),void t.events.$on(e(t.win),"mouseup",c)):!1}var f,h,g;return{_init:p}}}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),e.extend(e.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),e.FE.PLUGINS.link=function(t){function n(){var n=t.image?t.image.get():null;if(!n&&t.$wp){var i=t.selection.element(),o=t.selection.endElement();return"A"!=i.tagName&&(i=e(i).parents("a:first").get(0)),"A"!=o.tagName&&(o=e(o).parents("a:first").get(0)),o&&o==i?i:null}return"A"==t.$el.get(0).tagName&&t.core.hasFocus()?t.$el.get(0):n&&n.get(0).parentNode&&"A"==n.get(0).parentNode.tagName?n.get(0).parentNode:void 0}function i(){var e=t.image?t.image.get():null,n=[];if(e)"A"==e.get(0).parentNode.tagName&&n.push(e.get(0).parentNode);else{var i,o,r,s;if(t.win.getSelection){var a=t.win.getSelection();if(a.getRangeAt&&a.rangeCount){s=t.doc.createRange();for(var l=0;l<a.rangeCount;++l)if(i=a.getRangeAt(l),o=i.commonAncestorContainer,o&&1!=o.nodeType&&(o=o.parentNode),o&&"a"==o.nodeName.toLowerCase())n.push(o);else{r=o.getElementsByTagName("a");for(var c=0;c<r.length;++c)s.selectNodeContents(r[c]),s.compareBoundaryPoints(i.END_TO_START,i)<1&&s.compareBoundaryPoints(i.START_TO_END,i)>-1&&n.push(r[c])}}}else if(t.doc.selection&&"Control"!=t.doc.selection.type)if(i=t.doc.selection.createRange(),o=i.parentElement(),"a"==o.nodeName.toLowerCase())n.push(o);else{r=o.getElementsByTagName("a"),s=t.doc.body.createTextRange();for(var u=0;u<r.length;++u)s.moveToElementText(r[u]),s.compareEndPoints("StartToEnd",i)>-1&&s.compareEndPoints("EndToStart",i)<1&&n.push(r[u])}}return n}function o(i){s(),setTimeout(function(){if(!i||i&&(1==i.which||"mouseup"!=i.type)){var o=n(),s=t.image?t.image.get():null;if(o&&!s){if(t.image){var a=t.node.contents(o);if(1==a.length&&"IMG"==a[0].tagName){var l=t.selection.ranges(0);return 0===l.startOffset&&0===l.endOffset?e(o).before(e.FE.MARKERS):e(o).after(e.FE.MARKERS),t.selection.restore(),!1}}i&&i.stopPropagation(),r(o)}}},t.helpers.isIOS()?100:0)}function r(n){var i=t.popups.get("link.edit");i||(i=a());var o=e(n);t.popups.isVisible("link.edit")||t.popups.refresh("link.edit"),t.popups.setContainer("link.edit",e(t.opts.scrollableContainer));var r=o.offset().left+e(n).outerWidth()/2,s=o.offset().top+o.outerHeight();t.popups.show("link.edit",r,s,o.outerHeight())}function s(){t.popups.hide("link.edit")}function a(){var e="";t.opts.linkEditButtons.length>1&&("A"==t.$el.get(0).tagName&&t.opts.linkEditButtons.indexOf("linkRemove")>=0&&t.opts.linkEditButtons.splice(t.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+t.button.buildList(t.opts.linkEditButtons)+"</div>");var i={buttons:e},o=t.popups.create("link.edit",i);return t.$wp&&t.events.$on(t.$wp,"scroll.link-edit",function(){n()&&t.popups.isVisible("link.edit")&&r(n())}),o}function l(){}function c(){var i=t.popups.get("link.insert"),o=n();if(o){var r,s,a=e(o),l=i.find('input.fr-link-attr[type="text"]'),c=i.find('input.fr-link-attr[type="checkbox"]');for(r=0;r<l.length;r++)s=e(l[r]),s.val(a.attr(s.attr("name")||""));for(c.prop("checked",!1),r=0;r<c.length;r++)s=e(c[r]),a.attr(s.attr("name"))==s.data("checked")&&s.prop("checked",!0);i.find('input.fr-link-attr[type="text"][name="text"]').val(a.text())}else i.find('input.fr-link-attr[type="text"]').val(""),i.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),i.find('input.fr-link-attr[type="text"][name="text"]').val(t.selection.text());i.find("input.fr-link-attr").trigger("change");var u=t.image?t.image.get():null;u?i.find('.fr-link-attr[name="text"]').parent().hide():i.find('.fr-link-attr[name="text"]').parent().show()}function u(){var n=t.$tb.find('.fr-command[data-cmd="insertLink"]'),i=t.popups.get("link.insert");if(i||(i=d()),!i.hasClass("fr-active"))if(t.popups.refresh("link.insert"),t.popups.setContainer("link.insert",t.$tb||e(t.opts.scrollableContainer)),n.is(":visible")){var o=n.offset().left+n.outerWidth()/2,r=n.offset().top+(t.opts.toolbarBottom?10:n.outerHeight()-10);t.popups.show("link.insert",o,r,n.outerHeight())}else t.position.forSelection(i),t.popups.show("link.insert")}function d(e){if(e)return t.popups.onRefresh("link.insert",c),t.popups.onHide("link.insert",l),!0;var i="";t.opts.linkInsertButtons.length>=1&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.linkInsertButtons)+"</div>");var o='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',r="",s=0;r='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+t.id+'">',r+='<div class="fr-input-line"><input name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++s+'"></div>',t.opts.linkText&&(r+='<div class="fr-input-line"><input name="text" type="text" class="fr-link-attr" placeholder="'+t.language.translate("Text")+'" tabIndex="'+ ++s+'"></div>');for(var a in t.opts.linkAttributes)if(t.opts.linkAttributes.hasOwnProperty(a)){var u=t.opts.linkAttributes[a];r+='<div class="fr-input-line"><input name="'+a+'" type="text" class="fr-link-attr" placeholder="'+t.language.translate(u)+'" tabIndex="'+ ++s+'"></div>'}t.opts.linkAlwaysBlank||(r+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+t.id+'" tabIndex="'+ ++s+'"><span>'+o+'</span></span><label for="fr-link-target-'+t.id+'">'+t.language.translate("Open in new tab")+"</label></div>"),r+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="linkInsert" href="#" tabIndex="'+ ++s+'" type="button">'+t.language.translate("Insert")+"</button></div></div>";var d={buttons:i,input_layer:r},p=t.popups.create("link.insert",d);return t.$wp&&t.events.$on(t.$wp,"scroll.link-insert",function(){var e=t.image?t.image.get():null;e&&t.popups.isVisible("link.insert")&&w(),n&&t.popups.isVisible("link.insert")&&b()}),p}function p(){var i=n(),o=t.image?t.image.get():null;return t.events.trigger("link.beforeRemove",[i])===!1?!1:void(o&&i?(o.unwrap(),t.image.edit(o)):i&&(t.selection.save(),e(i).replaceWith(e(i).html()),t.selection.restore(),s()))}function f(){t.events.on("keyup",function(t){t.which!=e.FE.KEYCODE.ESC&&o(t)}),t.events.on("window.mouseup",o),t.helpers.isMobile()&&t.events.$on(t.$doc,"selectionchange",o),d(!0),"A"==t.$el.get(0).tagName&&t.$el.addClass("fr-view")}function h(n){var i,o,r=t.opts.linkList[n],s=t.popups.get("link.insert"),a=s.find('input.fr-link-attr[type="text"]'),l=s.find('input.fr-link-attr[type="checkbox"]');for(o=0;o<a.length;o++)i=e(a[o]),r[i.attr("name")]?i.val(r[i.attr("name")]):"text"!=i.attr("name")&&i.val("");for(o=0;o<l.length;o++)i=e(l[o]),i.prop("checked",i.data("checked")==r[i.attr("name")])}function g(){var n,i,o=t.popups.get("link.insert"),r=o.find('input.fr-link-attr[type="text"]'),s=o.find('input.fr-link-attr[type="checkbox"]'),a=r.filter('[name="href"]').val(),l=r.filter('[name="text"]').val(),c={};for(i=0;i<r.length;i++)n=e(r[i]),["href","text"].indexOf(n.attr("name"))<0&&(c[n.attr("name")]=n.val());for(i=0;i<s.length;i++)n=e(s[i]),n.is(":checked")?c[n.attr("name")]=n.data("checked"):c[n.attr("name")]=n.data("unchecked");var u=e(t.o_win).scrollTop();v(a,l,c),e(t.o_win).scrollTop(u)}function m(){if(!t.selection.isCollapsed()){t.selection.save();for(var n=t.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();n.length;){var i=e(n.pop());i.removeClass("fr-unprocessed");var o=t.node.deepestParent(i.get(0));if(o){var r=i.get(0),s="",a="";do r=r.parentNode,t.node.isBlock(r)||(s+=t.node.closeTagString(r),a=t.node.openTagString(r)+a);while(r!=o);var l=t.node.openTagString(i.get(0))+i.html()+t.node.closeTagString(i.get(0));i.replaceWith('<span id="fr-break"></span>');var c=e(o).html();c=c.replace(/<span id="fr-break"><\/span>/g,s+l+a),e(o).html(c)}n=t.$el.find(".fr-marker.fr-unprocessed").toArray()}t.selection.restore()}}function v(r,s,a){"undefined"==typeof a&&(a={});var l=t.image?t.image.get():null;l||"A"==t.$el.get(0).tagName?"A"==t.$el.get(0).tagName&&t.$el.focus():(t.selection.restore(),t.popups.hide("link.insert"));var c=r;if(t.opts.linkConvertEmailAddress){var u=/^[\w._]+@[a-zA-Z0-9_-]+?\.[a-zA-Z0-9]{2,3}$/i;u.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r)}if(0===r.indexOf("tel:")||0===r.indexOf("sms:")||0===r.indexOf("mailto:")||0===r.indexOf("notes:")||0===r.indexOf("data:image")||""===t.opts.linkAutoPrefix||/^(https?:|ftps?:|)\/\//.test(r)||("/"==t.opts.linkAutoPrefix[t.opts.linkAutoPrefix.length-1]&&(r=r.replace(/^\/*/g,"")),r=t.opts.linkAutoPrefix+r),r=t.helpers.sanitizeURL(r),t.opts.linkAlwaysBlank&&(a.target="_blank"),t.opts.linkAlwaysNoFollow&&(a.rel="nofollow"),s=s||"",r===t.opts.linkAutoPrefix){var d=t.popups.get("link.insert");return d.find('input[name="href"]').addClass("fr-error"),t.events.trigger("link.bad",[c]),!1}var p,f=n();if(f){p=e(f);var h=t.node.rawAttributes(f);for(var g in h)h.hasOwnProperty(g)&&"class"!=g&&"style"!=g&&p.removeAttr(g);p.attr("href",r),s.length>0&&p.text()!=s&&!l&&p.text(s),l||p.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),p.attr(a),l||t.selection.restore()}else{l?l.wrap('<a href="'+r+'"></a>'):(t.doc.execCommand("unlink",!1,!1),t.selection.isCollapsed()?(s=0===s.length?c:s,t.html.insert('<a href="'+r+'">'+e.FE.START_MARKER+s+e.FE.END_MARKER+"</a>"),t.selection.restore()):s.length>0&&s!=t.selection.text()?(t.selection.remove(),t.html.insert('<a href="'+r+'">'+e.FE.START_MARKER+s+e.FE.END_MARKER+"</a>"),t.selection.restore()):(m(),t.doc.execCommand("createLink",!1,r)));for(var v=i(),b=0;b<v.length;b++)p=e(v[b]),p.attr(a),p.removeAttr("_moz_dirty");1==v.length&&t.$wp&&!l&&(e(v[0]).prepend(e.FE.START_MARKER).append(e.FE.END_MARKER),t.selection.restore())}if(l){var y=t.popups.get("link.insert");y.find("input:focus").blur(),t.image.edit(l)}else o()}function b(){s();var i=n();if(i){var o=t.popups.get("link.insert");o||(o=d()),t.popups.isVisible("link.insert")||(t.popups.refresh("link.insert"),t.selection.save(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur())),t.popups.setContainer("link.insert",e(t.opts.scrollableContainer));var r=(t.image?t.image.get():null)||e(i),a=r.offset().left+r.outerWidth()/2,l=r.offset().top+r.outerHeight();t.popups.show("link.insert",a,l,r.outerHeight())}}function y(){var e=t.image?t.image.get():null;if(e)t.image.back();else{t.events.disableBlur(),t.selection.restore(),t.events.enableBlur();var i=n();i&&t.$wp?(t.selection.restore(),s(),o()):"A"==t.$el.get(0).tagName?(t.$el.focus(),o()):(t.popups.hide("link.insert"),t.toolbar.showInline())}}function w(){var n=t.image?t.image.get():null;if(n){var i=t.popups.get("link.insert");i||(i=d()),c(!0),t.popups.setContainer("link.insert",e(t.opts.scrollableContainer));var o=n.offset().left+n.outerWidth()/2,r=n.offset().top+n.outerHeight();t.popups.show("link.insert",o,r,n.outerHeight())}}function E(i,r,s){"undefined"==typeof s&&(s=t.opts.linkMultipleStyles),"undefined"==typeof r&&(r=t.opts.linkStyles);var a=n();if(!a)return!1;if(!s){var l=Object.keys(r);l.splice(l.indexOf(i),1),e(a).removeClass(l.join(" "))}e(a).toggleClass(i),o()}return{_init:f,remove:p,showInsertPopup:u,usePredefined:h,insertCallback:g,insert:v,update:b,get:n,allSelected:i,back:y,imageLink:w,applyStyle:E}},e.FE.DefineIcon("insertLink",{NAME:"link"}),e.FE.RegisterShortcut(75,"insertLink"),e.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),e.FE.DefineIcon("linkOpen",{NAME:"external-link"}),e.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)}}),e.FE.DefineIcon("linkEdit",{NAME:"edit"}),e.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,callback:function(){this.link.update()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkRemove",{NAME:"unlink"}),e.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){var t=this.link.get();t?e.removeClass("fr-hidden"):e.addClass("fr-hidden")}}),e.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get(),n=this.image?this.image.get():null;n||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("linkList",{NAME:"search"}),e.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list">',t=this.opts.linkList,n=0;n<t.length;n++)e+='<li><a class="fr-command" data-cmd="linkList" data-param1="'+n+'">'+(t[n].displayText||t[n].text)+"</a></li>";return e+="</ul>"},callback:function(e,t){this.link.usePredefined(t)}}),e.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){var t=this.link.get();t?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageLink",{NAME:"link"}),e.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,callback:function(){this.link.imageLink()},refresh:function(e){var t,n=this.link.get();n?(t=e.prev(),t.hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):(t=e.prev(),t.hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))}}),e.FE.DefineIcon("linkStyle",{NAME:"magic"}),e.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.linkStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" data-cmd="linkStyle" data-param1="'+n+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(t,n){var i=this.link.get();if(i){var o=e(i);n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",o.hasClass(t))})}}})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.FE.PLUGINS.lists=function(t){function n(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function i(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function o(t,n){for(var i=[],o=0;o<t.length;o++){var r=t[o].parentNode;"LI"==t[o].tagName&&r.tagName!=n&&i.indexOf(r)<0&&i.push(r)}for(o=i.length-1;o>=0;o--){var s=e(i[o]);s.replaceWith("<"+n.toLowerCase()+">"+s.html()+"</"+n.toLowerCase()+">")}}function r(n,i){o(n,i);for(var r=t.html.defaultTag(),s=0;s<n.length;s++)"LI"!=n[s].tagName&&(r&&n[s].tagName.toLowerCase()==r?e(n[s]).replaceWith("<"+i+"><li"+t.node.attributes(n[s])+">"+e(n[s]).html()+"</li></"+i+">"):e(n[s]).wrap("<"+i+"><li></li></"+i+">"));t.clean.lists()}function s(o){var r,s;for(r=o.length-1;r>=0;r--)for(s=r-1;s>=0;s--)if(e(o[s]).find(o[r]).length||o[s]==o[r]){o.splice(r,1);break}var a=[];for(r=0;r<o.length;r++){var l=e(o[r]),c=o[r].parentNode;l.before(i(c.tagName)),"LI"==c.parentNode.tagName?(l.before(i("LI")),l.after(n("LI"))):(t.node.isEmpty(l.get(0),!0)||0!==l.find(t.html.blockTagsQuery()).length||l.append("<br>"),l.append(n("LI")),l.prepend(i("LI"))),l.after(n(c.tagName)),"LI"==c.parentNode.tagName&&(c=c.parentNode.parentNode),a.indexOf(c)<0&&a.push(c)}for(r=0;r<a.length;r++){var u=e(a[r]),d=u.html();d=d.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>"),d=d.replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),u.replaceWith(t.node.openTagString(u.get(0))+d+t.node.closeTagString(u.get(0)))}t.$el.find("li:empty").remove(),t.$el.find("ul:empty, ol:empty").remove(),t.clean.lists(),t.html.wrap()}function a(e,t){for(var n=!0,i=0;i<e.length;i++){if("LI"!=e[i].tagName)return!1;e[i].parentNode.tagName!=t&&(n=!1)}return n}function l(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();for(var n=t.selection.blocks(),i=0;i<n.length;i++)"LI"!=n[i].tagName&&"LI"==n[i].parentNode.tagName&&(n[i]=n[i].parentNode);t.selection.save(),a(n,e)?s(n):r(n,e),t.html.unwrap(),t.selection.restore()}function c(n,i){var o=e(t.selection.element());if(o.get(0)!=t.$el.get(0)){var r=o.get(0);"LI"!=r.tagName&&(r=o.parents("li").get(0)),r&&r.parentNode.tagName==i&&t.$el.get(0).contains(r.parentNode)&&n.addClass("fr-active")}}function u(n){t.selection.save();for(var i=0;i<n.length;i++){var o=n[i].previousSibling;if(o){var r=e(n[i]).find("> ul, > ol").get(0);if(r){for(var s=e("<li>").prependTo(e(r)),a=t.node.contents(n[i])[0];a&&!t.node.isList(a);){var l=a.nextSibling;s.append(a),a=l}e(o).append(e(r)),e(n[i]).remove()}else{var c=e(o).find("> ul, > ol").get(0);if(c)e(c).append(e(n[i]));else{var u=e("<"+n[i].parentNode.tagName+">");e(o).append(u),u.append(e(n[i]))}}}}t.clean.lists(),t.selection.restore()}function d(e){t.selection.save(),s(e),t.selection.restore()}function p(e){if("indent"==e||"outdent"==e){for(var n=!1,i=t.selection.blocks(),o=[],r=0;r<i.length;r++)"LI"==i[r].tagName?(n=!0,o.push(i[r])):"LI"==i[r].parentNode.tagName&&(n=!0,o.push(i[r].parentNode));n&&("indent"==e?u(o):d(o))}}function f(){t.events.on("commands.after",p),t.events.on("keydown",function(n){if(n.which==e.FE.KEYCODE.TAB){for(var i,o=t.selection.blocks(),r=[],s=0;s<o.length;s++)"LI"==o[s].tagName?(i=!0,r.push(o[s])):"LI"==o[s].parentNode.tagName&&(i=!0,r.push(o[s].parentNode));if(i)return n.preventDefault(),n.stopPropagation(),n.shiftKey?d(r):u(r),!1}},!0)}return{_init:f,format:l,refresh:c}},e.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),e.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),e.FE.DefineIcon("formatUL",{NAME:"list-ul"}),e.FE.DefineIcon("formatOL",{NAME:"list-ol"})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),e.FE.PLUGINS.paragraphFormat=function(t){function n(n,i){var o=t.html.defaultTag();if(i&&i.toLowerCase()!=o)if(n.find("ul, ol").length>0){var r=e("<"+i+">");n.prepend(r);for(var s=t.node.contents(n.get(0))[0];s&&["UL","OL"].indexOf(s.tagName)<0;){var a=s.nextSibling;r.append(s),s=a}}else n.html("<"+i+">"+n.html()+"</"+i+">")}function i(n,i){var o=t.html.defaultTag();i||(i='div class="fr-temp-div" data-empty="true"'),i.toLowerCase()==o?n.replaceWith(n.html()):n.replaceWith(e("<"+i+">").html(n.html()))}function o(n,i){var o=t.html.defaultTag();i||(i='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),i.toLowerCase()==o?(t.node.isEmpty(n.get(0),!0)||n.append("<br/>"),n.replaceWith(n.html())):n.replaceWith(e("<"+i+">").html(n.html()))}function r(n,i){i||(i='div class="fr-temp-div"'+(t.node.isEmpty(n.get(0),!0)?' data-empty="true"':"")),n.replaceWith(e("<"+i+" "+t.node.attributes(n.get(0))+">").html(n.html()))}function s(s){"N"==s&&(s=t.html.defaultTag()),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var a=t.selection.blocks();t.selection.save(),t.$el.find("pre").attr("skip",!0);for(var l=0;l<a.length;l++)if(a[l].tagName!=s&&!t.node.isList(a[l])){var c=e(a[l]);"LI"==a[l].tagName?n(c,s):"LI"==a[l].parentNode.tagName&&a[l]?i(c,s):["TD","TH"].indexOf(a[l].parentNode.tagName)>=0?o(c,s):r(c,s)}t.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){e(this).prev().append("<br>"+e(this).html()),e(this).remove()}),t.$el.find("pre").removeAttr("skip"),t.html.unwrap(),t.selection.restore()}function a(e,n){var i=t.selection.blocks();if(i.length){var o=i[0],r="N",s=t.html.defaultTag();o.tagName.toLowerCase()!=s&&o!=t.$el.get(0)&&(r=o.tagName),n.find('.fr-command[data-param1="'+r+'"]').addClass("fr-active")}else n.find('.fr-command[data-param1="N"]').addClass("fr-active")}function l(e){if(t.opts.paragraphFormatSelection){var n=t.selection.blocks();if(n.length){var i=n[0],o="N",r=t.html.defaultTag();i.tagName.toLowerCase()!=r&&i!=t.$el.get(0)&&(o=i.tagName),["LI","TD","TH"].indexOf(o)>=0&&(o="N"),e.find("> span").text(t.opts.paragraphFormat[o])}else e.find("> span").text(edior.opts.paragraphFormat.N)}}return{apply:s,refreshOnShow:a,refresh:l}},e.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.paragraphFormat;for(var n in t)t.hasOwnProperty(n)&&(e+="<li><"+n+' style="padding: 0 !important; margin: 0 !important;"><a class="fr-command" data-cmd="paragraphFormat" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></"+n+"></li>");return e+="</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),e.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),e.FE.PLUGINS.paragraphStyle=function(t){function n(n,i,o){"undefined"==typeof i&&(i=t.opts.paragraphStyles),"undefined"==typeof o&&(o=t.opts.paragraphMultipleStyles);var r="";o||(r=Object.keys(i),r.splice(r.indexOf(n),1),r=r.join(" ")),t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore();var s=t.selection.blocks();t.selection.save();for(var a=e(s[0]).hasClass(n),l=0;l<s.length;l++)e(s[l]).removeClass(r).toggleClass(n,!a),e(s[l]).hasClass("fr-temp-div")&&e(s[l]).removeClass("fr-temp-div"),""===e(s[l]).attr("class")&&e(s[l]).removeAttr("class");t.html.unwrap(),t.selection.restore()}function i(n,i){var o=t.selection.blocks();if(o.length){var r=e(o[0]);i.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",r.hasClass(t))})}}function o(){}return{_init:o,apply:n,refreshOnShow:i}},e.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.paragraphStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command '+n+'" data-cmd="paragraphStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),e.FE.DefineIcon("paragraphStyle",{NAME:"magic"})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.FE.PLUGINS.quote=function(t){function n(e){for(;e.parentNode&&e.parentNode!=t.$el.get(0);)e=e.parentNode;return e}function i(){var i,o=t.selection.blocks();for(i=0;i<o.length;i++)o[i]=n(o[i]);t.selection.save();var r=e("<blockquote>");for(r.insertBefore(o[0]),i=0;i<o.length;i++)r.append(o[i]);t.html.unwrap(),t.selection.restore()}function o(){var n,i=t.selection.blocks();for(n=0;n<i.length;n++)"BLOCKQUOTE"!=i[n].tagName&&(i[n]=e(i[n]).parentsUntil(t.$el,"BLOCKQUOTE").get(0));for(t.selection.save(),n=0;n<i.length;n++)i[n]&&e(i[n]).replaceWith(i[n].innerHTML);t.html.unwrap(),t.selection.restore()}function r(e){t.selection.save(),t.html.wrap(!0,!0,!0,!0),t.selection.restore(),"increase"==e?i():"decrease"==e&&o()}return{apply:r}},e.FE.RegisterShortcut(222,"quote","increase"),e.FE.RegisterShortcut(222,"quote","decrease",!0),e.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),e.FE.DefineIcon("quote",{NAME:"quote-left"})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),e.extend(e.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),e.FE.PLUGINS.table=function(t){function n(){var e=t.$tb.find('.fr-command[data-cmd="insertTable"]'),n=t.popups.get("table.insert");if(n||(n=s()),!n.hasClass("fr-active")){t.popups.refresh("table.insert"),t.popups.setContainer("table.insert",t.$tb);var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("table.insert",i,o,e.outerHeight())}}function i(){var n=$();if(n){var i=t.popups.get("table.edit");i||(i=l()),t.popups.setContainer("table.edit",e(t.opts.scrollableContainer));var o=I(n),r=(o.left+o.right)/2,s=o.bottom;t.popups.show("table.edit",r,s,o.bottom-o.top),se().length>1&&(t.toolbar.disable(),t.$el.removeClass("fr-no-selection"),t.edit.on(),t.selection.setAtEnd(t.$el.find(".fr-selected-cell:last").get(0)),t.selection.restore(),t.button.bulkRefresh())}}function o(){var n=$();if(n){var i=t.popups.get("table.colors");i||(i=c()),t.popups.setContainer("table.colors",e(t.opts.scrollableContainer));var o=I(n),r=(o.left+o.right)/2,s=o.bottom;d(),t.popups.show("table.colors",r,s,o.bottom-o.top)}}function r(){0===se().length&&t.toolbar.enable()}function s(n){if(n)return t.popups.onHide("table.insert",function(){t.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var i="";t.opts.tableInsertButtons.length>0&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.tableInsertButtons)+"</div>");var o={buttons:i,rows_columns:a()},r=t.popups.create("table.insert",o);return t.events.$on(r,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(n){var i=e(n.currentTarget),o=i.data("row"),r=i.data("col"),s=i.parent();s.siblings(".fr-table-size-info").html(o+" &times; "+r),s.find("> span").removeClass("hover");for(var a=1;a<=t.opts.tableInsertMaxSize;a++)for(var l=0;l<=t.opts.tableInsertMaxSize;l++){var c=s.find('> span[data-row="'+a+'"][data-col="'+l+'"]');o>=a&&r>=l?c.addClass("hover"):o+1>=a||2>=a&&!t.helpers.isMobile()?c.css("display","inline-block"):a>2&&!t.helpers.isMobile()&&c.css("display","none")}},!0),r}function a(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',n=1;n<=t.opts.tableInsertMaxSize;n++){for(var i=1;i<=t.opts.tableInsertMaxSize;i++){var o="inline-block";n>2&&!t.helpers.isMobile()&&(o="none");var r="fr-table-cell ";1==n&&1==i&&(r+=" hover"),e+='<span class="fr-command '+r+'" data-cmd="tableInsert" data-row="'+n+'" data-col="'+i+'" data-param1="'+n+'" data-param2="'+i+'" style="display: '+o+';"><span></span></span>'}e+='<div class="new-line"></div>'}return e+="</div></div>"}function l(e){if(e)return t.popups.onHide("table.edit",r),!0;var n="";t.opts.tableEditButtons.length>0&&(n='<div class="fr-buttons">'+t.button.buildList(t.opts.tableEditButtons)+"</div>");var o={buttons:n},s=t.popups.create("table.edit",o);return t.events.$on(t.$wp,"scroll.table-edit",function(){t.popups.isVisible("table.edit")&&i()}),s}function c(){var e="";t.opts.tableColorsButtons.length>0&&(e='<div class="fr-buttons fr-table-colors-buttons">'+t.button.buildList(t.opts.tableColorsButtons)+"</div>");var n={buttons:e,colors:u()},i=t.popups.create("table.colors",n);return t.events.$on(t.$wp,"scroll.table-colors",function(){t.popups.isVisible("table.colors")&&o()}),i}function u(){for(var e='<div class="fr-table-colors">',n=0;n<t.opts.tableColors.length;n++)0!==n&&n%t.opts.tableColorsStep===0&&(e+="<br>"),e+="REMOVE"!=t.opts.tableColors[n]?'<span class="fr-command" style="background: '+t.opts.tableColors[n]+';" data-cmd="tableCellBackgroundColor" data-param1="'+t.opts.tableColors[n]+'"></span>':'<span class="fr-command" data-cmd="tableCellBackgroundColor" data-param1="REMOVE" title="'+t.language.translate("Clear Formatting")+'"><i class="fa fa-eraser"></i></span>';return e+="</div>"}function d(){var e=t.popups.get("table.colors"),n=t.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color"),e.find('span[data-param1="'+t.helpers.RGBToHex(n.css("background-color"))+'"]').addClass("fr-selected-color")}function p(n,i){var o,r,s='<table style="width: 100%;"><tbody>',a=100/i;for(o=0;n>o;o++){for(s+="<tr>",r=0;i>r;r++)s+='<td style="width: '+a.toFixed(4)+'%;">',0===o&&0===r&&(s+=e.FE.MARKERS),s+="<br></td>";s+="</tr>"}s+="</tbody></table>",t.html.insert(s),t.selection.restore()}function f(){if(se().length>0){var e=ae();t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),t.selection.restore(),t.popups.hide("table.edit"),e.remove()}}function h(){var t=ae();if(t.length>0&&0===t.find("th").length){var n,o="<thead><tr>",r=0;for(t.find("tr:first > td").each(function(){var t=e(this);r+=parseInt(t.attr("colspan"),10)||1}),n=0;r>n;n++)o+="<th><br></th>";o+="</tr></thead>",t.prepend(o),i()}}function g(){var e=ae(),n=e.find("thead");if(n.length>0)if(0===e.find("tbody tr").length)f();else if(n.remove(),se().length>0)i();else{t.popups.hide("table.edit");var o=e.find("tbody tr:first td:first").get(0);o&&(t.selection.setAtEnd(o),t.selection.restore())}}function m(n){var o=ae();if(o.length>0){if(t.$el.find("th.fr-selected-cell").length>0&&"above"==n)return;var r,s,a=$(),l=O(a);s="above"==n?l.min_i:l.max_i;var c="<tr>";for(r=0;r<a[s].length;r++)if("below"==n&&s<a.length-1&&a[s][r]==a[s+1][r]||"above"==n&&s>0&&a[s][r]==a[s-1][r]){if(0===r||r>0&&a[s][r]!=a[s][r-1]){var u=e(a[s][r]);u.attr("rowspan",parseInt(u.attr("rowspan"),10)+1)}}else c+="<td><br></td>";c+="</tr>";var d=e(o.find("tr").not(o.find("table tr")).get(s));"below"==n?d.after(c):"above"==n&&(d.before(c),t.popups.isVisible("table.edit")&&i())}}function v(){var n=ae();if(n.length>0){var i,o,r,s=$(),a=O(s);if(0===a.min_i&&a.max_i==s.length-1)f();else{for(i=a.max_i;i>=a.min_i;i--){for(r=e(n.find("tr").not(n.find("table tr")).get(i)),o=0;o<s[i].length;o++)if(0===o||s[i][o]!=s[i][o-1]){var l=e(s[i][o]);if(parseInt(l.attr("rowspan"),10)>1){var c=parseInt(l.attr("rowspan"),10)-1;1==c?l.removeAttr("rowspan"):l.attr("rowspan",c)}if(i<s.length-1&&s[i][o]==s[i+1][o]&&(0===i||s[i][o]!=s[i-1][o])){for(var u=s[i][o],d=o;d>0&&s[i][d]==s[i][d-1];)d--;0===d?e(n.find("tr").not(n.find("table tr")).get(i+1)).prepend(u):e(s[i+1][d-1]).after(u)}}var p=r.parent();r.remove(),0===p.find("tr").length&&p.remove(),s=$(n)}a.min_i>0?t.selection.setAtEnd(s[a.min_i-1][0]):t.selection.setAtEnd(s[0][0]),t.selection.restore(),t.popups.hide("table.edit")}}}function b(n){var o=ae();if(o.length>0){var r,s=$(),a=O(s);r="before"==n?a.min_j:a.max_j;var l,c=100/s[0].length,u=100/(s[0].length+1);o.find("th, td").each(function(){l=e(this),l.data("old-width",l.outerWidth()/o.outerWidth()*100)}),o.find("tr").not(o.find("table tr")).each(function(t){for(var i,o=e(this),a=0,l=0;r>a-1;){if(i=o.find("> th, > td").get(l),!i){i=null;break}i==s[t][a]?(a+=parseInt(e(i).attr("colspan"),10)||1,l++):(a+=parseInt(e(s[t][a]).attr("colspan"),10)||1,"after"==n&&(i=0===l?-1:o.find("> th, > td").get(l-1)))}var d=e(i);if("after"==n&&a-1>r||"before"==n&&r>0&&s[t][r]==s[t][r-1]){if(0===t||t>0&&s[t][r]!=s[t-1][r]){var p=parseInt(d.attr("colspan"),10)+1;d.attr("colspan",p),d.css("width",(d.data("old-width")*u/c+u).toFixed(4)+"%"),d.removeData("old-width")}}else{var f;f=o.find("th").length>0?'<th style="width: '+u.toFixed(4)+'%;"><br></th>':'<td style="width: '+u.toFixed(4)+'%;"><br></td>',-1==i?o.prepend(f):null==i?o.append(f):"before"==n?d.before(f):"after"==n&&d.after(f)}}),o.find("th, td").each(function(){l=e(this),l.data("old-width")&&(l.css("width",(l.data("old-width")*u/c).toFixed(4)+"%"),l.removeData("old-width"))}),t.popups.isVisible("table.edit")&&i()}}function y(){var n=ae();if(n.length>0){var i,o,r,s=$(),a=O(s);if(0===a.min_j&&a.max_j==s[0].length-1)f();else{var l=100/s[0].length,c=100/(s[0].length-a.max_j+a.min_j-1);for(n.find("th, td").each(function(){r=e(this),r.hasClass("fr-selected-cell")||r.data("old-width",r.outerWidth()/n.outerWidth()*100)}),o=a.max_j;o>=a.min_j;o--)for(i=0;i<s.length;i++)if(0===i||s[i][o]!=s[i-1][o])if(r=e(s[i][o]),parseInt(r.attr("colspan"),10)>1){var u=parseInt(r.attr("colspan"),10)-1;1==u?r.removeAttr("colspan"):r.attr("colspan",u),r.css("width",((r.data("old-width")-J(o,s))*c/l).toFixed(4)+"%"),r.removeData("old-width")}else{var d=e(r.parent().get(0));r.remove(),0===d.find("> th, > td").length&&(0===d.prev().length||0===d.next().length||d.prev().find("> th[rowspan], > td[rowspan]").length<d.prev().find("> th, > td").length)&&d.remove()}a.min_j>0?t.selection.setAtEnd(s[a.min_i][a.min_j-1]):t.selection.setAtEnd(s[a.min_i][0]),t.selection.restore(),t.popups.hide("table.edit"),n.find("th, td").each(function(){r=e(this),r.data("old-width")&&(r.css("width",(r.data("old-width")*c/l).toFixed(4)+"%"),r.removeData("old-width"))})}}}function w(){if(se().length>1&&(0===t.$el.find("th.fr-selected-cell").length||0===t.$el.find("td.fr-selected-cell").length)){var n,o,r,s=$(),a=O(s),l=t.$el.find(".fr-selected-cell"),c=e(l[0]),u=c.parent(),d=u.find(".fr-selected-cell"),p=c.closest("table"),f=c.html(),h=0;for(n=0;n<d.length;n++)h+=e(d[n]).outerWidth();for(c.css("width",(h/u.outerWidth()*100).toFixed(4)+"%"),a.min_j<a.max_j&&c.attr("colspan",a.max_j-a.min_j+1),a.min_i<a.max_i&&c.attr("rowspan",a.max_i-a.min_i+1),n=1;n<l.length;n++)o=e(l[n]),"<br>"!=o.html()&&""!==o.html()&&(f+="<br>"+o.html()),o.remove();c.html(f),t.selection.setAtEnd(c.get(0)),t.selection.restore(),t.toolbar.enable();var g=p.find("tr:empty");for(n=g.length-1;n>=0;n--)r=e(g[n]),(0===r.prev().length||0===r.next().length||r.prev().find("> th[rowspan], > td[rowspan]").length<r.prev().find("> th, > td").length)&&r.remove();i()}}function E(){if(1==se().length){var n=t.$el.find(".fr-selected-cell"),i=n.parent(),o=n.closest("table"),r=parseInt(n.attr("rowspan"),10),s=$(),a=_(n.get(0),s),l=n.clone().html("<br>");if(r>1){var c=Math.ceil(r/2);c>1?n.attr("rowspan",c):n.removeAttr("rowspan"),r-c>1?l.attr("rowspan",r-c):l.removeAttr("rowspan");for(var u=a.row+c,d=0===a.col?a.col:a.col-1;d>=0&&(s[u][d]==s[u][d-1]||u>0&&s[u][d]==s[u-1][d]);)d--;-1==d?e(o.find("tr").not(o.find("table tr")).get(u)).prepend(l):e(s[u][d]).after(l)}else{var p,f=e("<tr>").append(l);for(p=0;p<s[0].length;p++)if(0===p||s[a.row][p]!=s[a.row][p-1]){var h=e(s[a.row][p]);h.is(n)||h.attr("rowspan",(parseInt(h.attr("rowspan"),10)||1)+1)}i.after(f)}N(),t.popups.hide("table.edit")}}function x(){if(1==se().length){var n=t.$el.find(".fr-selected-cell"),i=parseInt(n.attr("colspan"),10)||1,o=n.parent().outerWidth(),r=n.outerWidth(),s=n.clone().html("<br>"),a=$(),l=_(n.get(0),a);if(i>1){var c=Math.ceil(i/2);r=Z(l.col,l.col+c-1,a)/o*100;var u=Z(l.col+c,l.col+i-1,a)/o*100;c>1?n.attr("colspan",c):n.removeAttr("colspan"),i-c>1?s.attr("colspan",i-c):s.removeAttr("colspan"),n.css("width",r.toFixed(4)+"%"),s.css("width",u.toFixed(4)+"%")}else{var d;for(d=0;d<a.length;d++)if(0===d||a[d][l.col]!=a[d-1][l.col]){var p=e(a[d][l.col]);if(!p.is(n)){var f=(parseInt(p.attr("colspan"),10)||1)+1;p.attr("colspan",f)}}r=r/o*100/2,n.css("width",r.toFixed(4)+"%"),s.css("width",r.toFixed(4)+"%")}n.after(s),N(),t.popups.hide("table.edit")}}function C(e){"REMOVE"!=e?t.$el.find(".fr-selected-cell").css("background-color",t.helpers.HEXtoRGB(e)):t.$el.find(".fr-selected-cell").css("background-color","")}function S(e){t.$el.find(".fr-selected-cell").css("vertical-align",e)}function T(e){t.$el.find(".fr-selected-cell").css("text-align",e)}function k(e,t,n,i){if(t.length>0){if(!n){var o=Object.keys(i);o.splice(o.indexOf(e),1),t.removeClass(o.join(" "))}t.toggleClass(e)}}function $(t){t=t||null;var n=[];if(null==t&&se().length>0&&(t=ae()),t){var i=e(t);return i.find("tr").not(i.find("table tr")).each(function(t,i){var o=e(i),r=0;o.find("> th, > td").each(function(i,o){for(var s=e(o),a=parseInt(s.attr("colspan"),10)||1,l=parseInt(s.attr("rowspan"),10)||1,c=t;t+l>c;c++)for(var u=r;r+a>u;u++)n[c]||(n[c]=[]),n[c][u]?r++:n[c][u]=o;r+=a})}),n}}function _(e,t){for(var n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)if(t[n][i]==e)return{row:n,col:i}}function A(e,t,n){for(var i=e+1,o=t+1;i<n.length;){if(n[i][t]!=n[e][t]){i--;break}i++}for(i==n.length&&i--;o<n[e].length;){if(n[e][o]!=n[e][t]){o--;break}o++}return o==n[e].length&&o--,{row:i,col:o}}function N(){var n=t.$el.find(".fr-selected-cell");n.length>0&&n.each(function(){var t=e(this);t.removeClass("fr-selected-cell"),""===t.attr("class")&&t.removeAttr("class")})}function D(){setTimeout(function(){t.selection.clear(),t.$el.addClass("fr-no-selection"),t.edit.off(),t.$el.blur()},0)}function O(e){var n,i=e.length,o=0,r=e[0].length,s=0,a=t.$el.find(".fr-selected-cell");for(n=0;n<a.length;n++){var l=_(a[n],e),c=A(l.row,l.col,e);i=Math.min(l.row,i),o=Math.max(c.row,o),r=Math.min(l.col,r),s=Math.max(c.col,s)}return{min_i:i,max_i:o,min_j:r,max_j:s}}function F(t,n,i,o,r){var s,a,l,c,u=t,d=n,p=i,f=o;for(s=u;d>=s;s++)((parseInt(e(r[s][p]).attr("rowspan"),10)||1)>1||(parseInt(e(r[s][p]).attr("colspan"),10)||1)>1)&&(l=_(r[s][p],r),c=A(l.row,l.col,r),u=Math.min(l.row,u),d=Math.max(c.row,d),p=Math.min(l.col,p),f=Math.max(c.col,f)),((parseInt(e(r[s][f]).attr("rowspan"),10)||1)>1||(parseInt(e(r[s][f]).attr("colspan"),10)||1)>1)&&(l=_(r[s][f],r),c=A(l.row,l.col,r),u=Math.min(l.row,u),d=Math.max(c.row,d),p=Math.min(l.col,p),f=Math.max(c.col,f));for(a=p;f>=a;a++)((parseInt(e(r[u][a]).attr("rowspan"),10)||1)>1||(parseInt(e(r[u][a]).attr("colspan"),10)||1)>1)&&(l=_(r[u][a],r),c=A(l.row,l.col,r),u=Math.min(l.row,u),d=Math.max(c.row,d),p=Math.min(l.col,p),f=Math.max(c.col,f)),((parseInt(e(r[d][a]).attr("rowspan"),10)||1)>1||(parseInt(e(r[d][a]).attr("colspan"),10)||1)>1)&&(l=_(r[d][a],r),c=A(l.row,l.col,r),u=Math.min(l.row,u),d=Math.max(c.row,d),p=Math.min(l.col,p),f=Math.max(c.col,f));return u==t&&d==n&&p==i&&f==o?{min_i:t,max_i:n,min_j:i,max_j:o}:F(u,d,p,f,r)}function I(t){var n=O(t),i=e(t[n.min_i][n.min_j]),o=e(t[n.min_i][n.max_j]),r=e(t[n.max_i][n.min_j]),s=i.offset().left,a=o.offset().left+o.outerWidth(),l=i.offset().top,c=r.offset().top+r.outerHeight();return{left:s,right:a,top:l,bottom:c}}function R(t,n){if(e(t).is(n))N(),e(t).addClass("fr-selected-cell");else{D();var i=$(),o=_(t,i),r=_(n,i),s=F(Math.min(o.row,r.row),Math.max(o.row,r.row),Math.min(o.col,r.col),Math.max(o.col,r.col),i);N();for(var a=s.min_i;a<=s.max_i;a++)for(var l=s.min_j;l<=s.max_j;l++)e(i[a][l]).addClass("fr-selected-cell")}}function L(n){var i=null,o=e(n.target);return"TD"==n.target.tagName||"TH"==n.target.tagName?i=n.target:o.closest("td").length>0?i=o.closest("td").get(0):o.closest("th").length>0&&(i=o.closest("th").get(0)),0===t.$el.find(i).length?null:i}function M(){N(),t.popups.hide("table.edit")}function B(n){var i=L(n);if(se().length>0&&!i&&M(),1==n.which){if(de=!0,i){se().length>0&&!n.shiftKey&&M(),n.stopPropagation(),t.events.trigger("image.hideResizer"),t.events.trigger("video.hideResizer"),ue=!0;var o=i.tagName.toLowerCase();n.shiftKey&&t.$el.find(o+".fr-selected-cell").length>0?e(t.$el.find(o+".fr-selected-cell").closest("table")).is(e(i).closest("table"))?R(pe,i):D():((t.keys.ctrlKey(n)||n.shiftKey)&&D(),pe=i,R(pe,pe))}}else 3==n.which&&i&&M()}function P(n){if(1==n.which){if(de=!1,ue){ue=!1;var o=L(n);o||1!=se().length?se().length>0&&(t.selection.isCollapsed()?i():N()):N()}else t.$tb.is(n.target)||t.$tb.is(e(n.target).closest(t.$tb.get(0)))||(t.$el.get(0).querySelectorAll(".fr-selected-cell").length>0&&t.toolbar.enable(),N());if(he){he=!1,le.removeClass("fr-moving"),t.$el.removeClass("fr-no-selection"),t.edit.on();var r=parseFloat(le.css("left"))+t.opts.tableResizerOffset;t.opts.iframe&&(r-=t.$iframe.offset().left),le.data("release-position",r),le.removeData("max-left"),le.removeData("max-right"),G(n),U()}}}function j(n){if(ue===!0){var i=e(n.currentTarget);if(i.closest("table").is(ae())){if("TD"==n.currentTarget.tagName&&0===t.$el.find("th.fr-selected-cell").length)return void R(pe,n.currentTarget);if("TH"==n.currentTarget.tagName&&0===t.$el.find("td.fr-selected-cell").length)return void R(pe,n.currentTarget)}D()}}function H(e){(37==e.which||38==e.which||39==e.which||40==e.which)&&se().length>0&&M()}function z(){t.shared.$table_resizer||(t.shared.$table_resizer=e('<div class="fr-table-resizer"><div></div></div>')),le=t.shared.$table_resizer,t.events.$on(le,"mousedown",function(e){return t.core.sameInstance(le)?(se().length>0&&M(),1==e.which?(he=!0,le.addClass("fr-moving"),D(),le.find("div").css("opacity",1),!1):void 0):!0}),t.events.$on(le,"mousemove",function(e){return t.core.sameInstance(le)?void(he&&(t.opts.iframe&&(e.pageX-=t.$iframe.offset().left),ee(e))):!0}),t.events.on("shared.destroy",function(){le.html("").removeData().remove()},!0),t.events.on("destroy",function(){t.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),le.hide().appendTo(e("body"))},!0)}function U(){le&&(le.find("div").css("opacity",0),le.css("top",0),le.css("left",0),le.css("height",0),le.find("div").css("height",0),le.hide())}function q(){ce&&ce.removeClass("fr-visible").css("left","-9999px")}function W(n,i){var o=e(i),r=o.closest("table");if(i&&"TD"!=i.tagName&&"TH"!=i.tagName&&(o.closest("td").length>0?i=o.closest("td"):o.closest("th").length>0&&(i=o.closest("th"))),!i||"TD"!=i.tagName&&"TH"!=i.tagName)le&&o.get(0)!=le.get(0)&&o.parent().get(0)!=le.get(0)&&t.core.sameInstance(le)&&U();else{if(o=e(i),0===t.$el.find(o).length)return!1;var s=o.offset().left-1,a=s+o.outerWidth();if(Math.abs(n.pageX-s)<=t.opts.tableResizerOffset||Math.abs(a-n.pageX)<=t.opts.tableResizerOffset){var l,c,u,d,p,f=$(r),h=_(i,f),g=A(h.row,h.col,f),m=r.offset().top,v=r.outerHeight()-1;if(h.col>0&&n.pageX-s<=t.opts.tableResizerOffset){u=s;var b=e(f[h.row][h.col-1]);d=1==(parseInt(b.attr("colspan"),10)||1)?b.offset().left-1+t.opts.tableResizingLimit:s-J(h.col-1,f)+t.opts.tableResizingLimit,p=1==(parseInt(o.attr("colspan"),10)||1)?s+o.outerWidth()-t.opts.tableResizingLimit:s+J(h.col,f)-t.opts.tableResizingLimit,l=h.col-1,c=h.col}else if(a-n.pageX<=t.opts.tableResizerOffset)if(u=a,g.col<f[g.row].length&&f[g.row][g.col+1]){var y=e(f[g.row][g.col+1]);d=1==(parseInt(o.attr("colspan"),10)||1)?s+t.opts.tableResizingLimit:a-J(g.col,f)+t.opts.tableResizingLimit,p=1==(parseInt(y.attr("colspan"),10)||1)?a+y.outerWidth()-t.opts.tableResizingLimit:a+J(h.col+1,f)-t.opts.tableResizingLimit,l=g.col,c=g.col+1}else{l=g.col,c=null;var w=r.parent();d=r.offset().left-1+f[0].length*t.opts.tableResizingLimit,p=w.offset().left-1+w.width()+parseFloat(w.css("padding-left"))}le||z(),le.data("table",r),le.data("first",l),le.data("second",c),le.data("instance",t),t.$wp.append(le);var E=u-t.win.pageXOffset-t.opts.tableResizerOffset,x=m-t.win.pageYOffset;t.opts.iframe&&(E+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),x+=t.$iframe.offset().top-e(t.o_win).scrollTop(),d+=t.$iframe.offset().left,p+=t.$iframe.offset().left),le.data("max-left",d),le.data("max-right",p),le.data("origin",u-t.win.pageXOffset),le.css("top",x),le.css("left",E),le.css("height",v),le.find("div").css("height",v),le.css("padding-left",t.opts.tableResizerOffset),le.css("padding-right",t.opts.tableResizerOffset),le.show()}else t.core.sameInstance(le)&&U()}}function K(n,i){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;ce||ie(),t.$box.append(ce),ce.data("instance",t);var o=e(i),r=o.find("tr:first"),s=n.pageX,a=0,l=0;t.opts.iframe&&(a+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),l+=t.$iframe.offset().top-e(t.o_win).scrollTop());var c;r.find("th, td").each(function(){var n=e(this);return n.offset().left<=s&&s<n.offset().left+n.outerWidth()/2?(c=parseInt(ce.find("a").css("width"),10),ce.css("top",l+n.offset().top-t.win.pageYOffset-c-5),ce.css("left",a+n.offset().left-t.win.pageXOffset-c/2),ce.data("selected-cell",n),ce.data("position","before"),ce.addClass("fr-visible"),!1):n.offset().left+n.outerWidth()/2<=s&&s<n.offset().left+n.outerWidth()?(c=parseInt(ce.find("a").css("width"),10),ce.css("top",l+n.offset().top-t.win.pageYOffset-c-5),ce.css("left",a+n.offset().left+n.outerWidth()-t.win.pageXOffset-c/2),ce.data("selected-cell",n),ce.data("position","after"),ce.addClass("fr-visible"),!1):void 0})}function X(n,i){if(t.$box.find(".fr-line-breaker").is(":visible"))return!1;ce||ie(),t.$box.append(ce),ce.data("instance",t);var o=e(i),r=n.pageY,s=0,a=0;t.opts.iframe&&(s+=t.$iframe.offset().left-e(t.o_win).scrollLeft(),a+=t.$iframe.offset().top-e(t.o_win).scrollTop());var l;o.find("tr").each(function(){var n=e(this);return n.offset().top<=r&&r<n.offset().top+n.outerHeight()/2?(l=parseInt(ce.find("a").css("width"),10),ce.css("top",a+n.offset().top-t.win.pageYOffset-l/2),ce.css("left",s+n.offset().left-t.win.pageXOffset-l-5),ce.data("selected-cell",n.find("td:first")),ce.data("position","above"),ce.addClass("fr-visible"),!1):n.offset().top+n.outerHeight()/2<=r&&r<n.offset().top+n.outerHeight()?(l=parseInt(ce.find("a").css("width"),10),ce.css("top",a+n.offset().top+n.outerHeight()-t.win.pageYOffset-l/2),ce.css("left",s+n.offset().left-t.win.pageXOffset-l-5),ce.data("selected-cell",n.find("td:first")),ce.data("position","below"),ce.addClass("fr-visible"),!1):void 0})}function Y(n,i){if(0===se().length){var o,r,s;if(i&&("HTML"==i.tagName||"BODY"==i.tagName||t.node.isElement(i)))for(o=1;o<=t.opts.tableInsertHelperOffset;o++){if(r=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset,n.pageY-t.win.pageYOffset+o),e(r).hasClass("fr-tooltip"))return!0;if(r&&("TH"==r.tagName||"TD"==r.tagName||"TABLE"==r.tagName)&&(e(r).parents(".fr-wrapper").length||t.opts.iframe))return K(n,r.closest("table")),!0;if(s=t.doc.elementFromPoint(n.pageX-t.win.pageXOffset+o,n.pageY-t.win.pageYOffset),e(s).hasClass("fr-tooltip"))return!0;if(s&&("TH"==s.tagName||"TD"==s.tagName||"TABLE"==s.tagName)&&(e(s).parents(".fr-wrapper").length||t.opts.iframe))return X(n,s.closest("table")),!0}t.core.sameInstance(ce)&&q()}}function V(e){fe=null;var n=t.doc.elementFromPoint(e.pageX-t.win.pageXOffset,e.pageY-t.win.pageYOffset);(!t.popups.areVisible()||t.popups.areVisible()&&t.popups.isVisible("table.edit"))&&W(e,n),t.popups.areVisible()||t.$tb.hasClass("fr-inline")&&t.$tb.is(":visible")||Y(e,n)}function Q(){if(he){var n=le.data("table"),i=n.offset().top-t.win.pageYOffset;t.opts.iframe&&(i+=t.$iframe.offset().top-e(t.o_win).scrollTop()),le.css("top",i)}}function G(){var n=le.data("origin"),i=le.data("release-position");if(n!==i){var o=le.data("first"),r=le.data("second"),s=le.data("table"),a=s.outerWidth();if(null!==o&&null!==r){var l,c,u,d=$(s),p=[],f=[],h=[],g=[];for(l=0;l<d.length;l++)c=e(d[l][o]),u=e(d[l][r]),p[l]=c.outerWidth(),h[l]=u.outerWidth(),f[l]=p[l]/a*100,g[l]=h[l]/a*100;for(l=0;l<d.length;l++){c=e(d[l][o]),u=e(d[l][r]);var m=(f[l]*(p[l]+i-n)/p[l]).toFixed(4);c.css("width",m+"%"),u.css("width",(f[l]+g[l]-m).toFixed(4)+"%")}}else{var v,b=s.parent(),y=a/b.width()*100;v=null==o?(a-i+n)/a*y:(a+i-n)/a*y,s.css("width",Math.round(v).toFixed(4)+"%")}}le.removeData("origin"),le.removeData("release-position"),le.removeData("first"),le.removeData("second"),le.removeData("table"),t.undo.saveStep()}function J(t,n){var i,o=e(n[0][t]).outerWidth();for(i=1;i<n.length;i++)o=Math.min(o,e(n[i][t]).outerWidth());return o}function Z(e,t,n){var i,o=0;for(i=e;t>=i;i++)o+=J(i,n);return o}function ee(e){if(se().length>1&&de&&D(),de===!1&&ue===!1&&he===!1)fe&&clearTimeout(fe),fe=setTimeout(V,30,e);else if(he){var n=e.pageX-t.win.pageXOffset;t.opts.iframe&&(n+=t.$iframe.offset().left);var i=le.data("max-left"),o=le.data("max-right");n>=i&&o>=n?le.css("left",n-t.opts.tableResizerOffset):i>n&&parseFloat(le.css("left"),10)>i-t.opts.tableResizerOffset?le.css("left",i-t.opts.tableResizerOffset):n>o&&parseFloat(le.css("left"),10)<o-t.opts.tableResizerOffset&&le.css("left",o-t.opts.tableResizerOffset)}else de&&q()}function te(n){t.node.isEmpty(n.get(0))?n.prepend(e.FE.MARKERS):n.prepend(e.FE.START_MARKER).append(e.FE.END_MARKER)}function ne(n){var i=n.which;if(i==e.FE.KEYCODE.TAB&&0===t.opts.tabSpaces){var o;if(se().length>0)o=t.$el.find(".fr-selected-cell:last");else{var r=t.selection.element();"TD"==r.tagName||"TH"==r.tagName?o=e(r):e(r).closest("td").length>0?o=e(r).closest("td"):e(r).closest("th").length>0&&(o=e(r).closest("th"))}o&&(n.preventDefault(),M(),n.shiftKey?o.prev().length>0?te(o.prev()):o.closest("tr").length>0&&o.closest("tr").prev().length>0?te(o.closest("tr").prev().find("td:last")):o.closest("tbody").length>0&&o.closest("table").find("thead tr").length>0&&te(o.closest("table").find("thead tr th:last")):o.next().length>0?te(o.next()):o.closest("tr").length>0&&o.closest("tr").next().length>0?te(o.closest("tr").next().find("td:first")):o.closest("thead").length>0&&o.closest("table").find("tbody tr").length>0?te(o.closest("table").find("tbody tr td:first")):(o.addClass("fr-selected-cell"),m("below"),N(),te(o.closest("tr").next().find("td:first"))),t.selection.restore())}}function ie(){t.shared.$ti_helper||(t.shared.$ti_helper=e('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabindex="-1" title="'+t.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),t.events.bindClick(t.shared.$ti_helper,"a",function(){var e=ce.data("selected-cell"),n=ce.data("position"),i=ce.data("instance")||t;"before"==n?(e.addClass("fr-selected-cell"),i.table.insertColumn(n),e.removeClass("fr-selected-cell")):"after"==n?(e.addClass("fr-selected-cell"),i.table.insertColumn(n),e.removeClass("fr-selected-cell")):"above"==n?(e.addClass("fr-selected-cell"),i.table.insertRow(n),e.removeClass("fr-selected-cell")):"below"==n&&(e.addClass("fr-selected-cell"),i.table.insertRow(n),e.removeClass("fr-selected-cell")),q()}),t.events.on("shared.destroy",function(){t.shared.$ti_helper.html("").removeData().remove()},!0),t.events.$on(t.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),t.events.$on(e(t.o_win),"scroll",function(){q()},!0),t.events.$on(t.$wp,"scroll",function(){q()},!0)),ce=t.shared.$ti_helper,t.tooltip.bind(t.$box,".fr-insert-helper > a.fr-floating-btn")}function oe(){if(!t.$wp)return!1;if(!t.helpers.isMobile()){de=!1,ue=!1,he=!1,t.events.$on(t.$el,"mousedown",B),t.popups.onShow("image.edit",function(){N(),de=!1,ue=!1}),t.popups.onShow("link.edit",function(){N(),de=!1,ue=!1}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&N()}),t.events.$on(t.$el,"mouseenter","th, td",j),t.events.$on(t.$win,"mouseup",P),t.opts.iframe&&t.events.$on(e(t.o_win),"mouseup",P),t.events.$on(t.$el,"keydown",H),t.events.$on(t.$win,"mousemove",ee),t.events.$on(e(t.o_win),"scroll",Q),t.events.on("contentChanged",function(){se().length>0&&(i(),t.$el.find("img").on("load.selected-cells",function(){e(this).off("load.selected-cells"),se().length>0&&i()}))}),t.events.$on(e(t.o_win),"resize",function(){N()}),t.events.on("keydown",function(n){var i=t.$el.get(0).querySelectorAll(".fr-selected-cell");if(i.length>0){if(n.which==e.FE.KEYCODE.ESC&&t.popups.isVisible("table.edit"))return N(),t.popups.hide("table.edit"),n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),!1;if(i.length>1)return n.preventDefault(),!1}},!0);var n;t.events.on("html.beforeGet",function(){n=t.$el.find(".fr-selected-cell"),n.removeClass("fr-selected-cell")}),t.events.on("html.get",function(e){return e=e.replace(/<(td|th)((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/(td|th)>/g,"<$1$2$3>$4</$5>")}),t.events.on("html.afterGet",function(){n.addClass("fr-selected-cell")}),s(!0),l(!0)}t.events.on("keydown",ne,!0)}function re(){se().length>0?i():(t.popups.hide("table.insert"),t.toolbar.showInline())}function se(){return t.$el.get(0).querySelectorAll(".fr-selected-cell")}function ae(){var n=se();if(n.length){for(var i=n[0];i&&"TABLE"!=i.tagName&&i.parentNode!=t.$el.get(0);)i=i.parentNode;return e(i&&"TABLE"==i.tagName?i:[])}}var le,ce,ue,de,pe,fe,he;return{_init:oe,insert:p,remove:f,insertRow:m,deleteRow:v,insertColumn:b,deleteColumn:y,mergeCells:w,splitCellVertically:x,splitCellHorizontally:E,addHeader:h,removeHeader:g,setBackground:C,showInsertPopup:n,showEditPopup:i,showColorsPopup:o,back:re,verticalAlign:S,horizontalAlign:T,applyStyle:k,selectedTable:ae,selectedCells:se}},e.FE.DefineIcon("insertTable",{NAME:"table"}),e.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),e.FE.RegisterCommand("tableInsert",{callback:function(e,t,n){this.table.insert(t,n),this.popups.hide("table.insert")}}),e.FE.DefineIcon("tableHeader",{NAME:"header"}),e.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,callback:function(){var e=this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]');e.hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();t.length>0&&(0===t.find("th").length?e.removeClass("fr-active"):e.addClass("fr-active"))}}),e.FE.DefineIcon("tableRows",{NAME:"bars"}),e.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableRows.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableRows" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+="</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),e.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),e.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableColumns.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableColumns" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+="</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),e.FE.DefineIcon("tableCells",{NAME:"square-o"}),e.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableCells.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableCells" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(n[i])+"</a></li>");return t+="</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){this.$el.find(".fr-selected-cell").length>1?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled"),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled"),t.find('a[data-param1="merge"]').removeClass("fr-disabled")):(t.find('a[data-param1="merge"]').addClass("fr-disabled"),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled"),
t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled"))}}),e.FE.DefineIcon("tableRemove",{NAME:"trash"}),e.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),e.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),e.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.tableStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" data-cmd="tableStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(t,n){var i=this.$el.find(".fr-selected-cell").closest("table");i&&n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",i.hasClass(t))})}}),e.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),e.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,callback:function(){this.table.showColorsPopup()}}),e.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),e.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),e.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableCellVerticalAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command" data-cmd="tableCellVerticalAlign" data-param1="'+i.toLowerCase()+'" title="'+this.language.translate(n[i])+'">'+this.language.translate(i)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active")}}),e.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),e.FE.DefineIcon("align-left",{NAME:"align-left"}),e.FE.DefineIcon("align-right",{NAME:"align-right"}),e.FE.DefineIcon("align-center",{NAME:"align-center"}),e.FE.DefineIcon("align-justify",{NAME:"align-justify"}),e.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.tableCellHorizontalAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command fr-title" data-cmd="tableCellHorizontalAlign" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("align-"+i)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(t){var n=this.table.selectedCells();n.length&&t.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(e(n[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active")}}),e.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),e.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.tableCellStyles;for(var n in t)t.hasOwnProperty(n)&&(e+='<li><a class="fr-command" data-cmd="tableCellStyle" data-param1="'+n+'" title="'+this.language.translate(t[n])+'">'+this.language.translate(t[n])+"</a></li>");return e+="</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(t,n){var i=this.$el.find(".fr-selected-cell:first");i&&n.find(".fr-command").each(function(){var t=e(this).data("param1");e(this).toggleClass("fr-active",i.hasClass(t))})}})}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.DEFAULTS,{}),e.FE.URLRegEx=/(\s|^|>)((http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+(\.[a-zA-Z]{2,3})?(:\d*)?(\/[^\s<]*)?)(\s|$|<)/gi,e.FE.PLUGINS.url=function(t){function n(i){i.each(function(){if("IFRAME"!=this.tagName)if(3==this.nodeType){var i=this.textContent.replace(/&nbsp;/gi,"");e.FE.URLRegEx.test(i)&&(e(this).before(i.replace(e.FE.URLRegEx,'$1<a href="$2">$2</a>$7')),e(this).remove())}else 1==this.nodeType&&["A","BUTTON","TEXTAREA"].indexOf(this.tagName)<0&&n(t.node.contents(this))})}function i(){t.events.on("paste.afterCleanup",function(t){return e.FE.URLRegEx.test(t)?t.replace(e.FE.URLRegEx,'$1<a href="$2">$2</a>$7'):void 0}),t.events.on("keyup",function(i){var o=i.which;(o==e.FE.KEYCODE.ENTER||o==e.FE.KEYCODE.SPACE)&&n(t.node.contents(t.$el.get(0)))}),t.events.on("keydown",function(n){var i=n.which;if(i==e.FE.KEYCODE.ENTER){var o=t.selection.element();if(("A"==o.tagName||e(o).parents("a").length)&&t.selection.info(o).atEnd)return n.stopImmediatePropagation(),"A"!==o.tagName&&(o=e(o).parents("a")[0]),e(o).after("&nbsp;"+e.FE.MARKERS),t.selection.restore(),!1}})}return{_init:i}}}),/*!
 * froala_editor v2.2.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2016 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n),n}:e(jQuery)}(function(e){"use strict";e.extend(e.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{videoInsertButtons:["videoBack","|","videoByURL","videoEmbed"],videoEditButtons:["videoDisplay","videoAlign","videoSize","videoRemove"],videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoDefaultAlign:"center",videoDefaultDisplay:"block",videoMove:!0}),e.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be\/)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com)\/(?:channels\/[A-z]+\/|groups\/[A-z]+\/videos\/)?(.+)/g,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>'},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>'}],e.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,e.FE.PLUGINS.video=function(t){function n(){var e=t.popups.get("video.insert"),n=e.find(".fr-video-by-url-layer input");n.val("").trigger("change");var i=e.find(".fr-video-embed-layer textarea");i.val("").trigger("change")}function i(){var e=t.$tb.find('.fr-command[data-cmd="insertVideo"]'),n=t.popups.get("video.insert");if(n||(n=r()),!n.hasClass("fr-active")){t.popups.refresh("video.insert"),t.popups.setContainer("video.insert",t.$tb);var i=e.offset().left+e.outerWidth()/2,o=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("video.insert",i,o,e.outerHeight())}}function o(){var n=t.popups.get("video.edit");n||(n=S()),t.popups.setContainer("video.edit",e(t.opts.scrollableContainer)),t.popups.refresh("video.edit");var i=U.find("iframe, embed, video"),o=i.offset().left+i.outerWidth()/2,r=i.offset().top+i.outerHeight();t.popups.show("video.edit",o,r,i.outerHeight())}function r(e){if(e)return t.popups.onRefresh("video.insert",n),!0;var i="";t.opts.videoInsertButtons.length>1&&(i='<div class="fr-buttons">'+t.button.buildList(t.opts.videoInsertButtons)+"</div>");var o="";t.opts.videoInsertButtons.indexOf("videoByURL")>=0&&(o='<div class="fr-video-by-url-layer fr-layer fr-active" id="fr-video-by-url-layer-'+t.id+'"><div class="fr-input-line"><input type="text" placeholder="http://" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2">'+t.language.translate("Insert")+"</button></div></div>");var r="";t.opts.videoInsertButtons.indexOf("videoEmbed")>=0&&(r='<div class="fr-video-embed-layer fr-layer" id="fr-video-embed-layer-'+t.id+'"><div class="fr-input-line"><textarea type="text" placeholder="'+t.language.translate("Embedded Code")+'" tabIndex="1" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2">'+t.language.translate("Insert")+"</button></div></div>");var s={buttons:i,by_url_layer:o,embed_layer:r},a=t.popups.create("video.insert",s);return a}function s(e){var n,i,o=t.popups.get("video.insert");if(!U&&!t.opts.toolbarInline){var r=t.$tb.find('.fr-command[data-cmd="insertVideo"]');n=r.offset().left+r.outerWidth()/2,i=r.offset().top+(t.opts.toolbarBottom?10:r.outerHeight()-10)}t.opts.toolbarInline&&(i=o.offset().top-t.helpers.getPX(o.css("margin-top")),o.hasClass("fr-above")&&(i+=o.outerHeight())),o.find(".fr-layer").removeClass("fr-active"),o.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("video.insert",n,i,0)}function a(e){var n=t.popups.get("video.insert");n.find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active")}function l(e){var n=t.popups.get("video.insert");n.find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active")}function c(e){t.events.focus(!0),t.selection.restore(),t.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-dv'+t.opts.videoDefaultDisplay[0]+("center"!=t.opts.videoDefaultAlign?" fr-fv"+t.opts.videoDefaultAlign[0]:"")+'">'+e+"</span>",!1,t.opts.videoSplitHTML),t.popups.hide("video.insert");var n=t.$el.find(".fr-jiv");n.removeClass("fr-jiv"),n.toggleClass("fr-draggable",t.opts.videoMove),t.events.trigger("video.inserted",[n])}function u(n){if("undefined"==typeof n){var i=t.popups.get("video.insert");n=i.find('.fr-video-by-url-layer input[type="text"]').val()||""}var o=null;if(t.helpers.isURL(n))for(var r=0;r<e.FE.VIDEO_PROVIDERS.length;r++){var s=e.FE.VIDEO_PROVIDERS[r];if(s.test_regex.test(n)){o=n.replace(s.url_regex,s.url_text),o=s.html.replace(/\{url\}/,o);break}}o?c(o):t.events.trigger("video.linkError",[n])}function d(n){if("undefined"==typeof n){var i=t.popups.get("video.insert");n=i.find(".fr-video-embed-layer textarea").val()||""}0!==n.length&&e.FE.VIDEO_EMBED_REGEX.test(n)?c(n):t.events.trigger("video.codeError",[n])}function p(n){if(!t.core.sameInstance(z))return!0;n.preventDefault(),n.stopPropagation();var i=n.pageX||(n.originalEvent.touches?n.originalEvent.touches[0].pageX:null),o=n.pageY||(n.originalEvent.touches?n.originalEvent.touches[0].pageY:null);return i&&o?(t.undo.canDo()||t.undo.saveStep(),H=e(this),H.data("start-x",i),H.data("start-y",o),j.show(),t.popups.hideAll(),void E()):!1}function f(e){if(!t.core.sameInstance(z))return!0;if(H){e.preventDefault();var n=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!n||!i)return!1;var o=H.data("start-x"),r=H.data("start-y");H.data("start-x",n),H.data("start-y",i);var s=n-o,a=i-r,l=U.find("iframe, embed, video"),c=l.width(),u=l.height();(H.hasClass("fr-hnw")||H.hasClass("fr-hsw"))&&(s=0-s),(H.hasClass("fr-hnw")||H.hasClass("fr-hne"))&&(a=0-a),l.css("width",c+s),l.css("height",u+a),l.removeAttr("width"),l.removeAttr("height"),v()}}function h(e){return t.core.sameInstance(z)?void(H&&U&&(e&&e.stopPropagation(),H=null,j.hide(),v(),o(),t.undo.saveStep())):!0}function g(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function m(){var n;t.shared.$video_resizer?(z=t.shared.$video_resizer,j=t.shared.$vid_overlay,t.events.on("destroy",function(){z.removeClass("fr-active").appendTo(e("body"))},!0)):(t.shared.$video_resizer=e('<div class="fr-video-resizer"></div>'),z=t.shared.$video_resizer,t.events.$on(z,"mousedown",function(e){e.stopPropagation()},!0),t.opts.videoResize&&(z.append(g("nw")+g("ne")+g("sw")+g("se")),t.shared.$vid_overlay=e('<div class="fr-video-overlay"></div>'),j=t.shared.$vid_overlay,n=z.get(0).ownerDocument,e(n).find("body").append(j))),t.events.on("shared.destroy",function(){z.html("").removeData().remove(),t.opts.videoResize&&j.remove()},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize.video",function(){y(!0)}),t.opts.videoResize&&(n=z.get(0).ownerDocument,t.events.$on(z,t._mousedown,".fr-handler",p),t.events.$on(e(n),t._mousemove,f),t.events.$on(e(n.defaultView||n.parentWindow),t._mouseup,h),t.events.$on(j,"mouseleave",h))}function v(){z||m(),(t.$wp||e(t.opts.scrollableContainer)).append(z),z.data("instance",t);var n=U.find("iframe, embed, video");z.css("top",(t.opts.iframe?n.offset().top-1:n.offset().top-t.$wp.offset().top-1)+t.$wp.scrollTop()).css("left",(t.opts.iframe?n.offset().left-1:n.offset().left-t.$wp.offset().left-1)+t.$wp.scrollLeft()).css("width",n.outerWidth()).css("height",n.height()).addClass("fr-active")}function b(n){if(n&&"touchend"==n.type&&q)return!0;if(n.preventDefault(),n.stopPropagation(),t.edit.isDisabled())return!1;for(var i=0;i<e.FE.INSTANCES.length;i++)e.FE.INSTANCES[i]!=t&&e.FE.INSTANCES[i].events.trigger("video.hideResizer");t.toolbar.disable(),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),U=e(this),e(this).addClass("fr-active"),t.opts.iframe&&t.size.syncIframe(),v(),o(),t.selection.clear(),t.button.bulkRefresh(),t.events.trigger("image.hideResizer")}function y(e){U&&(x()||e===!0)&&(z.removeClass("fr-active"),t.toolbar.enable(),U.removeClass("fr-active"),U=null,E())}function w(){t.shared.vid_exit_flag=!0}function E(){t.shared.vid_exit_flag=!1}function x(){return t.shared.vid_exit_flag}function C(){t.events.on("mousedown window.mousedown",w),t.events.on("window.touchmove",E),t.events.on("mouseup window.mouseup",y),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&y()}),t.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){y(!0)})}function S(){var e="";t.opts.videoEditButtons.length>1&&(e+='<div class="fr-buttons">',e+=t.button.buildList(t.opts.videoEditButtons),e+="</div>");var n={buttons:e},i=t.popups.create("video.edit",n);return t.events.$on(t.$wp,"scroll.video-edit",function(){U&&t.popups.isVisible("video.edit")&&o()}),i}function T(){if(U){var e=t.popups.get("video.size"),n=U.find("iframe, embed, video");e.find('input[name="width"]').val(n.get(0).style.width||n.attr("width")).trigger("change"),e.find('input[name="height"]').val(n.get(0).style.height||n.attr("height")).trigger("change")}}function k(){var n=t.popups.get("video.size");n||(n=$()),t.popups.refresh("video.size"),t.popups.setContainer("video.size",e(t.opts.scrollableContainer));var i=U.find("iframe, embed, video"),o=i.offset().left+i.width()/2,r=i.offset().top+i.height();t.popups.show("video.size",o,r,i.height())}function $(e){if(e)return t.popups.onRefresh("video.size",T),!0;var n="";n='<div class="fr-buttons">'+t.button.buildList(t.opts.videoSizeButtons)+"</div>";var i="";i='<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+t.id+'"><div class="fr-video-group"><div class="fr-input-line"><input type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2">'+t.language.translate("Update")+"</button></div></div>";var o={buttons:n,size_layer:i},r=t.popups.create("video.size",o);return t.events.$on(t.$wp,"scroll",function(){U&&t.popups.isVisible("video.size")&&k()}),r}function _(e){U.removeClass("fr-fvr fr-fvl"),"left"==e?U.addClass("fr-fvl"):"right"==e&&U.addClass("fr-fvr"),v(),o()}function A(e){return U?void(U.hasClass("fr-fvl")?e.find("> *:first").replaceWith(t.icon.create("align-left")):U.hasClass("fr-fvr")?e.find("> *:first").replaceWith(t.icon.create("align-right")):e.find("> *:first").replaceWith(t.icon.create("align-justify"))):!1}function N(e,t){var n="justify";U.hasClass("fr-fvl")?n="left":U.hasClass("fr-fvr")&&(n="right"),t.find('.fr-command[data-param1="'+n+'"]').addClass("fr-active")}function D(e){U.removeClass("fr-dvi fr-dvb"),"inline"==e?U.addClass("fr-dvi"):"block"==e&&U.addClass("fr-dvb"),v(),o()}function O(e,t){var n="block";U.hasClass("fr-dvi")&&(n="inline"),t.find('.fr-command[data-param1="'+n+'"]').addClass("fr-active")}function F(){if(U&&t.events.trigger("video.beforeRemove",[U])!==!1){var e=U;t.popups.hideAll(),y(!0),t.selection.setBefore(e.get(0))||t.selection.setAfter(e.get(0)),e.remove(),t.selection.restore(),t.html.fillEmptyBlocks(),t.events.trigger("video.removed",[e])}}function I(e){if(!e.hasClass("fr-dvi")&&!e.hasClass("fr-dvb")){var n=e.css("float");e.css("float","none"),"block"==e.css("display")?(e.css("float",n),0===parseInt(e.css("margin-left"),10)&&(e.attr("style")||"").indexOf("margin-right: auto")>=0?e.addClass("fr-fvl"):0===parseInt(e.css("margin-right"),10)&&(e.attr("style")||"").indexOf("margin-left: auto")>=0&&e.addClass("fr-fvr"),e.addClass("fr-dvb")):(e.css("float",n),"left"==e.css("float")?e.addClass("fr-fvl"):"right"==e.css("float")&&e.addClass("fr-fvr"),e.addClass("fr-dvi")),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align","")}t.opts.videoTextNear||e.removeClass("fr-dvi").addClass("fr-dvb")}function R(){t.$el.find("video").filter(function(){return 0===e(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),t.$el.find("embed, iframe").filter(function(){if(t.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),e(this).parents("span.fr-video").length>0)return!1;for(var n=e(this).attr("src"),i=0;i<e.FE.VIDEO_PROVIDERS.length;i++){var o=e.FE.VIDEO_PROVIDERS[i];if(o.test_regex.test(n))return!0}return!1}).map(function(){return 0===e(this).parents("object").length?this:e(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var n=t.$el.find("span.fr-video"),i=0;i<n.length;i++)I(e(n[i]));n.toggleClass("fr-draggable",t.opts.videoMove)}function L(){C(),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","span.fr-video",function(){q=!1}),t.events.$on(t.$el,"touchmove",function(){q=!0})),t.events.on("html.set",R),R(),t.events.$on(t.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),t.events.$on(t.$el,"click touchend","span.fr-video",b),t.events.on("keydown",function(n){var i=n.which;return!U||i!=e.FE.KEYCODE.BACKSPACE&&i!=e.FE.KEYCODE.DELETE?U&&i==e.FE.KEYCODE.ESC?(y(!0),n.preventDefault(),!1):U&&!t.keys.ctrlKey(n)?(n.preventDefault(),!1):void 0:(n.preventDefault(),F(),!1)},!0),t.events.on("keydown",function(){t.$el.find("span.fr-video:empty").remove()}),r(!0),$(!0)}function M(){U?U.trigger("click"):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("video.insert"),t.toolbar.showInline())}function B(e,n){if(U){var i=t.popups.get("video.size"),o=U.find("iframe, embed, video");o.css("width",e||i.find('input[name="width"]').val()),o.css("height",n||i.find('input[name="height"]').val()),o.get(0).style.width&&o.removeAttr("width"),o.get(0).style.height&&o.removeAttr("height"),i.find("input").blur(),setTimeout(function(){U.trigger("click")},t.helpers.isAndroid()?50:0)}}function P(){return U}var j,H,z,U,q;return t.shared.vid_exit_flag=!1,{_init:L,showInsertPopup:i,showLayer:s,refreshByURLButton:a,refreshEmbedButton:l,insertByURL:u,insertEmbed:d,insert:c,align:_,refreshAlign:A,refreshAlignOnShow:N,display:D,refreshDisplayOnShow:O,remove:F,showSizePopup:k,back:M,setSize:B,get:P}},e.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),e.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),e.FE.DefineIcon("videoByURL",{NAME:"link"}),e.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),e.FE.DefineIcon("videoEmbed",{NAME:"code"}),e.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),e.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),e.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),e.FE.DefineIcon("videoDisplay",{NAME:"star"}),e.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("videoAlign",{NAME:"align-center"}),e.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",justify:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list">',n=e.FE.COMMANDS.videoAlign.options;for(var i in n)n.hasOwnProperty(i)&&(t+='<li><a class="fr-command fr-title" data-cmd="videoAlign" data-param1="'+i+'" title="'+this.language.translate(n[i])+'">'+this.icon.create("align-"+i)+"</a></li>");return t+="</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("videoRemove",{NAME:"trash"}),e.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),e.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,title:"Change Size",callback:function(){this.video.showSizePopup()}}),e.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){var t=this.video.get();t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,callback:function(){this.video.setSize()}})}),/*!
 * bootstrap-tokenfield
 * https://github.com/sliptree/bootstrap-tokenfield
 * Copyright 2013-2014 Sliptree and other contributors; Licensed MIT
 */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=global.window&&global.window.$?e(global.window.$):function(t){if(!t.$&&!t.fn)throw new Error("Tokenfield requires a window object with jQuery or a jQuery instance");return e(t.$||t)}:e(jQuery,window)}(function(e,t){"use strict";var n=function(n,i){var o=this;this.$element=e(n),this.textDirection=this.$element.css("direction"),this.options=e.extend(!0,{},e.fn.tokenfield.defaults,{tokens:this.$element.val()},this.$element.data(),i),this._delimiters="string"==typeof this.options.delimiter?[this.options.delimiter]:this.options.delimiter,this._triggerKeys=e.map(this._delimiters,function(e){return e.charCodeAt(0)}),this._firstDelimiter=this._delimiters[0];var r=e.inArray(" ",this._delimiters),s=e.inArray("-",this._delimiters);r>=0&&(this._delimiters[r]="\\s"),s>=0&&(delete this._delimiters[s],this._delimiters.unshift("-"));var a=["\\","$","[","{","^",".","|","?","*","+","(",")"];e.each(this._delimiters,function(t,n){var i=e.inArray(n,a);i>=0&&(o._delimiters[t]="\\"+n)});var l,c=t&&"function"==typeof t.getMatchedCSSRules?t.getMatchedCSSRules(n):null,u=n.style.width,d=this.$element.width();c&&e.each(c,function(e,t){t.style.width&&(l=t.style.width)});var p="rtl"===e("body").css("direction")?"right":"left",f={position:this.$element.css("position")};f[p]=this.$element.css(p),this.$element.data("original-styles",f).data("original-tabindex",this.$element.prop("tabindex")).css("position","absolute").css(p,"-10000px").prop("tabindex",-1),this.$wrapper=e('<div class="tokenfield form-control" />'),this.$element.hasClass("input-lg")&&this.$wrapper.addClass("input-lg"),this.$element.hasClass("input-sm")&&this.$wrapper.addClass("input-sm"),"rtl"===this.textDirection&&this.$wrapper.addClass("rtl");var h=this.$element.prop("id")||(new Date).getTime()+""+Math.floor(100*(1+Math.random()));this.$input=e('<input type="'+this.options.inputType+'" class="token-input" autocomplete="off" />').appendTo(this.$wrapper).prop("placeholder",this.$element.prop("placeholder")).prop("id",h+"-tokenfield").prop("tabindex",this.$element.data("original-tabindex"));var g=e('label[for="'+this.$element.prop("id")+'"]');if(g.length&&g.prop("for",this.$input.prop("id")),this.$copyHelper=e('<input type="text" />').css("position","absolute").css(p,"-10000px").prop("tabindex",-1).prependTo(this.$wrapper),u?this.$wrapper.css("width",u):l?this.$wrapper.css("width",l):this.$element.parents(".form-inline").length&&this.$wrapper.width(d),(this.$element.prop("disabled")||this.$element.parents("fieldset[disabled]").length)&&this.disable(),this.$element.prop("readonly")&&this.readonly(),this.$mirror=e('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),this.$input.css("min-width",this.options.minWidth+"px"),e.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(e,t){o.$mirror[0].style[t]=o.$input.css(t)}),this.$mirror.appendTo("body"),this.$wrapper.insertBefore(this.$element),this.$element.prependTo(this.$wrapper),this.update(),this.setTokens(this.options.tokens,!1,!this.$element.val()&&this.options.tokens),this.listen(),!e.isEmptyObject(this.options.autocomplete)){var m="rtl"===this.textDirection?"right":"left",v=e.extend({minLength:this.options.showAutocompleteOnFocus?0:null,position:{my:m+" top",at:m+" bottom",of:this.$wrapper}},this.options.autocomplete);this.$input.autocomplete(v)}if(!e.isEmptyObject(this.options.typeahead)){var b=this.options.typeahead,y={minLength:this.options.showAutocompleteOnFocus?0:null},w=e.isArray(b)?b:[b,b];w[0]=e.extend({},y,w[0]),this.$input.typeahead.apply(this.$input,w),this.$hint=this.$input.prev(".tt-hint"),this.typeahead=!0}};n.prototype={constructor:n,createToken:function(t,n){var i=this;if(t="string"==typeof t?{value:t,label:t}:e.extend({},t),"undefined"==typeof n&&(n=!0),t.value=e.trim(t.value.toString()),t.label=t.label&&t.label.length?e.trim(t.label):t.value,t.value.length&&t.label.length&&!(t.label.length<=this.options.minLength)&&!(this.options.limit&&this.getTokens().length>=this.options.limit)){var o=e.Event("tokenfield:createtoken",{attrs:t});if(this.$element.trigger(o),o.attrs&&!o.isDefaultPrevented()){var r=e('<div class="token" />').append('<span class="token-label" />').append('<a href="#" class="close" tabindex="-1">&times;</a>').data("attrs",t);this.$input.hasClass("tt-input")?this.$input.parent().before(r):this.$input.before(r),this.$input.css("width",this.options.minWidth+"px");var s=r.find(".token-label"),a=r.find(".close");return this.maxTokenWidth||(this.maxTokenWidth=this.$wrapper.width()-a.outerWidth()-parseInt(a.css("margin-left"),10)-parseInt(a.css("margin-right"),10)-parseInt(r.css("border-left-width"),10)-parseInt(r.css("border-right-width"),10)-parseInt(r.css("padding-left"),10)-parseInt(r.css("padding-right"),10),parseInt(s.css("border-left-width"),10)-parseInt(s.css("border-right-width"),10)-parseInt(s.css("padding-left"),10)-parseInt(s.css("padding-right"),10),parseInt(s.css("margin-left"),10)-parseInt(s.css("margin-right"),10)),s.text(t.label).css("max-width",this.maxTokenWidth),r.on("mousedown",function(){return i._disabled||i._readonly?!1:void(i.preventDeactivation=!0)}).on("click",function(e){return i._disabled||i._readonly?!1:(i.preventDeactivation=!1,e.ctrlKey||e.metaKey?(e.preventDefault(),i.toggle(r)):void i.activate(r,e.shiftKey,e.shiftKey))}).on("dblclick",function(){return i._disabled||i._readonly||!i.options.allowEditing?!1:void i.edit(r)}),a.on("click",e.proxy(this.remove,this)),this.$element.trigger(e.Event("tokenfield:createdtoken",{attrs:t,relatedTarget:r.get(0)})),n&&this.$element.val(this.getTokensList()).trigger(e.Event("change",{initiator:"tokenfield"})),this.update(),this.$element.get(0)}}},setTokens:function(t,n,i){if(t){n||this.$wrapper.find(".token").remove(),"undefined"==typeof i&&(i=!0),"string"==typeof t&&(t=this._delimiters.length?t.split(new RegExp("["+this._delimiters.join("")+"]")):[t]);var o=this;return e.each(t,function(e,t){o.createToken(t,i)}),this.$element.get(0)}},getTokenData:function(t){var n=t.map(function(){var t=e(this);return t.data("attrs")}).get();return 1==n.length&&(n=n[0]),n},getTokens:function(t){var n=this,i=[],o=t?".active":"";return this.$wrapper.find(".token"+o).each(function(){i.push(n.getTokenData(e(this)))}),i},getTokensList:function(t,n,i){t=t||this._firstDelimiter,n="undefined"!=typeof n&&null!==n?n:this.options.beautify;var o=t+(n&&" "!==t?" ":"");return e.map(this.getTokens(i),function(e){return e.value}).join(o)},getInput:function(){return this.$input.val()},listen:function(){var n=this;this.$element.on("change",e.proxy(this.change,this)),this.$wrapper.on("mousedown",e.proxy(this.focusInput,this)),this.$input.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("paste",e.proxy(this.paste,this)).on("keydown",e.proxy(this.keydown,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.$copyHelper.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keydown",e.proxy(this.keydown,this)).on("keyup",e.proxy(this.keyup,this)),this.$input.on("keypress",e.proxy(this.update,this)).on("keyup",e.proxy(this.update,this)),this.$input.on("autocompletecreate",function(){var t=e(this).data("ui-autocomplete").menu.element,i=n.$wrapper.outerWidth()-parseInt(t.css("border-left-width"),10)-parseInt(t.css("border-right-width"),10);t.css("min-width",i+"px")}).on("autocompleteselect",function(e,t){return n.createToken(t.item)&&(n.$input.val(""),n.$input.data("edit")&&n.unedit(!0)),!1}).on("typeahead:selected typeahead:autocompleted",function(e,t){n.createToken(t)&&(n.$input.typeahead("val",""),n.$input.data("edit")&&n.unedit(!0))}),e(t).on("resize",e.proxy(this.update,this))},keydown:function(t){function n(e){if(o.$input.is(document.activeElement)){if(o.$input.val().length>0)return;e+="All";var n=o.$input.hasClass("tt-input")?o.$input.parent()[e](".token:first"):o.$input[e](".token:first");if(!n.length)return;o.preventInputFocus=!0,o.preventDeactivation=!0,o.activate(n),t.preventDefault()}else o[e](t.shiftKey),t.preventDefault()}function i(n){if(t.shiftKey){if(o.$input.is(document.activeElement)){if(o.$input.val().length>0)return;var i=o.$input.hasClass("tt-input")?o.$input.parent()[n+"All"](".token:first"):o.$input[n+"All"](".token:first");if(!i.length)return;o.activate(i)}var r="prev"===n?"next":"prev",s="prev"===n?"first":"last";o.$firstActiveToken[r+"All"](".token").each(function(){o.deactivate(e(this))}),o.activate(o.$wrapper.find(".token:"+s),!0,!0),t.preventDefault()}}if(this.focused){var o=this;switch(t.keyCode){case 8:if(!this.$input.is(document.activeElement))break;this.lastInputValue=this.$input.val();break;case 37:n("rtl"===this.textDirection?"next":"prev");break;case 38:i("prev");break;case 39:n("rtl"===this.textDirection?"prev":"next");break;case 40:i("next");break;case 65:if(this.$input.val().length>0||!t.ctrlKey&&!t.metaKey)break;this.activateAll(),t.preventDefault();break;case 9:case 13:if(this.$input.data("ui-autocomplete")&&this.$input.data("ui-autocomplete").menu.element.find("li:has(a.ui-state-focus), li.ui-state-focus").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-cursor").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-hint").val()&&this.$wrapper.find(".tt-hint").val().length)break;if(this.$input.is(document.activeElement)&&this.$input.val().length||this.$input.data("edit"))return this.createTokensFromInput(t,this.$input.data("edit"));if(13===t.keyCode){if(!this.$copyHelper.is(document.activeElement)||1!==this.$wrapper.find(".token.active").length)break;if(!o.options.allowEditing)break;this.edit(this.$wrapper.find(".token.active"))}}this.lastKeyDown=t.keyCode}},keypress:function(t){return-1!==e.inArray(t.which,this._triggerKeys)&&this.$input.is(document.activeElement)?(this.$input.val()&&this.createTokensFromInput(t),!1):void 0},keyup:function(e){if(this.preventInputFocus=!1,this.focused){switch(e.keyCode){case 8:if(this.$input.is(document.activeElement)){if(this.$input.val().length||this.lastInputValue.length&&8===this.lastKeyDown)break;this.preventDeactivation=!0;var t=this.$input.hasClass("tt-input")?this.$input.parent().prevAll(".token:first"):this.$input.prevAll(".token:first");if(!t.length)break;this.activate(t)}else this.remove(e);break;case 46:this.remove(e,"next")}this.lastKeyUp=e.keyCode}},focus:function(){this.focused=!0,this.$wrapper.addClass("focus"),this.$input.is(document.activeElement)&&(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null,this.options.showAutocompleteOnFocus&&this.search())},blur:function(e){this.focused=!1,this.$wrapper.removeClass("focus"),this.preventDeactivation||this.$element.is(document.activeElement)||(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null),!this.preventCreateTokens&&(this.$input.data("edit")&&!this.$input.is(document.activeElement)||this.options.createTokensOnBlur)&&this.createTokensFromInput(e),this.preventDeactivation=!1,this.preventCreateTokens=!1},paste:function(e){var t=this;t.options.allowPasting&&setTimeout(function(){t.createTokensFromInput(e)},1)},change:function(e){"tokenfield"!==e.initiator&&this.setTokens(this.$element.val())},createTokensFromInput:function(e,t){if(!(this.$input.val().length<this.options.minLength)){var n=this.getTokensList();return this.setTokens(this.$input.val(),!0),n==this.getTokensList()&&this.$input.val().length?!1:(this.$input.hasClass("tt-input")?this.$input.typeahead("val",""):this.$input.val(""),this.$input.data("edit")&&this.unedit(t),!1)}},next:function(e){if(e){var t=this.$wrapper.find(".active:first"),n=t&&this.$firstActiveToken?t.index()<this.$firstActiveToken.index():!1;if(n)return this.deactivate(t)}var i=this.$wrapper.find(".active:last"),o=i.nextAll(".token:first");return o.length?void this.activate(o,e):void this.$input.focus()},prev:function(e){if(e){var t=this.$wrapper.find(".active:last"),n=t&&this.$firstActiveToken?t.index()>this.$firstActiveToken.index():!1;if(n)return this.deactivate(t)}var i=this.$wrapper.find(".active:first"),o=i.prevAll(".token:first");return o.length||(o=this.$wrapper.find(".token:first")),o.length||e?void this.activate(o,e):void this.$input.focus()},activate:function(t,n,i,o){if(t){if("undefined"==typeof o)var o=!0;if(i)var n=!0;if(this.$copyHelper.focus(),n||(this.$wrapper.find(".active").removeClass("active"),o?this.$firstActiveToken=t:delete this.$firstActiveToken),i&&this.$firstActiveToken){var r=this.$firstActiveToken.index()-2,s=t.index()-2,a=this;this.$wrapper.find(".token").slice(Math.min(r,s)+1,Math.max(r,s)).each(function(){a.activate(e(this),!0)})}t.addClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select()}},activateAll:function(){var t=this;this.$wrapper.find(".token").each(function(n){t.activate(e(this),0!==n,!1,!1)})},deactivate:function(e){e&&(e.removeClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},toggle:function(e){e&&(e.toggleClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},edit:function(t){if(t){var n=t.data("attrs"),i={attrs:n,relatedTarget:t.get(0)},o=e.Event("tokenfield:edittoken",i);if(this.$element.trigger(o),!o.isDefaultPrevented()){t.find(".token-label").text(n.value);var r=t.outerWidth(),s=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;t.replaceWith(s),this.preventCreateTokens=!0,this.$input.val(n.value).select().data("edit",!0).width(r),this.update(),this.$element.trigger(e.Event("tokenfield:editedtoken",i))}}},unedit:function(e){var t=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;if(t.appendTo(this.$wrapper),this.$input.data("edit",!1),this.$mirror.text(""),this.update(),e){var n=this;setTimeout(function(){n.$input.focus()},1)}},remove:function(t,n){if(!(this.$input.is(document.activeElement)||this._disabled||this._readonly)){var i="click"===t.type?e(t.target).closest(".token"):this.$wrapper.find(".token.active");if("click"!==t.type){if(!n)var n="prev";if(this[n](),"prev"===n)var o=0===i.first().prevAll(".token:first").length}var r={attrs:this.getTokenData(i),relatedTarget:i.get(0)},s=e.Event("tokenfield:removetoken",r);if(this.$element.trigger(s),!s.isDefaultPrevented()){var a=e.Event("tokenfield:removedtoken",r),l=e.Event("change",{initiator:"tokenfield"});i.remove(),this.$element.val(this.getTokensList()).trigger(a).trigger(l),this.$wrapper.find(".token").length&&"click"!==t.type&&!o||this.$input.focus(),this.$input.css("width",this.options.minWidth+"px"),this.update(),t.preventDefault(),t.stopPropagation()}}},update:function(){var e=this.$input.val(),t=parseInt(this.$input.css("padding-left"),10),n=parseInt(this.$input.css("padding-right"),10),i=t+n;if(this.$input.data("edit")){if(e||(e=this.$input.prop("placeholder")),e===this.$mirror.text())return;this.$mirror.text(e);var o=this.$mirror.width()+10;if(o>this.$wrapper.width())return this.$input.width(this.$wrapper.width());this.$input.width(o),this.$hint&&this.$hint.width(o)}else{var r="rtl"===this.textDirection?this.$input.offset().left+this.$input.outerWidth()-this.$wrapper.offset().left-parseInt(this.$wrapper.css("padding-left"),10)-i-1:this.$wrapper.offset().left+this.$wrapper.width()+parseInt(this.$wrapper.css("padding-left"),10)-this.$input.offset().left-i;isNaN(r)?this.$input.width("100%"):this.$input.width(r),this.$hint&&(isNaN(r)?this.$hint.width("100%"):this.$hint.width(r))}},focusInput:function(t){if(!(e(t.target).closest(".token").length||e(t.target).closest(".token-input").length||e(t.target).closest(".tt-dropdown-menu").length)){var n=this;setTimeout(function(){n.$input.focus()},0)}},search:function(){this.$input.data("ui-autocomplete")&&this.$input.autocomplete("search")},disable:function(){this.setProperty("disabled",!0)},enable:function(){this.setProperty("disabled",!1)},readonly:function(){this.setProperty("readonly",!0)},writeable:function(){this.setProperty("readonly",!1)},setProperty:function(e,t){this["_"+e]=t,this.$input.prop(e,t),this.$element.prop(e,t),this.$wrapper[t?"addClass":"removeClass"](e)},destroy:function(){this.$element.val(this.getTokensList()),this.$element.css(this.$element.data("original-styles")),this.$element.prop("tabindex",this.$element.data("original-tabindex"));var t=e('label[for="'+this.$input.prop("id")+'"]');t.length&&t.prop("for",this.$element.prop("id")),this.$element.insertBefore(this.$wrapper),this.$element.removeData("original-styles").removeData("original-tabindex").removeData("bs.tokenfield"),this.$wrapper.remove(),this.$mirror.remove();var n=this.$element;return n}};var i=e.fn.tokenfield;return e.fn.tokenfield=function(t,i){var o,r=[];Array.prototype.push.apply(r,arguments);var s=this.each(function(){var s=e(this),a=s.data("bs.tokenfield"),l="object"==typeof t&&t;"string"==typeof t&&a&&a[t]?(r.shift(),o=a[t].apply(a,r)):a||"string"==typeof t||i||(s.data("bs.tokenfield",a=new n(this,l)),s.trigger("tokenfield:initialize"))});return"undefined"!=typeof o?o:s},e.fn.tokenfield.defaults={minWidth:60,minLength:0,allowEditing:!0,allowPasting:!0,limit:0,autocomplete:{},typeahead:{},showAutocompleteOnFocus:!1,createTokensOnBlur:!1,delimiter:",",beautify:!0,inputType:"text"},e.fn.tokenfield.Constructor=n,e.fn.tokenfield.noConflict=function(){return e.fn.tokenfield=i,this},n}),/* ========================================================================
 * bootstrap-tour - v0.10.2
 * http://bootstraptour.com
 * ========================================================================
 * Copyright 2012-2013 Ulrich Sossou
 *
 * ========================================================================
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================================
 */
function(e,t){var n,i;return i=t.document,n=function(){function n(n){var i;try{i=t.localStorage}catch(o){i=!1}this._options=e.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:i,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(){},afterGetState:function(){},afterRemoveState:function(){},onStart:function(){},onEnd:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNext:function(){},onPrev:function(){},onPause:function(){},onResume:function(){},onRedirectError:function(){}},n),this._force=!1,this._inited=!1,this._current=null,this.backdrop={overlay:null,$element:null,$background:null,backgroundShown:!1,overlayElementShown:!1}}return n.prototype.addSteps=function(e){var t,n,i;for(n=0,i=e.length;i>n;n++)t=e[n],this.addStep(t);return this},n.prototype.addStep=function(e){return this._options.steps.push(e),this},n.prototype.getStep=function(t){return null!=this._options.steps[t]?e.extend({id:"step-"+t,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:t===this._options.steps.length-1?-1:t+1,prev:t-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[t].element,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError},this._options.steps[t]):void 0},n.prototype.init=function(e){return this._force=e,this.ended()?(this._debug("Tour ended, init prevented."),this):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize(function(e){return function(){return e.showStep(e._current)}}(this)),null!==this._current&&this.showStep(this._current),this._inited=!0,this)},n.prototype.start=function(e){var t;return null==e&&(e=!1),this._inited||this.init(e),null===this._current&&(t=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(t,this.showStep,0)),this},n.prototype.next=function(){var e;return e=this.hideStep(this._current),this._callOnPromiseDone(e,this._showNextStep)},n.prototype.prev=function(){var e;return e=this.hideStep(this._current),this._callOnPromiseDone(e,this._showPrevStep)},n.prototype.goTo=function(e){var t;return t=this.hideStep(this._current),this._callOnPromiseDone(t,this.showStep,e)},n.prototype.end=function(){var n,o;return n=function(n){return function(){return e(i).off("click.tour-"+n._options.name),e(i).off("keyup.tour-"+n._options.name),e(t).off("resize.tour-"+n._options.name),n._setState("end","yes"),n._inited=!1,n._force=!1,n._clearTimer(),null!=n._options.onEnd?n._options.onEnd(n):void 0}}(this),o=this.hideStep(this._current),this._callOnPromiseDone(o,n)},n.prototype.ended=function(){return!this._force&&!!this._getState("end")},n.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},n.prototype.pause=function(){var e;return e=this.getStep(this._current),e&&e.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,t.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=e.onPause?e.onPause(this,this._duration):void 0):this},n.prototype.resume=function(){var e;return e=this.getStep(this._current),e&&e.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||e.duration,this._timer=t.setTimeout(function(e){return function(){return e._isLast()?e.next():e.end()}}(this),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=e.onResume&&this._duration!==e.duration?e.onResume(this,this._duration):void 0):this},n.prototype.hideStep=function(t){var n,i,o;return(o=this.getStep(t))?(this._clearTimer(),i=this._makePromise(null!=o.onHide?o.onHide(this,t):void 0),n=function(n){return function(){var i;return i=e(o.element),i.data("bs.popover")||i.data("popover")||(i=e("body")),i.popover("destroy").removeClass("tour-"+n._options.name+"-element tour-"+n._options.name+"-"+t+"-element"),o.reflex&&e(o.reflexElement).removeClass("tour-step-element-reflex").off(""+n._reflexEvent(o.reflex)+".tour-"+n._options.name),o.backdrop&&n._hideBackdrop(),null!=o.onHidden?o.onHidden(n):void 0}}(this),this._callOnPromiseDone(i,n),i):void 0},n.prototype.showStep=function(e){var n,o,r,s;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(s=this.getStep(e))?(r=e<this._current,n=this._makePromise(null!=s.onShow?s.onShow(this,e):void 0),o=function(t){return function(){var n,o;if(t.setCurrentStep(e),n=function(){switch({}.toString.call(s.path)){case"[object Function]":return s.path();case"[object String]":return this._options.basePath+s.path;default:return s.path}}.call(t),!t._isRedirect(s.host,n,i.location)||(t._redirect(s,e,n),t._isJustPathHashDifferent(s.host,n,i.location))){if(t._isOrphan(s)){if(s.orphan===!1)return t._debug("Skip the orphan step "+(t._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(r?t._showPrevStep():t._showNextStep());t._debug("Show the orphan step "+(t._current+1)+". Orphans option is true.")}return s.backdrop&&t._showBackdrop(s),o=function(){return t.getCurrentStep()===e?(null!=s.element&&s.backdrop&&t._showOverlayElement(s),t._showPopover(s,e),null!=s.onShown&&s.onShown(t),t._debug("Step "+(t._current+1)+" of "+t._options.steps.length)):void 0},s.autoscroll?t._scrollIntoView(s.element,o):o(),s.duration?t.resume():void 0}}}(this),s.delay?(this._debug("Wait "+s.delay+" milliseconds to show the step "+(this._current+1)),t.setTimeout(function(e){return function(){return e._callOnPromiseDone(n,o)}}(this),s.delay)):this._callOnPromiseDone(n,o),n):void 0},n.prototype.getCurrentStep=function(){return this._current},n.prototype.setCurrentStep=function(e){return null!=e?(this._current=e,this._setState("current_step",e)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},n.prototype._setState=function(e,t){var n,i;if(this._options.storage){i=""+this._options.name+"_"+e;try{this._options.storage.setItem(i,t)}catch(o){n=o,n.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(i,t)}return null==this._state&&(this._state={}),this._state[e]=t},n.prototype._removeState=function(e){var t;return this._options.storage?(t=""+this._options.name+"_"+e,this._options.storage.removeItem(t),this._options.afterRemoveState(t)):null!=this._state?delete this._state[e]:void 0},n.prototype._getState=function(e){var t,n;return this._options.storage?(t=""+this._options.name+"_"+e,n=this._options.storage.getItem(t)):null!=this._state&&(n=this._state[e]),void 0!==n&&"null"!==n||(n=null),this._options.afterGetState(e,n),n},n.prototype._showNextStep=function(){var e,t,n;return n=this.getStep(this._current),t=function(e){return function(){return e.showStep(n.next)}}(this),e=this._makePromise(null!=n.onNext?n.onNext(this):void 0),this._callOnPromiseDone(e,t)},n.prototype._showPrevStep=function(){var e,t,n;return n=this.getStep(this._current),t=function(e){return function(){return e.showStep(n.prev)}}(this),e=this._makePromise(null!=n.onPrev?n.onPrev(this):void 0),this._callOnPromiseDone(e,t)},n.prototype._debug=function(e){return this._options.debug?t.console.log("Bootstrap Tour '"+this._options.name+"' | "+e):void 0},n.prototype._isRedirect=function(e,t,n){var i;return""!==e&&this._isHostDifferent(e,n.href)?!0:(i=[n.pathname,n.search,n.hash].join(""),null!=t&&""!==t&&("[object RegExp]"==={}.toString.call(t)&&!t.test(i)||"[object String]"==={}.toString.call(t)&&this._isPathDifferent(t,i)))},n.prototype._isHostDifferent=function(e,t){return this._getProtocol(e)!==this._getProtocol(t)||this._getHost(e)!==this._getHost(t)},n.prototype._isPathDifferent=function(e,t){return this._getPath(e)!==this._getPath(t)||!this._equal(this._getQuery(e),this._getQuery(t))||!this._equal(this._getHash(e),this._getHash(t))},n.prototype._isJustPathHashDifferent=function(e,t,n){var i;return""!==e&&this._isHostDifferent(e,n.href)?!1:(i=[n.pathname,n.search,n.hash].join(""),"[object String]"==={}.toString.call(t)?this._getPath(t)===this._getPath(i)&&this._equal(this._getQuery(t),this._getQuery(i))&&!this._equal(this._getHash(t),this._getHash(i)):!1)},n.prototype._redirect=function(t,n,o){if(e.isFunction(t.redirect))return t.redirect.call(this,o);if(t.redirect===!0){if(this._debug("Redirect to "+t.host+o),this._getState("redirect_to")!==""+n)return this._setState("redirect_to",""+n),i.location.href=""+t.host+o;if(this._debug("Error redirection loop to "+o),this._removeState("redirect_to"),null!=t.onRedirectError)return t.onRedirectError(this)}},n.prototype._isOrphan=function(t){return null==t.element||!e(t.element).length||e(t.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==e(t.element)[0].namespaceURI},n.prototype._isLast=function(){return this._current<this._options.steps.length-1},n.prototype._showPopover=function(t,n){var i,o,r,s;return e(".tour-"+this._options.name).remove(),s=e.extend({},this._options),r=this._isOrphan(t),t.template=this._template(t,n),r&&(t.element="body",t.placement="top"),i=e(t.element),i.addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+n+"-element"),t.options&&e.extend(s,t.options),t.reflex&&!r&&e(t.reflexElement).addClass("tour-step-element-reflex").off(""+this._reflexEvent(t.reflex)+".tour-"+this._options.name).on(""+this._reflexEvent(t.reflex)+".tour-"+this._options.name,function(e){return function(){return e._isLast()?e.next():e.end()}}(this)),i.popover({placement:t.placement,trigger:"manual",title:t.title,content:t.content,html:!0,animation:t.animation,container:t.container,template:t.template,selector:t.element}).popover("show"),o=i.data("bs.popover")?i.data("bs.popover").tip():i.data("popover").tip(),o.attr("id",t.id),this._reposition(o,t),r?this._center(o):void 0},n.prototype._template=function(t,n){var i,o,r,s,a,l;return l=t.template,this._isOrphan(t)&&"[object Boolean]"!=={}.toString.call(t.orphan)&&(l=t.orphan),a=e(e.isFunction(l)?l(n,t):l),i=a.find(".popover-navigation"),r=i.find('[data-role="prev"]'),o=i.find('[data-role="next"]'),s=i.find('[data-role="pause-resume"]'),this._isOrphan(t)&&a.addClass("orphan"),a.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+n),t.reflex&&a.addClass("tour-"+this._options.name+"-reflex"),t.prev<0&&r.addClass("disabled"),t.next<0&&o.addClass("disabled"),t.duration||s.remove(),a.clone().wrap("<div>").parent().html()},n.prototype._reflexEvent=function(e){return"[object Boolean]"==={}.toString.call(e)?"click":e},n.prototype._reposition=function(t,n){var o,r,s,a,l,c,u;if(a=t[0].offsetWidth,r=t[0].offsetHeight,u=t.offset(),l=u.left,c=u.top,o=e(i).outerHeight()-u.top-t.outerHeight(),0>o&&(u.top=u.top+o),s=e("html").outerWidth()-u.left-t.outerWidth(),0>s&&(u.left=u.left+s),u.top<0&&(u.top=0),u.left<0&&(u.left=0),t.offset(u),"bottom"===n.placement||"top"===n.placement){if(l!==u.left)return this._replaceArrow(t,2*(u.left-l),a,"left")}else if(c!==u.top)return this._replaceArrow(t,2*(u.top-c),r,"top")},n.prototype._center=function(n){return n.css("top",e(t).outerHeight()/2-n.outerHeight()/2)},n.prototype._replaceArrow=function(e,t,n,i){return e.find(".arrow").css(i,t?50*(1-t/n)+"%":"")},n.prototype._scrollIntoView=function(n,i){var o,r,s,a,l,c;return o=e(n),o.length?(r=e(t),a=o.offset().top,c=r.height(),l=Math.max(0,a-c/2),this._debug("Scroll into view. ScrollTop: "+l+". Element offset: "+a+". Window height: "+c+"."),s=0,e("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(l)},function(e){return function(){return 2===++s?(i(),e._debug("Scroll into view.\nAnimation end element offset: "+o.offset().top+".\nWindow height: "+r.height()+".")):void 0}}(this))):i()},n.prototype._onResize=function(n,i){return e(t).on("resize.tour-"+this._options.name,function(){return clearTimeout(i),i=setTimeout(n,100)})},n.prototype._initMouseNavigation=function(){var t;return t=this,e(i).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(e){return function(t){return t.preventDefault(),e.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(e){return function(t){return t.preventDefault(),e.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(e){return function(t){return t.preventDefault(),e.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(n){var i;return n.preventDefault(),i=e(this),i.text(t._paused?i.data("pause-text"):i.data("resume-text")),t._paused?t.resume():t.pause()})},n.prototype._initKeyboardNavigation=function(){return this._options.keyboard?e(i).on("keyup.tour-"+this._options.name,function(e){return function(t){if(t.which)switch(t.which){case 39:return t.preventDefault(),e._isLast()?e.next():e.end();case 37:if(t.preventDefault(),e._current>0)return e.prev();break;case 27:return t.preventDefault(),e.end()}}}(this)):void 0},n.prototype._makePromise=function(t){return t&&e.isFunction(t.then)?t:null},n.prototype._callOnPromiseDone=function(e,t,n){return e?e.then(function(e){return function(){return t.call(e,n)}}(this)):t.call(this,n)},n.prototype._showBackdrop=function(t){return this.backdrop.backgroundShown?void 0:(this.backdrop=e("<div>",{"class":"tour-backdrop"}),this.backdrop.backgroundShown=!0,e(t.backdropContainer).append(this.backdrop))},n.prototype._hideBackdrop=function(){return this._hideOverlayElement(),this._hideBackground()},n.prototype._hideBackground=function(){return this.backdrop?(this.backdrop.remove(),this.backdrop.overlay=null,this.backdrop.backgroundShown=!1):void 0},n.prototype._showOverlayElement=function(t){var n,i;return n=e(t.element),n&&0!==n.length?(this.backdrop.overlayElementShown||(this.backdrop.$element=n.addClass("tour-step-backdrop"),this.backdrop.$background=e("<div>",{"class":"tour-step-background"}),this.backdrop.$background.appendTo(t.backdropContainer),this.backdrop.overlayElementShown=!0),i={width:n.innerWidth(),height:n.innerHeight(),offset:n.offset()},t.backdropPadding&&(i=this._applyBackdropPadding(t.backdropPadding,i)),this.backdrop.$background.width(i.width).height(i.height).offset(i.offset)):void 0},n.prototype._hideOverlayElement=function(){return this.backdrop.overlayElementShown?(this.backdrop.$element.removeClass("tour-step-backdrop"),this.backdrop.$background.remove(),this.backdrop.$element=null,this.backdrop.$background=null,this.backdrop.overlayElementShown=!1):void 0},n.prototype._applyBackdropPadding=function(e,t){return"object"==typeof e?(null==e.top&&(e.top=0),null==e.right&&(e.right=0),null==e.bottom&&(e.bottom=0),null==e.left&&(e.left=0),t.offset.top=t.offset.top-e.top,t.offset.left=t.offset.left-e.left,t.width=t.width+e.left+e.right,t.height=t.height+e.top+e.bottom):(t.offset.top=t.offset.top-e,t.offset.left=t.offset.left-e,t.width=t.width+2*e,t.height=t.height+2*e),t},n.prototype._clearTimer=function(){return t.clearTimeout(this._timer),this._timer=null,this._duration=null},n.prototype._getProtocol=function(e){return e=e.split("://"),e.length>1?e[0]:"http"},n.prototype._getHost=function(e){return e=e.split("//"),e=e.length>1?e[1]:e[0],e.split("/")[0]},n.prototype._getPath=function(e){return e.replace(/\/?$/,"").split("?")[0].split("#")[0]},n.prototype._getQuery=function(e){return this._getParams(e,"?")},n.prototype._getHash=function(e){return this._getParams(e,"#")},n.prototype._getParams=function(e,t){var n,i,o,r,s;if(i=e.split(t),1===i.length)return{};for(i=i[1].split("&"),o={},r=0,s=i.length;s>r;r++)n=i[r],n=n.split("="),o[n[0]]=n[1]||"";return o},n.prototype._equal=function(e,t){var n,i;if("[object Object]"==={}.toString.call(e)&&"[object Object]"==={}.toString.call(t)){for(n in e)if(i=e[n],t[n]!==i)return!1;for(n in t)if(i=t[n],e[n]!==i)return!1;return!0}return e===t},n}(),t.Tour=n}(jQuery,window),/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
function(e,t){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return e.Bloodhound=t(n)}):"object"==typeof exports?module.exports=t(require("jquery")):e.Bloodhound=t(jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?void 0:!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?!1:void 0}),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var r,s,a=this,l=arguments;return r=function(){i=null,n||(o=e.apply(a,l))},s=n&&!i,clearTimeout(i),i=setTimeout(r,t),s&&(o=e.apply(a,l)),o}},throttle:function(e,t){var n,i,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=e.apply(n,i)},function(){var l=new Date,c=t-(l-s);return n=this,i=arguments,0>=c?(clearTimeout(o),o=null,s=l,r=e.apply(n,i)):o||(o=setTimeout(a,c)),r}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n="0.11.1",i=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function(n){return n=t.isArray(n)?n:[].slice.call(arguments,0),function(i){var o=[];return t.each(n,function(n){o=o.concat(e(t.toStr(i[n])))}),o}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),o=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function o(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new o(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];return t?(this.list.moveToFront(t),t.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),r=function(){"use strict";function n(e,n){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix)),this.ls=n||a,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function o(e){return JSON.stringify(t.isUndefined(e)?null:e)}function r(t){return e.parseJSON(t)}function s(e){var t,n,i=[],o=a.length;for(t=0;o>t;t++)(n=a.key(t)).match(e)&&i.push(n.replace(e,""));return i}var a;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(l){a=null}return t.mixin(n.prototype,{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=t.noop},_safeSet:function(e,t){try{this.ls.setItem(e,t)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(e){return this.isExpired(e)&&this.remove(e),r(this.ls.getItem(this._prefix(e)))},set:function(e,n,r){return t.isNumber(r)?this._safeSet(this._ttlKey(e),o(i()+r)):this.ls.removeItem(this._ttlKey(e)),this._safeSet(this._prefix(e),o(n))},remove:function(e){return this.ls.removeItem(this._ttlKey(e)),this.ls.removeItem(this._prefix(e)),this},clear:function(){var e,t=s(this.keyMatcher);for(e=t.length;e--;)this.remove(t[e]);return this},isExpired:function(e){var n=r(this.ls.getItem(this._ttlKey(e)));return!!(t.isNumber(n)&&i()>n)}}),n}(),s=function(){"use strict";function n(e){e=e||{},this.cancelled=!1,this.lastReq=null,this._send=e.transport,this._get=e.limiter?e.limiter(this._get):this._get,this._cache=e.cache===!1?new o(0):a}var i=0,r={},s=6,a=new o(10);return n.setMaxPendingRequests=function(e){s=e},n.resetCache=function(){a.reset()},t.mixin(n.prototype,{_fingerprint:function(t){return t=t||{},t.url+t.type+e.param(t.data||{})},_get:function(e,t){function n(e){t(null,e),u._cache.set(l,e)}function o(){t(!0)}function a(){i--,delete r[l],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)}var l,c,u=this;l=this._fingerprint(e),this.cancelled||l!==this.lastReq||((c=r[l])?c.done(n).fail(o):s>i?(i++,r[l]=this._send(e).done(n).fail(o).always(a)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var o,r;i=i||e.noop,n=t.isString(n)?{url:n}:n||{},r=this._fingerprint(n),this.cancelled=!1,this.lastReq=r,(o=this._cache.get(r))?i(null,o):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),a=window.SearchIndex=function(){"use strict";function n(n){n=n||{},n.datumTokenizer&&n.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||t.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function o(){var e={};return e[l]=[],e[a]={},e}function r(e){for(var t={},n=[],i=0,o=e.length;o>i;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function s(e,t){var n=0,i=0,o=[];e=e.sort(),t=t.sort();for(var r=e.length,s=t.length;r>n&&s>i;)e[n]<t[i]?n++:e[n]>t[i]?i++:(o.push(e[n]),n++,i++);return o}var a="c",l="i";return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var r,s;n.datums[r=n.identify(e)]=e,s=i(n.datumTokenizer(e)),t.each(s,function(e){var t,i,s;for(t=n.trie,i=e.split("");s=i.shift();)t=t[a][s]||(t[a][s]=o()),t[l].push(r)})})},get:function(e){var n=this;return t.map(e,function(e){return n.datums[e]})},search:function(e){var n,o,c=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,r;if(o&&0===o.length)return!1;for(t=c.trie,n=e.split("");t&&(i=n.shift());)t=t[a][i];return t&&0===n.length?(r=t[l].slice(0),void(o=o?s(o,r):r)):(o=[],!1)}),o?t.map(r(o),function(e){return c.datums[e]}):[]},all:function(){var e=[];for(var t in this.datums)e.push(this.datums[t]);return e},reset:function(){this.datums={},this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function e(e){this.url=e.url,this.ttl=e.ttl,this.cache=e.cache,this.prepare=e.prepare,this.transform=e.transform,this.transport=e.transport,this.thumbprint=e.thumbprint,this.storage=new r(e.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},t.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(e){this.cache&&(this.storage.set(n.data,e,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var e,t={};return this.cache?(t.data=this.storage.get(n.data),t.protocol=this.storage.get(n.protocol),t.thumbprint=this.storage.get(n.thumbprint),e=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol,t.data&&!e?t.data:null):null},fromNetwork:function(e){function t(){e(!0)}function n(t){e(null,o.transform(t))}var i,o=this;e&&(i=this.prepare(this._settings()),this.transport(i).fail(t).done(n))},clear:function(){return this.storage.clear(),this}}),e}(),c=function(){"use strict";function e(e){this.url=e.url,this.prepare=e.prepare,this.transform=e.transform,this.transport=new s({cache:e.cache,limiter:e.limiter,transport:e.transport})}return t.mixin(e.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(e,t){function n(e,n){t(e?[]:o.transform(n))}var i,o=this;if(t)return e=e||"",i=this.prepare(e,this._settings()),this.transport.get(i,n)},cancelLastRequest:function(){this.transport.cancel()}}),e}(),u=function(){"use strict";function i(i){var o;return i?(o={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:t.identity,transform:t.identity,transport:null},i=t.isString(i)?{url:i}:i,i=t.mixin(o,i),!i.url&&e.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?a(i.transport):e.ajax,i):null}function o(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:t.identity,transport:null},n=t.isString(n)?{url:n}:n,n=t.mixin(i,n),!n.url&&e.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=r(n),n.limiter=s(n),n.transport=n.transport?a(n.transport):e.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function r(e){function t(e,t){return t.url=r(t.url,e),t}function n(e,t){return t.url=t.url.replace(s,encodeURIComponent(e)),t}function i(e,t){return t}var o,r,s;return o=e.prepare,r=e.replace,s=e.wildcard,o?o:o=r?t:e.wildcard?n:i}function s(e){function n(e){return function(n){return t.debounce(n,e)}}function i(e){return function(n){return t.throttle(n,e)}}var o,r,s;return o=e.limiter,r=e.rateLimitBy,s=e.rateLimitWait,o||(o=/^throttle$/i.test(r)?i(s):n(s)),o}function a(n){return function(i){function o(e){t.defer(function(){s.resolve(e)})}function r(e){t.defer(function(){s.reject(e)})}var s=e.Deferred();return n(i,o,r),s}}return function(n){var r,s;return r={initialize:!0,identify:t.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},n=t.mixin(r,n||{}),!n.datumTokenizer&&e.error("datumTokenizer is required"),!n.queryTokenizer&&e.error("queryTokenizer is required"),s=n.sorter,n.sorter=s?function(e){return e.sort(s)}:t.identity,n.local=t.isFunction(n.local)?n.local():n.local,n.prefetch=i(n.prefetch),n.remote=o(n.remote),n}}(),d=function(){"use strict";function n(e){e=u(e),this.sorter=e.sorter,this.identify=e.identify,this.sufficient=e.sufficient,this.local=e.local,this.remote=e.remote?new c(e.remote):null,this.prefetch=e.prefetch?new l(e.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),e.initialize!==!1&&this.initialize()}var o;return o=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=o),n},n.tokenizers=i,t.mixin(n.prototype,{__ttAdapter:function(){function e(e,t,i){return n.search(e,t,i)}function t(e,t){return n.search(e,t)}var n=this;return this.remote?e:t},_loadPrefetch:function(){function t(e,t){return e?n.reject():(o.add(t),o.prefetch.store(o.index.serialize()),void n.resolve())}var n,i,o=this;return n=e.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(t):n.resolve(),n.promise()},_initialize:function(){function e(){t.add(t.local)}var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(e),this.initPromise},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){return this.index.add(e),this},get:function(e){return e=t.isArray(e)?e:[].slice.call(arguments),this.index.get(e)},search:function(e,n,i){function o(e){var n=[];t.each(e,function(e){!t.some(r,function(t){return s.identify(e)===s.identify(t)})&&n.push(e)}),i&&i(n)}var r,s=this;return r=this.sorter(this.index.search(e)),n(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(e,o):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return s.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}();return d}),function(e,t){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},isElement:function(e){return!(!e||1!==e.nodeType)},isJQuery:function(t){return t instanceof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?void 0:!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?!1:void 0}),!!i):i},mixin:e.extend,identity:function(e){return e},clone:function(t){return e.extend(!0,{},t)},getIdGenerator:function(){var e=0;return function(){return e++}},templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var r,s,a=this,l=arguments;return r=function(){i=null,n||(o=e.apply(a,l))},s=n&&!i,clearTimeout(i),i=setTimeout(r,t),s&&(o=e.apply(a,l)),o}},throttle:function(e,t){var n,i,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=e.apply(n,i)},function(){var l=new Date,c=t-(l-s);return n=this,i=arguments,0>=c?(clearTimeout(o),o=null,s=l,r=e.apply(n,i)):o||(o=setTimeout(a,c)),r}},stringify:function(e){return t.isString(e)?e:JSON.stringify(e)},noop:function(){}}}(),n=function(){"use strict";function e(e){var s,a;return a=t.mixin({},r,e),s={css:o(),classes:a,html:n(a),selectors:i(a)},{css:s.css,html:s.html,classes:s.classes,selectors:s.selectors,mixin:function(e){t.mixin(e,s)}}}function n(e){return{wrapper:'<span class="'+e.wrapper+'"></span>',menu:'<div class="'+e.menu+'"></div>'}}function i(e){var n={};return t.each(e,function(e,t){n[t]="."+e}),n}function o(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e}var r={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return e}(),i=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i,o;return i="typeahead:",o={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},t.mixin(n.prototype,{_trigger:function(t,n){var o;return o=e.Event(i+t),(n=n||[]).unshift(o),this.$el.trigger.apply(this.$el,n),o},before:function(e){var t,n;return t=[].slice.call(arguments,1),n=this._trigger("before"+e,t),n.isDefaultPrevented()},trigger:function(e){var t;this._trigger(e,[].slice.call(arguments,1)),(t=o[e])&&this._trigger(t,[].slice.call(arguments,1))}}),n}(),o=function(){"use strict";function e(e,t,n,i){var o;if(!n)return this;for(t=t.split(l),n=i?a(n,i):n,this._callbacks=this._callbacks||{};o=t.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function o(e){var t,n,i,o,s;if(!this._callbacks)return this;for(e=e.split(l),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)o=r(n.sync,this,[t].concat(i)),s=r(n.async,this,[t].concat(i)),o()&&c(s);return this}function r(e,t,n){function i(){for(var i,o=0,r=e.length;!i&&r>o;o+=1)i=e[o].apply(t,n)===!1;return!i}return i}function s(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function a(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,c=s();return{onSync:n,onAsync:t,off:i,trigger:o}}(),r=function(e){"use strict";function n(e,n,i){for(var o,r=[],s=0,a=e.length;a>s;s++)r.push(t.escapeRegExChars(e[s]));return o=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(o):new RegExp(o,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function r(t){var n,i,r;return(n=a.exec(t.data))&&(r=e.createElement(o.tagName),o.className&&(r.className=o.className),i=t.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(r,i)),!!n}function s(e,t){for(var n,i=3,o=0;o<e.childNodes.length;o++)n=e.childNodes[o],n.nodeType===i?o+=t(n)?1:0:s(n,t)}var a;o=t.mixin({},i,o),o.node&&o.pattern&&(o.pattern=t.isArray(o.pattern)?o.pattern:[o.pattern],a=n(o.pattern,o.caseSensitive,o.wordsOnly),s(o.node,r))}}(window.document),s=function(){"use strict";function n(n,o){n=n||{},n.input||e.error("input is missing"),o.mixin(this),this.$hint=e(n.hint),this.$input=e(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=i(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function r(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function s(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return t.toStr(e).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,o,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(e){var t=a[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(e,t){var n;switch(e){case"up":case"down":n=!s(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!s(t);break;default:n=!0}return n},_checkLanguageDirection:function(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function(e,t){var n,i;n=r(e,this.query),i=n?this.query.length!==e.length:!1,this.query=e,t||n?!t&&i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var e,n,i,o,r=this;return e=t.bind(this._onBlur,this),n=t.bind(this._onFocus,this),i=t.bind(this._onKeydown,this),o=t.bind(this._onInput,this),this.$input.on("blur.tt",e).on("focus.tt",n).on("keydown.tt",i),!t.isMsie()||t.isMsie()>9?this.$input.on("input.tt",o):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){a[e.which||e.keyCode]||t.defer(t.bind(r._onInput,r,e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(e,t){this.setInputValue(e),this._setQuery(e,t)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),i=""!==e&&n&&!this.hasOverflow(),!i&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=e("<div>")}}),n}(),a=function(){"use strict";function n(n,o){n=n||{},n.templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||e.error("missing source"),n.node||e.error("missing node"),n.name&&!a(n.name)&&e.error("invalid dataset name: "+n.name),o.mixin(this),this.highlight=!!n.highlight,this.name=n.name||c(),this.limit=n.limit||5,this.displayFn=i(n.display||n.displayKey),this.templates=s(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=t.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=e(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function i(e){function n(t){return t[e]}return e=e||t.stringify,t.isFunction(e)?e:n}function s(n,i){function o(t){return e("<div>").text(i(t))}return{notFound:n.notFound&&t.templatify(n.notFound),pending:n.pending&&t.templatify(n.pending),header:n.header&&t.templatify(n.header),footer:n.footer&&t.templatify(n.footer),suggestion:n.suggestion||o}}function a(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var l,c;return l={val:"tt-selectable-display",obj:"tt-selectable-object"},c=t.getIdGenerator(),n.extractData=function(t){var n=e(t);return n.data(l.obj)?{val:n.data(l.val)||"",obj:n.data(l.obj)||null}:null},t.mixin(n.prototype,o,{_overwrite:function(e,t){t=t||[],t.length?this._renderSuggestions(e,t):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,t,!1)},_append:function(e,t){t=t||[],t.length&&this.$lastSuggestion.length?this._appendSuggestions(e,t):t.length?this._renderSuggestions(e,t):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,t,!0)},_renderSuggestions:function(e,t){var n;n=this._getSuggestionsFragment(e,t),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(e,t)).append(this._getFooter(e,t))},_appendSuggestions:function(e,t){var n,i;n=this._getSuggestionsFragment(e,t),i=n.children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(e){var t=this.templates.pending;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_renderNotFound:function(e){var t=this.templates.notFound;this._resetLastSuggestion(),t&&this.$el.html(t({query:e,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,i){var o,s=this;return o=document.createDocumentFragment(),t.each(i,function(t){var i,r;r=s._injectQuery(n,t),i=e(s.templates.suggestion(r)).data(l.obj,t).data(l.val,s.displayFn(t)).addClass(s.classes.suggestion+" "+s.classes.selectable),o.appendChild(i[0])}),this.highlight&&r({className:this.classes.highlight,node:o,pattern:n}),e(o)},_getFooter:function(e,t){return this.templates.footer?this.templates.footer({query:e,suggestions:t,dataset:this.name}):null},_getHeader:function(e,t){return this.templates.header?this.templates.header({query:e,suggestions:t,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=e()},_injectQuery:function(e,n){return t.isObject(n)?t.mixin({_query:e},n):n},update:function(t){function n(e){s||(s=!0,e=(e||[]).slice(0,o.limit),a=e.length,o._overwrite(t,e),a<o.limit&&o.async&&o.trigger("asyncRequested",t))}function i(n){n=n||[],!r&&a<o.limit&&(o.cancel=e.noop,a+=n.length,o._append(t,n.slice(0,o.limit-a)),o.async&&o.trigger("asyncReceived",t))}var o=this,r=!1,s=!1,a=0;this.cancel(),this.cancel=function(){r=!0,o.cancel=e.noop,o.async&&o.trigger("asyncCanceled",t)},this.source(t,n,i),!s&&n([])},cancel:e.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=e("<div>")}}),n}(),l=function(){"use strict";function n(n,i){function o(t){var n=r.$node.find(t.node).first();return t.node=n.length?n:e("<div>").appendTo(r.$node),new a(t,i)}var r=this;n=n||{},n.node||e.error("node is required"),i.mixin(this),this.$node=e(n.node),this.query=null,this.datasets=t.map(n.datasets,o)}return t.mixin(n.prototype,o,{_onSelectableClick:function(t){this.trigger("selectableClicked",e(t.currentTarget))},_onRendered:function(e,t,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",t,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function e(e){return e.isEmpty()}return t.every(this.datasets,e)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function(e){var t,n,i,o;t=e.position().top,n=t+e.outerHeight(!0),i=this.$node.scrollTop(),o=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>t?this.$node.scrollTop(i+t):n>o&&this.$node.scrollTop(i+(n-o))},bind:function(){var e,n=this;return e=t.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,e),t.each(this.datasets,function(e){e.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function(e){var t,n,i,o;return n=this.getActiveSelectable(),t=this._getSelectables(),i=n?t.index(n):-1,o=i+e,o=(o+1)%(t.length+1)-1,o=-1>o?t.length-1:o,-1===o?null:t.eq(o)},setCursor:function(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function(e){return e&&e.length?a.extractData(e):null},getActiveSelectable:function(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function(){var e=this._getSelectables().first();return e.length?e:null},update:function(e){function n(t){t.update(e)}var i=e!==this.query;return i&&(this.query=e,t.each(this.datasets,n)),i},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function n(e){e.destroy()}this.$node.off(".tt"),this.$node=e("<div>"),t.each(this.datasets,n)}}),n}(),c=function(){"use strict";function e(){l.apply(this,[].slice.call(arguments,0))}var n=l.prototype;return t.mixin(e.prototype,l.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(e){return this.$node.css("ltr"===e?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),e}(),u=function(){"use strict";function n(n,o){var r,s,a,l,c,u,d,p,f,h,g;n=n||{},n.input||e.error("missing input"),n.menu||e.error("missing menu"),n.eventBus||e.error("missing event bus"),o.mixin(this),this.eventBus=n.eventBus,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=i(this,"activate","open","_onFocused"),s=i(this,"deactivate","_onBlurred"),a=i(this,"isActive","isOpen","_onEnterKeyed"),l=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),u=i(this,"isActive","open","_onUpKeyed"),d=i(this,"isActive","open","_onDownKeyed"),p=i(this,"isActive","isOpen","_onLeftKeyed"),f=i(this,"isActive","isOpen","_onRightKeyed"),h=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",s,this).onSync("enterKeyed",a,this).onSync("tabKeyed",l,this).onSync("escKeyed",c,this).onSync("upKeyed",u,this).onSync("downKeyed",d,this).onSync("leftKeyed",p,this).onSync("rightKeyed",f,this).onSync("queryChanged",h,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(e){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);t.each(n,function(t){return e[t].apply(e,i)})}}return t.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||e("<div>"),i=this.menu.$node||e("<div>"),n.on("blur.tt",function(e){var o,r,s;o=document.activeElement,r=i.is(o),s=i.has(o).length>0,t.isMsie()&&(r||s)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(e){e.preventDefault()})},_onSelectableClicked:function(e,t){this.select(t)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(e,t,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,t)},_onAsyncRequested:function(e,t,n){this.eventBus.trigger("asyncrequest",n,t)},_onAsyncCanceled:function(e,t,n){this.eventBus.trigger("asynccancel",n,t)},_onAsyncReceived:function(e,t,n){this.eventBus.trigger("asyncreceive",n,t)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery());
},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&t.preventDefault()},_onTabKeyed:function(e,t){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&t.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&t.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,t){this._minLengthMet(t)?this.menu.update(t):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,t){this.dir!==t&&(this.dir=t,this.menu.setLanguageDirection(t))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(e){return e=t.isString(e)?e:this.input.getQuery()||"",e.length>=this.minLength},_updateHint:function(){var e,n,i,o,r,a,l;e=this.menu.getTopSelectable(),n=this.menu.getSelectableData(e),i=this.input.getInputValue(),!n||t.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(o=s.normalizeQuery(i),r=t.escapeRegExChars(o),a=new RegExp("^(?:"+r+")(.+$)","i"),l=a.exec(n.val),l&&this.input.setHint(i+l[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(e){this.input.setQuery(t.toStr(e))},getVal:function(){return this.input.getQuery()},select:function(e){var t=this.menu.getSelectableData(e);return t&&!this.eventBus.before("select",t.obj)?(this.input.setQuery(t.val,!0),this.eventBus.trigger("select",t.obj),this.close(),!0):!1},autocomplete:function(e){var t,n,i;return t=this.input.getQuery(),n=this.menu.getSelectableData(e),i=n&&t!==n.val,i&&!this.eventBus.before("autocomplete",n.obj)?(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0):!1},moveCursor:function(e){var t,n,i,o,r;return t=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(e),i=this.menu.getSelectableData(n),o=i?i.obj:null,r=this._minLengthMet()&&this.menu.update(t),r||this.eventBus.before("cursorchange",o)?!1:(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",o),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function o(t,n){t.each(function(){var t,i=e(this);(t=i.data(g.typeahead))&&n(t,i)})}function r(e,t){return e.clone().addClass(t.classes.hint).removeData().css(t.css.hint).css(d(e)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function a(e,t){e.data(g.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(t.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!e.attr("dir")&&e.attr("dir","auto")}catch(n){}return e}function d(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function p(e){var n,i;n=e.data(g.www),i=e.parent().filter(n.selectors.wrapper),t.each(e.data(g.attrs),function(n,i){t.isUndefined(n)?e.removeAttr(i):e.attr(i,n)}),e.removeData(g.typeahead).removeData(g.www).removeData(g.attr).removeClass(n.classes.input),i.length&&(e.detach().insertAfter(i),i.remove())}function f(n){var i,o;return i=t.isJQuery(n)||t.isElement(n),o=i?e(n).first():[],o.length?o:null}var h,g,m;h=e.fn.typeahead,g={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},m={initialize:function(o,d){function p(){var n,p,m,v,b,y,w,E,x,C,S;t.each(d,function(e){e.highlight=!!o.highlight}),n=e(this),p=e(h.html.wrapper),m=f(o.hint),v=f(o.menu),b=o.hint!==!1&&!m,y=o.menu!==!1&&!v,b&&(m=r(n,h)),y&&(v=e(h.html.menu).css(h.css.menu)),m&&m.val(""),n=a(n,h),(b||y)&&(p.css(h.css.wrapper),n.css(b?h.css.input:h.css.inputWithNoHint),n.wrap(p).parent().prepend(b?m:null).append(y?v:null)),S=y?c:l,w=new i({el:n}),E=new s({hint:m,input:n},h),x=new S({node:v,datasets:d},h),C=new u({input:E,menu:x,eventBus:w,minLength:o.minLength},h),n.data(g.www,h),n.data(g.typeahead,C)}var h;return d=t.isArray(d)?d:[].slice.call(arguments,1),o=o||{},h=n(o.classNames),this.each(p)},isEnabled:function(){var e;return o(this.first(),function(t){e=t.isEnabled()}),e},enable:function(){return o(this,function(e){e.enable()}),this},disable:function(){return o(this,function(e){e.disable()}),this},isActive:function(){var e;return o(this.first(),function(t){e=t.isActive()}),e},activate:function(){return o(this,function(e){e.activate()}),this},deactivate:function(){return o(this,function(e){e.deactivate()}),this},isOpen:function(){var e;return o(this.first(),function(t){e=t.isOpen()}),e},open:function(){return o(this,function(e){e.open()}),this},close:function(){return o(this,function(e){e.close()}),this},select:function(t){var n=!1,i=e(t);return o(this.first(),function(e){n=e.select(i)}),n},autocomplete:function(t){var n=!1,i=e(t);return o(this.first(),function(e){n=e.autocomplete(i)}),n},moveCursor:function(e){var t=!1;return o(this.first(),function(n){t=n.moveCursor(e)}),t},val:function(e){var t;return arguments.length?(o(this,function(t){t.setVal(e)}),this):(o(this.first(),function(e){t=e.getVal()}),t)},destroy:function(){return o(this,function(e,t){p(t),e.destroy()}),this}},e.fn.typeahead=function(e){return m[e]?m[e].apply(this,[].slice.call(arguments,1)):m.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=h,this}}()}),/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
function(e){var t=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?void 0:!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,o){return(i=n.call(null,o,e,t))?!1:void 0}),!!i):i},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var r,s,a=this,l=arguments;return r=function(){i=null,n||(o=e.apply(a,l))},s=n&&!i,clearTimeout(i),i=setTimeout(r,t),s&&(o=e.apply(a,l)),o}},throttle:function(e,t){var n,i,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=e.apply(n,i)},function(){var l=new Date,c=t-(l-s);return n=this,i=arguments,0>=c?(clearTimeout(o),o=null,s=l,r=e.apply(n,i)):o||(o=setTimeout(a,c)),r}},noop:function(){}}}(),n="0.10.5",i=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function(){var n=[].slice.call(arguments,0);return function(i){var o=[];return t.each(n,function(n){o=o.concat(e(t.toStr(i[n])))}),o}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),o=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function o(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new o(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];return t?(this.list.moveToFront(t),t.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),r=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function o(e){return JSON.parse(e)}var r,s;try{r=window.localStorage,r.setItem("~~~","!"),r.removeItem("~~~")}catch(a){r=null}return s=r&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),o(r.getItem(this._prefix(e)))},set:function(e,o,s){return t.isNumber(s)?r.setItem(this._ttlKey(e),i(n()+s)):r.removeItem(this._ttlKey(e)),r.setItem(this._prefix(e),i(o))},remove:function(e){return r.removeItem(this._ttlKey(e)),r.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],i=r.length;for(e=0;i>e;e++)(t=r.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var i=o(r.getItem(this._ttlKey(e)));return!!(t.isNumber(i)&&n()>i)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,s),e}(),s=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?i(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=t.cache===!1?new o(0):l}function i(n){return function(i,o){function r(e){t.defer(function(){a.resolve(e)})}function s(e){t.defer(function(){a.reject(e)})}var a=e.Deferred();return n(i,o,r,s),a}}var r=0,s={},a=6,l=new o(10);return n.setMaxPendingRequests=function(e){a=e},n.resetCache=function(){l.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),u._cache.set(e,t)}function o(){n&&n(!0)}function l(){r--,delete s[e],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)}var c,u=this;this.cancelled||e!==this.lastUrl||((c=s[e])?c.done(i).fail(o):a>r?(r++,s[e]=this._send(e,t).done(i).fail(o).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,i){var o;return t.isFunction(n)&&(i=n,n={}),this.cancelled=!1,this.lastUrl=e,(o=this._cache.get(e))?t.defer(function(){i&&i(null,o)}):this._get(e,n,i),!!o},cancel:function(){this.cancelled=!0}}),n}(),a=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function o(){return{ids:[],children:{}}}function r(e){for(var t={},n=[],i=0,o=e.length;o>i;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function s(e,t){function n(e,t){return e-t}var i=0,o=0,r=[];e=e.sort(n),t=t.sort(n);for(var s=e.length,a=t.length;s>i&&a>o;)e[i]<t[o]?i++:e[i]>t[o]?o++:(r.push(e[i]),i++,o++);return r}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var r,s;r=n.datums.push(e)-1,s=i(n.datumTokenizer(e)),t.each(s,function(e){var t,i,s;for(t=n.trie,i=e.split("");s=i.shift();)t=t.children[s]||(t.children[s]=o()),t.ids.push(r)})})},get:function(e){var n,o,a=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,r;if(o&&0===o.length)return!1;for(t=a.trie,n=e.split("");t&&(i=n.shift());)t=t.children[i];return t&&0===n.length?(r=t.ids.slice(0),void(o=o?s(o,r):r)):(o=[],!1)}),o?t.map(r(o),function(e){return a.datums[e]}):[]},reset:function(){this.datums=[],this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function i(e){return e.local||null}function o(i){var o,r;return r={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(o=i.prefetch||null)&&(o=t.isString(o)?{url:o}:o,o=t.mixin(r,o),o.thumbprint=n+o.thumbprint,o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",!o.url&&e.error("prefetch requires url to be set")),o}function r(n){function i(e){return function(n){return t.debounce(n,e)}}function o(e){return function(n){return t.throttle(n,e)}}var r,s;return s={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(r=n.remote||null)&&(r=t.isString(r)?{url:r}:r,r=t.mixin(s,r),r.rateLimiter=/^throttle$/i.test(r.rateLimitBy)?o(r.rateLimitWait):i(r.rateLimitWait),r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",delete r.rateLimitBy,delete r.rateLimitWait,!r.url&&e.error("remote requires url to be set")),r}return{local:i,prefetch:o,remote:r}}();!function(n){"use strict";function o(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=c(t.sorter),this.dupDetector=t.dupDetector||u,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new a({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new r(this.cacheKey):null}function c(e){function n(t){return t.sort(e)}function i(e){return e}return t.isFunction(e)?n:i}function u(){return!1}var d,p;return d=n.Bloodhound,p={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=o,o.noConflict=function(){return n.Bloodhound=d,o},o.tokenizers=i,t.mixin(o.prototype,{_loadPrefetch:function(t){function n(e){r.clear(),r.add(t.filter?t.filter(e):e),r._saveToStorage(r.index.serialize(),t.thumbprint,t.ttl)}var i,o,r=this;return(i=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(i),o=e.Deferred().resolve()):o=e.ajax(t.url,t.ajax).done(n),o},_getFromRemote:function(e,t){function n(e,n){t(e?[]:r.remote.filter?r.remote.filter(n):n)}var i,o,r=this;if(this.transport)return e=e||"",o=encodeURIComponent(e),i=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,o),this.transport.get(i,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(p.data,e,n),this.storage.set(p.protocol,location.protocol,n),this.storage.set(p.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(p.data),n.protocol=this.storage.get(p.protocol),n.thumbprint=this.storage.get(p.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){o.add(t.isFunction(r)?r():r)}var i,o=this,r=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),r&&i.done(n),this.transport=this.remote?new s(this.remote):null,this.initPromise=i.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function i(e){var i=r.slice(0);t.each(e,function(e){var n;return n=t.some(i,function(t){return o.dupDetector(e,t)}),!n&&i.push(e),i.length<o.limit}),n&&n(o.sorter(i))}var o=this,r=[],s=!1;r=this.index.get(e),r=this.sorter(r).slice(0,this.limit),r.length<this.limit?s=this._getFromRemote(e,i):this._cancelLastRemoteRequest(),s||(r.length>0||!this.transport)&&n&&n(r)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&s.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),o}(this);var c=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),u=function(){"use strict";var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),d=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var i="typeahead:";return t.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(i+e,t)}}),n}(),p=function(){"use strict";function e(e,t,n,i){var o;if(!n)return this;for(t=t.split(l),n=i?a(n,i):n,this._callbacks=this._callbacks||{};o=t.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function o(e){var t,n,i,o,s;if(!this._callbacks)return this;for(e=e.split(l),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)o=r(n.sync,this,[t].concat(i)),s=r(n.async,this,[t].concat(i)),o()&&c(s);return this}function r(e,t,n){function i(){for(var i,o=0,r=e.length;!i&&r>o;o+=1)i=e[o].apply(t,n)===!1;return!i}return i}function s(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function a(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,c=s();return{onSync:n,onAsync:t,off:i,trigger:o}}(),f=function(e){"use strict";function n(e,n,i){for(var o,r=[],s=0,a=e.length;a>s;s++)r.push(t.escapeRegExChars(e[s]));return o=i?"\\b("+r.join("|")+")\\b":"("+r.join("|")+")",n?new RegExp(o):new RegExp(o,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function r(t){var n,i,r;return(n=a.exec(t.data))&&(r=e.createElement(o.tagName),o.className&&(r.className=o.className),i=t.splitText(n.index),i.splitText(n[0].length),r.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(r,i)),!!n}function s(e,t){for(var n,i=3,o=0;o<e.childNodes.length;o++)n=e.childNodes[o],n.nodeType===i?o+=t(n)?1:0:s(n,t)}var a;o=t.mixin({},i,o),o.node&&o.pattern&&(o.pattern=t.isArray(o.pattern)?o.pattern:[o.pattern],a=n(o.pattern,o.caseSensitive,o.wordsOnly),s(o.node,r))}}(window.document),h=function(){"use strict";function n(n){var o,r,a,l,c=this;n=n||{},n.input||e.error("input is missing"),o=t.bind(this._onBlur,this),r=t.bind(this._onFocus,this),a=t.bind(this._onKeydown,this),l=t.bind(this._onInput,this),this.$hint=e(n.hint),this.$input=e(n.input).on("blur.tt",o).on("focus.tt",r).on("keydown.tt",a),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){s[e.which||e.keyCode]||t.defer(t.bind(c._onInput,c,e))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function r(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,p,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=s[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,i,o;switch(e){case"tab":i=this.getHint(),o=this.getInputValue(),n=i&&i!==o&&!r(t);break;case"up":case"down":n=!r(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!r(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;e=this.getInputValue(),t=o(e,this.query),n=t?this.query.length!==e.length:!1,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),i=""!==e&&n&&!this.hasOverflow(),!i&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:document.selection?(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),g=function(){"use strict";function n(n){n=n||{},n.templates=n.templates||{},n.source||e.error("missing source"),n.name&&!r(n.name)&&e.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||t.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=o(n.templates,this.displayFn),this.$el=e(c.dataset.replace("%CLASS%",this.name))}function i(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function o(e,n){function i(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function r(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var s="ttDataset",a="ttValue",l="ttDatum";return n.extractDatasetName=function(t){return e(t).data(s)},n.extractValue=function(t){return e(t).data(a)},n.extractDatum=function(t){return e(t).data(l)},t.mixin(n.prototype,p,{_render:function(n,i){function o(){return g.templates.empty({query:n,isEmpty:!0})}function r(){function o(t){var n;return n=e(c.suggestion).append(g.templates.suggestion(t)).data(s,g.name).data(a,g.displayFn(t)).data(l,t),n.children().each(function(){e(this).css(u.suggestionChild)}),n}var r,d;return r=e(c.suggestions).css(u.suggestions),d=t.map(i,o),r.append.apply(r,d),g.highlight&&f({className:"tt-highlight",node:r[0],pattern:n}),r}function d(){return g.templates.header({query:n,isEmpty:!h})}function p(){return g.templates.footer({query:n,isEmpty:!h})}if(this.$el){var h,g=this;this.$el.empty(),h=i&&i.length,!h&&this.templates.empty?this.$el.html(o()).prepend(g.templates.header?d():null).append(g.templates.footer?p():null):h&&this.$el.html(r()).prepend(g.templates.header?d():null).append(g.templates.footer?p():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),m=function(){"use strict";function n(n){var o,r,s,a=this;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),o=t.bind(this._onSuggestionClick,this),r=t.bind(this._onSuggestionMouseEnter,this),s=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",o).on("mouseenter.tt",".tt-suggestion",r).on("mouseleave.tt",".tt-suggestion",s),t.each(this.datasets,function(e){a.$menu.append(e.getRoot()),e.onSync("rendered",a._onRendered,a)})}function i(e){return new g(e)}return t.mixin(n.prototype,p,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,n,i,o;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),i=t.index(n)+e,i=(i+1)%(t.length+1)-1,-1===i)return void this.trigger("cursorRemoved");-1>i&&(i=t.length-1),this._setCursor(o=t.eq(i)),this._ensureVisible(o)}},_ensureVisible:function(e){var t,n,i,o;t=e.position().top,n=t+e.outerHeight(!0),i=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>t?this.$menu.scrollTop(i+t):n>o&&this.$menu.scrollTop(i+(n-o))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?u.ltr:u.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:g.extractDatum(e),value:g.extractValue(e),datasetName:g.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),n}(),v=function(){"use strict";function n(n){var o,r,s;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),o=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-input"),s=this.$node.find(".tt-hint"),r.on("blur.tt",function(e){var n,i,s;n=document.activeElement,i=o.is(n),s=o.has(n).length>0,t.isMsie()&&(i||s)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){r.focus()}))}),o.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new d({el:r}),this.dropdown=new m({menu:o,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new h({input:r,hint:s}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(t,n){var i,r,a,l;i=e(t),r=e(c.wrapper).css(u.wrapper),a=e(c.dropdown).css(u.dropdown),l=i.clone().css(u.hint).css(o(i)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),i.data(s,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?u.input:u.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(d){}return i.wrap(r).parent().prepend(n?l:null).append(a)}function o(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function r(e){var n=e.find(".tt-input");t.each(n.data(s),function(e,i){t.isUndefined(e)?n.removeAttr(i):n.attr(i,e)}),n.detach().removeData(s).removeClass("tt-input").insertAfter(e),e.remove()}var s="ttAttrs";return t.mixin(n.prototype,{_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&i&&(this._select(i),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,n,i,o,r,s;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=h.normalizeQuery(n),o=t.escapeRegExChars(i),r=new RegExp("^(?:"+o+")(.+$)","i"),s=r.exec(e.value),s?this.input.setHint(n+s[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,i,o;t=this.input.getHint(),n=this.input.getQuery(),i=e||this.input.isCursorAtEnd(),t&&n!==t&&i&&(o=this.dropdown.getDatumForTopSuggestion(),o&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),r(this.$node),this.$node=null}}),n}();!function(){"use strict";var n,i,o;n=e.fn.typeahead,i="ttTypeahead",o={initialize:function(n,o){function r(){var r,s,a=e(this);t.each(o,function(e){e.highlight=!!n.highlight}),s=new v({input:a,eventBus:r=new d({el:a}),withHint:t.isUndefined(n.hint)?!0:!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:o}),a.data(i,s)}return o=t.isArray(o)?o:[].slice.call(arguments,1),n=n||{},this.each(r)},open:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.close()}return this.each(t)},val:function(t){function n(){var n,o=e(this);(n=o.data(i))&&n.setVal(t)}function o(e){var t,n;return(t=e.data(i))&&(n=t.getVal()),n}return arguments.length?this.each(n):o(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(i))&&(t.destroy(),n.removeData(i))}return this.each(t)}},e.fn.typeahead=function(t){var n;return o[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(i)}),o[t].apply(n,[].slice.call(arguments,1))):o.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()}(window.jQuery);var ready;ready=function(){var e=new Tour({steps:[{element:"#introduction",content:"<h3> explore through our vast collection of notes </h3> <br/><ul style='padding-left:3px;font-size:15px;'>  look at what other people are learning { <b> top labels </b> } <br/> <br/> narrow your search with your intrests { <b> filter notes via labels </b> }</ul> ",backdrop:!0,placement:"bottom",path:"/"},{element:"#section_learn",content:"<h3> Learn what you aspire to and be what you want </h3> <br/><ul style='padding-left:3px;font-size:15px;'> create note and learn new things { <b> create new note </b> } <br/> <br/> manage your created note/s { <b> my notes </b> } </ul>",backdrop:!0,placement:"bottom",path:"/notes"},{element:"#section_feeds",content:"<h3>Check your daily learning guide </h3> <br/> <br/> <ul style='padding-left:3px;font-size:15px;'>Know about what your friends are learning on edunova { <b> newsfeed </b> } <br/> <br/> Follow users, get followed and search people on edunova { <b> manage your connections </b> } </ul> ",backdrop:!0,placement:"bottom",path:"/feeds"},{element:"#toappend",content:"<h3>profile page</h3> <br/><br/> <ul style='padding-left:3px;font-size:15px;'>Your profile speaks about your talent. Complete it and update it regularly { <b> edit your profile </b> } <br/> <br/> Follow users after you know what they are passionate about { <b> follow people </b> } </ul> ",backdrop:!0,placement:"bottom",path:"/profiles/vaibhavgeek"}],onEnd:function(){window.location.href="/notes"}});e.init(),$("#tour-go").click(function(){e.restart()})},$(document).ready(ready),$(document).on("page:load",ready),function(e){"use strict";function t(t){var n=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return e.each(n,function(){t=t.replace(this.re,this.ch)}),t}function n(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n="(?:"+Object.keys(t).join("|")+")",i=new RegExp(n),o=new RegExp(n,"g"),r=null==e?"":""+e;return i.test(r)?r.replace(o,function(e){return t[e]}):r}function i(t,n){var i=arguments,r=t,s=n;[].shift.apply(i);var a,l=this.each(function(){var t=e(this);if(t.is("select")){var n=t.data("selectpicker"),l="object"==typeof r&&r;if(n){if(l)for(var c in l)l.hasOwnProperty(c)&&(n.options[c]=l[c])}else{var u=e.extend({},o.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),l);u.template=e.extend({},o.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},t.data().template,l.template),t.data("selectpicker",n=new o(this,u,s))}"string"==typeof r&&(a=n[r]instanceof Function?n[r].apply(n,i):n.options[r])}});return"undefined"!=typeof a?a:l}String.prototype.includes||!function(){var e={}.toString,t=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(i){}return n}(),n="".indexOf,i=function(t){if(null==this)throw new TypeError;var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var o=i.length,r=String(t),s=r.length,a=arguments.length>1?arguments[1]:void 0,l=a?Number(a):0;
l!=l&&(l=0);var c=Math.min(Math.max(l,0),o);return s+c>o?!1:-1!=n.call(i,r,l)};t?t(String.prototype,"includes",{value:i,configurable:!0,writable:!0}):String.prototype.includes=i}(),String.prototype.startsWith||!function(){var e=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(i){}return n}(),t={}.toString,n=function(e){if(null==this)throw new TypeError;var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var i=n.length,o=String(e),r=o.length,s=arguments.length>1?arguments[1]:void 0,a=s?Number(s):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),i);if(r+l>i)return!1;for(var c=-1;++c<r;)if(n.charCodeAt(l+c)!=o.charCodeAt(c))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),Object.keys||(Object.keys=function(e,t,n){n=[];for(t in e)n.hasOwnProperty.call(e,t)&&n.push(t);return n}),e.fn.triggerNative=function(e){var t,n=this[0];n.dispatchEvent?("function"==typeof Event?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event"),t.initEvent(e,!0,!1)),n.dispatchEvent(t)):(n.fireEvent&&(t=document.createEventObject(),t.eventType=e,n.fireEvent("on"+e,t)),this.trigger(e))},e.expr[":"].icontains=function(t,n,i){var o=e(t),r=(o.data("tokens")||o.text()).toUpperCase();return r.includes(i[3].toUpperCase())},e.expr[":"].ibegins=function(t,n,i){var o=e(t),r=(o.data("tokens")||o.text()).toUpperCase();return r.startsWith(i[3].toUpperCase())},e.expr[":"].aicontains=function(t,n,i){var o=e(t),r=(o.data("tokens")||o.data("normalizedText")||o.text()).toUpperCase();return r.includes(i[3].toUpperCase())},e.expr[":"].aibegins=function(t,n,i){var o=e(t),r=(o.data("tokens")||o.data("normalizedText")||o.text()).toUpperCase();return r.startsWith(i[3].toUpperCase())};var o=function(t,n,i){i&&(i.stopPropagation(),i.preventDefault()),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=n,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=o.prototype.val,this.render=o.prototype.render,this.refresh=o.prototype.refresh,this.setStyle=o.prototype.setStyle,this.selectAll=o.prototype.selectAll,this.deselectAll=o.prototype.deselectAll,this.destroy=o.prototype.destroy,this.remove=o.prototype.remove,this.show=o.prototype.show,this.hide=o.prototype.hide,this.init()};o.VERSION="1.8.1",o.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},o.prototype={constructor:o,init:function(){var t=this,n=this.$element.attr("id");this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof n&&(this.$button.attr("data-id",n),e('label[for="'+n+'"]').click(function(e){e.preventDefault(),t.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){t.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown.bs.select",e)}}),t.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){t.$button.addClass("bs-invalid").focus(),t.$element.on({"focus.bs.select":function(){t.$button.focus(),t.$element.off("focus.bs.select")},"shown.bs.select":function(){t.$element.val(t.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&t.$button.removeClass("bs-invalid"),t.$element.off("rendered.bs.select")}})}),setTimeout(function(){t.$element.trigger("loaded.bs.select")})},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",o=this.autofocus?" autofocus":"",r=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",s=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+n(this.options.liveSearchPlaceholder)+'"')+"></div>":"",a=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",c='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+o+'><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open">'+r+s+a+'<ul class="dropdown-menu inner" role="menu"></ul>'+l+"</div></div>";return e(c)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul")[0].innerHTML=t,e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$menuInner[0].innerHTML=e},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var i=this,o=[],r=0,s=document.createElement("option"),a=-1,l=function(e,t,n,i){return"<li"+("undefined"!=typeof n&""!==n?' class="'+n+'"':"")+("undefined"!=typeof t&null!==t?' data-original-index="'+t+'"':"")+("undefined"!=typeof i&null!==i?'data-optgroup="'+i+'"':"")+">"+e+"</li>"},c=function(e,o,r,s){return'<a tabindex="0"'+("undefined"!=typeof o?' class="'+o+'"':"")+("undefined"!=typeof r?' style="'+r+'"':"")+(i.options.liveSearchNormalize?' data-normalized-text="'+t(n(e))+'"':"")+("undefined"!=typeof s||null!==s?' data-tokens="'+s+'"':"")+">"+e+'<span class="'+i.options.iconBase+" "+i.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(a--,!this.$element.find(".bs-title-option").length)){var u=this.$element[0];s.className="bs-title-option",s.appendChild(document.createTextNode(this.options.title)),s.value="",u.insertBefore(s,u.firstChild),void 0===e(u.options[u.selectedIndex]).attr("selected")&&(s.selected=!0)}return this.$element.find("option").each(function(t){var n=e(this);if(a++,!n.hasClass("bs-title-option")){var s=this.className||"",u=this.style.cssText,d=n.data("content")?n.data("content"):n.html(),p=n.data("tokens")?n.data("tokens"):null,f="undefined"!=typeof n.data("subtext")?'<small class="text-muted">'+n.data("subtext")+"</small>":"",h="undefined"!=typeof n.data("icon")?'<span class="'+i.options.iconBase+" "+n.data("icon")+'"></span> ':"",g=this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled;if(""!==h&&g&&(h="<span>"+h+"</span>"),i.options.hideDisabled&&g)return void a--;if(n.data("content")||(d=h+'<span class="text">'+d+f+"</span>"),"OPTGROUP"===this.parentNode.tagName&&n.data("divider")!==!0){var m=" "+this.parentNode.className||"";if(0===n.index()){r+=1;var v=this.parentNode.label,b="undefined"!=typeof n.parent().data("subtext")?'<small class="text-muted">'+n.parent().data("subtext")+"</small>":"",y=n.parent().data("icon")?'<span class="'+i.options.iconBase+" "+n.parent().data("icon")+'"></span> ':"";v=y+'<span class="text">'+v+b+"</span>",0!==t&&o.length>0&&(a++,o.push(l("",null,"divider",r+"div"))),a++,o.push(l(v,null,"dropdown-header"+m,r))}o.push(l(c(d,"opt "+s+m,u,p),t,"",r))}else n.data("divider")===!0?o.push(l("",t,"divider")):n.data("hidden")===!0?o.push(l(c(d,s,u,p),t,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(a++,o.push(l("",null,"divider",r+"div"))),o.push(l(c(d,s,u,p),t)));i.liObj[t]=a}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),o.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var n,i=this;t!==!1&&this.$element.find("option").each(function(e){var t=i.findLis().eq(i.liObj[e]);i.setDisabled(e,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,t),i.setSelected(e,this.selected,t)}),this.tabIndex();var o=this.$element.find("option").map(function(){if(this.selected){if(i.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var t,n=e(this),o=n.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+n.data("icon")+'"></i> ':"";return t=i.options.showSubtext&&n.data("subtext")&&!i.multiple?' <small class="text-muted">'+n.data("subtext")+"</small>":"","undefined"!=typeof n.attr("title")?n.attr("title"):n.data("content")&&i.options.showContent?n.data("content"):o+n.html()+t}}).toArray(),r=this.multiple?o.join(this.options.multipleSeparator):o[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var s=this.options.selectedTextFormat.split(">");if(s.length>1&&o.length>s[1]||1==s.length&&o.length>=2){n=this.options.hideDisabled?", [disabled]":"";var a=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+n).length,l="function"==typeof this.options.countSelectedText?this.options.countSelectedText(o.length,a):this.options.countSelectedText;r=l.replace("{0}",o.length.toString()).replace("{1}",a.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(r=this.options.title),r||(r="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",e.trim(r.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(r),this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var n=e?e:this.options.style;"add"==t?this.$button.addClass(n):"remove"==t?this.$button.removeClass(n):(this.$button.removeClass(this.options.style),this.$button.addClass(n))},liHeight:function(t){if(t||this.options.size!==!1&&!this.sizeInfo){var n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("ul"),r=document.createElement("li"),s=document.createElement("li"),a=document.createElement("a"),l=document.createElement("span"),c=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,u=this.options.liveSearch?document.createElement("div"):null,d=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,p=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(l.className="text",n.className=this.$menu[0].parentNode.className+" open",i.className="dropdown-menu open",o.className="dropdown-menu inner",r.className="divider",l.appendChild(document.createTextNode("Inner text")),a.appendChild(l),s.appendChild(a),o.appendChild(s),o.appendChild(r),c&&i.appendChild(c),u){var f=document.createElement("span");u.className="bs-searchbox",f.className="form-control",u.appendChild(f),i.appendChild(u)}d&&i.appendChild(d),i.appendChild(o),p&&i.appendChild(p),n.appendChild(i),document.body.appendChild(n);var h=a.offsetHeight,g=c?c.offsetHeight:0,m=u?u.offsetHeight:0,v=d?d.offsetHeight:0,b=p?p.offsetHeight:0,y=e(r).outerHeight(!0),w="function"==typeof getComputedStyle?getComputedStyle(i):!1,E=w?null:e(i),x=parseInt(w?w.paddingTop:E.css("paddingTop"))+parseInt(w?w.paddingBottom:E.css("paddingBottom"))+parseInt(w?w.borderTopWidth:E.css("borderTopWidth"))+parseInt(w?w.borderBottomWidth:E.css("borderBottomWidth")),C=x+parseInt(w?w.marginTop:E.css("marginTop"))+parseInt(w?w.marginBottom:E.css("marginBottom"))+2;document.body.removeChild(n),this.sizeInfo={liHeight:h,headerHeight:g,searchHeight:m,actionsHeight:v,doneButtonHeight:b,dividerHeight:y,menuPadding:x,menuExtras:C}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var t,n,i,o,r=this,s=this.$menu,a=this.$menuInner,l=e(window),c=this.$newElement[0].offsetHeight,u=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,p=this.sizeInfo.searchHeight,f=this.sizeInfo.actionsHeight,h=this.sizeInfo.doneButtonHeight,g=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,v=this.sizeInfo.menuExtras,b=this.options.hideDisabled?".disabled":"",y=function(){i=r.$newElement.offset().top-l.scrollTop(),o=l.height()-i-c};if(y(),"auto"===this.options.size){var w=function(){var l,c=function(t,n){return function(i){return n?i.classList?i.classList.contains(t):e(i).hasClass(t):!(i.classList?i.classList.contains(t):e(i).hasClass(t))}},g=r.$menuInner[0].getElementsByTagName("li"),b=Array.prototype.filter?Array.prototype.filter.call(g,c("hidden",!1)):r.$lis.not(".hidden"),w=Array.prototype.filter?Array.prototype.filter.call(b,c("dropdown-header",!0)):b.filter(".dropdown-header");y(),t=o-v,r.options.container?(s.data("height")||s.data("height",s.height()),n=s.data("height")):n=s.height(),r.options.dropupAuto&&r.$newElement.toggleClass("dropup",i>o&&n>t-v),r.$newElement.hasClass("dropup")&&(t=i-v),l=b.length+w.length>3?3*u+v-2:0,s.css({"max-height":t+"px",overflow:"hidden","min-height":l+d+p+f+h+"px"}),a.css({"max-height":t-d-p-f-h-m+"px","overflow-y":"auto","min-height":Math.max(l-m,0)+"px"})};w(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",w),l.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",w)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(b).length>this.options.size){var E=this.$lis.not(".divider").not(b).children().slice(0,this.options.size).last().parent().index(),x=this.$lis.slice(0,E+1).filter(".divider").length;t=u*this.options.size+x*g+m,r.options.container?(s.data("height")||s.data("height",s.height()),n=s.data("height")):n=s.height(),r.options.dropupAuto&&this.$newElement.toggleClass("dropup",i>o&&n>t-v),s.css({"max-height":t+d+p+f+h+"px",overflow:"hidden","min-height":""}),a.css({"max-height":t-m+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var e=this.$menu.parent().clone().appendTo("body"),t=this.options.container?this.$newElement.clone().appendTo("body"):e,n=e.children(".dropdown-menu").outerWidth(),i=t.css("width","auto").children("button").outerWidth();e.remove(),t.remove(),this.$newElement.css("width",Math.max(n,i)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,n,i=this,o=function(e){i.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",e.hasClass("dropup")),t=e.offset(),n=e.hasClass("dropup")?0:e[0].offsetHeight,i.$bsContainer.css({top:t.top+n,left:t.left,width:e[0].offsetWidth})};this.$button.on("click",function(){var t=e(this);i.isDisabled()||(o(i.$newElement),i.$bsContainer.appendTo(i.options.container).toggleClass("open",!t.hasClass("open")).append(i.$menu))}),e(window).on("resize scroll",function(){o(i.$newElement)}),this.$element.on("hide.bs.select",function(){i.$menu.data("height",i.$menu.height()),i.$bsContainer.detach()})},setSelected:function(e,t,n){n||(n=this.findLis().eq(this.liObj[e])),n.toggleClass("selected",t)},setDisabled:function(e,t,n){n||(n=this.findLis().eq(this.liObj[e])),t?n.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):n.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var t=this,n=e(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),n.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&n.data("spaceSelect")&&(e.preventDefault(),n.data("spaceSelect",!1))}),this.$button.on("click",function(){t.setSize(),t.$element.on("shown.bs.select",function(){if(t.options.liveSearch||t.multiple){if(!t.multiple){var e=t.liObj[t.$element[0].selectedIndex];if("number"!=typeof e||t.options.size===!1)return;var n=t.$lis.eq(e)[0].offsetTop-t.$menuInner[0].offsetTop;n=n-t.$menuInner[0].offsetHeight/2+t.sizeInfo.liHeight/2,t.$menuInner[0].scrollTop=n}}else t.$menuInner.find(".selected a").focus()})}),this.$menuInner.on("click","li a",function(n){var i=e(this),o=i.parent().data("originalIndex"),r=t.$element.val(),s=t.$element.prop("selectedIndex");if(t.multiple&&n.stopPropagation(),n.preventDefault(),!t.isDisabled()&&!i.parent().hasClass("disabled")){var a=t.$element.find("option"),l=a.eq(o),c=l.prop("selected"),u=l.parent("optgroup"),d=t.options.maxOptions,p=u.data("maxOptions")||!1;if(t.multiple){if(l.prop("selected",!c),t.setSelected(o,!c),i.blur(),d!==!1||p!==!1){var f=d<a.filter(":selected").length,h=p<u.find("option:selected").length;if(d&&f||p&&h)if(d&&1==d)a.prop("selected",!1),l.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected"),t.setSelected(o,!0);else if(p&&1==p){u.find("option:selected").prop("selected",!1),l.prop("selected",!0);var g=i.parent().data("optgroup");t.$menuInner.find('[data-optgroup="'+g+'"]').removeClass("selected"),t.setSelected(o,!0)}else{var m="function"==typeof t.options.maxOptionsText?t.options.maxOptionsText(d,p):t.options.maxOptionsText,v=m[0].replace("{n}",d),b=m[1].replace("{n}",p),y=e('<div class="notify"></div>');m[2]&&(v=v.replace("{var}",m[2][d>1?0:1]),b=b.replace("{var}",m[2][p>1?0:1])),l.prop("selected",!1),t.$menu.append(y),d&&f&&(y.append(e("<div>"+v+"</div>")),t.$element.trigger("maxReached.bs.select")),p&&h&&(y.append(e("<div>"+b+"</div>")),t.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){t.setSelected(o,!1)},10),y.delay(750).fadeOut(300,function(){e(this).remove()})}}}else a.prop("selected",!1),l.prop("selected",!0),t.$menuInner.find(".selected").removeClass("selected"),t.setSelected(o,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus(),(r!=t.$element.val()&&t.multiple||s!=t.$element.prop("selectedIndex")&&!t.multiple)&&(t.$element.triggerNative("change"),t.$element.trigger("changed.bs.select",[o,l.prop("selected"),c]))}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(n){n.currentTarget==this&&(n.preventDefault(),n.stopPropagation(),t.options.liveSearch&&!e(n.target).hasClass("close")?t.$searchbox.focus():t.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){t.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(n){t.options.liveSearch?t.$searchbox.focus():t.$button.focus(),n.preventDefault(),n.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll(),t.$element.triggerNative("change")}),this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var i=this,o=e('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){i.$menuInner.find(".active").removeClass("active"),i.$searchbox.val()&&(i.$searchbox.val(""),i.$lis.not(".is-hidden").removeClass("hidden"),o.parent().length&&o.remove()),i.multiple||i.$menuInner.find(".selected").addClass("active"),setTimeout(function(){i.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(i.$searchbox.val()){var r=i.$lis.not(".is-hidden").removeClass("hidden").children("a");r=i.options.liveSearchNormalize?r.not(":a"+i._searchStyle()+'("'+t(i.$searchbox.val())+'")'):r.not(":"+i._searchStyle()+'("'+i.$searchbox.val()+'")'),r.parent().addClass("hidden"),i.$lis.filter(".dropdown-header").each(function(){var t=e(this),n=t.data("optgroup");0===i.$lis.filter("[data-optgroup="+n+"]").not(t).not(".hidden").length&&(t.addClass("hidden"),i.$lis.filter("[data-optgroup="+n+"div]").addClass("hidden"))});var s=i.$lis.not(".hidden");s.each(function(t){var n=e(this);n.hasClass("divider")&&(n.index()===s.first().index()||n.index()===s.last().index()||s.eq(t+1).hasClass("divider"))&&n.addClass("hidden")}),i.$lis.not(".hidden, .no-results").length?o.parent().length&&o.remove():(o.parent().length&&o.remove(),o.html(i.options.noneResultsText.replace("{0}",'"'+n(i.$searchbox.val())+'"')).show(),i.$menuInner.append(o))}else i.$lis.not(".is-hidden").removeClass("hidden"),o.parent().length&&o.remove();i.$lis.filter(".active").removeClass("active"),i.$searchbox.val()&&i.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),e(this).focus()})},_searchStyle:function(){var e={begins:"ibegins",startsWith:"ibegins"};return e[this.options.liveSearchStyle]||"icontains"},val:function(e){return"undefined"!=typeof e?(this.$element.val(e),this.render(),this.$element):this.$element.val()},changeAll:function(t){"undefined"==typeof t&&(t=!0),this.findLis();for(var n=this.$element.find("option"),i=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").toggleClass("selected",t),o=i.length,r=[],s=0;o>s;s++){var a=i[s].getAttribute("data-original-index");r[r.length]=n.eq(a)[0]}e(r).prop("selected",t),this.render(!1)},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},keydown:function(n){var i,o,r,s,a,l,c,u,d,p=e(this),f=p.is("input")?p.parent().parent():p.parent(),h=f.data("this"),g=":not(.disabled, .hidden, .dropdown-header, .divider)",m={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(h.options.liveSearch&&(f=p.parent().parent()),h.options.container&&(f=h.$menu),i=e("[role=menu] li",f),d=h.$newElement.hasClass("open"),!d&&(n.keyCode>=48&&n.keyCode<=57||n.keyCode>=96&&n.keyCode<=105||n.keyCode>=65&&n.keyCode<=90)&&(h.options.container?h.$button.trigger("click"):(h.setSize(),h.$menu.parent().addClass("open"),d=!0),h.$searchbox.focus()),h.options.liveSearch&&(/(^9$|27)/.test(n.keyCode.toString(10))&&d&&0===h.$menu.find(".active").length&&(n.preventDefault(),h.$menu.parent().removeClass("open"),h.options.container&&h.$newElement.removeClass("open"),h.$button.focus()),i=e("[role=menu] li"+g,f),p.val()||/(38|40)/.test(n.keyCode.toString(10))||0===i.filter(".active").length&&(i=h.$menuInner.find("li"),i=h.options.liveSearchNormalize?i.filter(":a"+h._searchStyle()+"("+t(m[n.keyCode])+")"):i.filter(":"+h._searchStyle()+"("+m[n.keyCode]+")"))),i.length){if(/(38|40)/.test(n.keyCode.toString(10)))o=i.index(i.find("a").filter(":focus").parent()),s=i.filter(g).first().index(),a=i.filter(g).last().index(),r=i.eq(o).nextAll(g).eq(0).index(),l=i.eq(o).prevAll(g).eq(0).index(),c=i.eq(r).prevAll(g).eq(0).index(),h.options.liveSearch&&(i.each(function(t){e(this).hasClass("disabled")||e(this).data("index",t)}),o=i.index(i.filter(".active")),s=i.first().data("index"),a=i.last().data("index"),r=i.eq(o).nextAll().eq(0).data("index"),l=i.eq(o).prevAll().eq(0).data("index"),c=i.eq(r).prevAll().eq(0).data("index")),u=p.data("prevIndex"),38==n.keyCode?(h.options.liveSearch&&o--,o!=c&&o>l&&(o=l),s>o&&(o=s),o==u&&(o=a)):40==n.keyCode&&(h.options.liveSearch&&o++,-1==o&&(o=0),o!=c&&r>o&&(o=r),o>a&&(o=a),o==u&&(o=s)),p.data("prevIndex",o),h.options.liveSearch?(n.preventDefault(),p.hasClass("dropdown-toggle")||(i.removeClass("active").eq(o).addClass("active").children("a").focus(),p.focus())):i.eq(o).children("a").focus();else if(!p.is("input")){var v,b,y=[];i.each(function(){e(this).hasClass("disabled")||e.trim(e(this).children("a").text().toLowerCase()).substring(0,1)==m[n.keyCode]&&y.push(e(this).index())}),v=e(document).data("keycount"),v++,e(document).data("keycount",v),b=e.trim(e(":focus").text().toLowerCase()).substring(0,1),b!=m[n.keyCode]?(v=1,e(document).data("keycount",v)):v>=y.length&&(e(document).data("keycount",0),v>y.length&&(v=1)),i.eq(y[v-1]).children("a").focus()}if((/(13|32)/.test(n.keyCode.toString(10))||/(^9$)/.test(n.keyCode.toString(10))&&h.options.selectOnTab)&&d){if(/(32)/.test(n.keyCode.toString(10))||n.preventDefault(),h.options.liveSearch)/(32)/.test(n.keyCode.toString(10))||(h.$menuInner.find(".active a").click(),p.focus());else{var w=e(":focus");w.click(),w.focus(),n.preventDefault(),e(document).data("spaceSelect",!0)}e(document).data("keycount",0)}(/(^9$|27)/.test(n.keyCode.toString(10))&&d&&(h.multiple||h.options.liveSearch)||/(27)/.test(n.keyCode.toString(10))&&!d)&&(h.$menu.parent().removeClass("open"),h.options.container&&h.$newElement.removeClass("open"),h.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var r=e.fn.selectpicker;e.fn.selectpicker=i,e.fn.selectpicker.Constructor=o,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=r,this},e(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',o.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load.bs.select.data-api",function(){e(".selectpicker").each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.NProgress=t()}(this,function(){function e(e,t,n){return t>e?t:e>n?n:e}function t(e){return 100*(-1+e)}function n(e,n,i){var o;return o="translate3d"===c.positionUsing?{transform:"translate3d("+t(e)+"%,0,0)"}:"translate"===c.positionUsing?{transform:"translate("+t(e)+"%,0)"}:{"margin-left":t(e)+"%"},o.transition="all "+n+"ms "+i,o}function i(e,t){var n="string"==typeof e?e:s(e);return n.indexOf(" "+t+" ")>=0}function o(e,t){var n=s(e),o=n+t;i(n,t)||(e.className=o.substring(1))}function r(e,t){var n,o=s(e);i(e,t)&&(n=o.replace(" "+t+" "," "),e.className=n.substring(1,n.length-1))}function s(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function a(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var l={};l.version="0.1.6";var c=l.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};l.configure=function(e){var t,n;for(t in e)n=e[t],void 0!==n&&e.hasOwnProperty(t)&&(c[t]=n);return this},l.status=null,l.set=function(t){var i=l.isStarted();t=e(t,c.minimum,1),l.status=1===t?null:t;var o=l.render(!i),r=o.querySelector(c.barSelector),s=c.speed,a=c.easing;return o.offsetWidth,u(function(e){""===c.positionUsing&&(c.positionUsing=l.getPositioningCSS()),d(r,n(t,s,a)),1===t?(d(o,{transition:"none",opacity:1}),o.offsetWidth,setTimeout(function(){d(o,{transition:"all "+s+"ms linear",opacity:0}),setTimeout(function(){l.remove(),e()},s)},s)):setTimeout(e,s)}),this},l.isStarted=function(){return"number"==typeof l.status},l.start=function(){l.status||l.set(0);var e=function(){setTimeout(function(){l.status&&(l.trickle(),e())},c.trickleSpeed)};return c.trickle&&e(),this},l.done=function(e){return e||l.status?l.inc(.3+.5*Math.random()).set(1):this},l.inc=function(t){var n=l.status;return n?("number"!=typeof t&&(t=(1-n)*e(Math.random()*n,.1,.95)),n=e(n+t,0,.994),l.set(n)):l.start()},l.trickle=function(){return l.inc(Math.random()*c.trickleRate)},function(){var e=0,t=0;l.promise=function(n){return n&&"resolved"!=n.state()?(0==t&&l.start(),e++,t++,n.always(function(){t--,0==t?(e=0,l.done()):l.set((e-t)/e)}),this):this}}(),l.render=function(e){if(l.isRendered())return document.getElementById("nprogress");o(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=c.template;var i,r=n.querySelector(c.barSelector),s=e?"-100":t(l.status||0),u=document.querySelector(c.parent);return d(r,{transition:"all 0 linear",transform:"translate3d("+s+"%,0,0)"}),c.showSpinner||(i=n.querySelector(c.spinnerSelector),i&&a(i)),u!=document.body&&o(u,"nprogress-custom-parent"),u.appendChild(n),n},l.remove=function(){r(document.documentElement,"nprogress-busy"),r(document.querySelector(c.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&a(e)},l.isRendered=function(){return!!document.getElementById("nprogress")},l.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var u=function(){function e(){var n=t.shift();
n&&n(e)}var t=[];return function(n){t.push(n),1==t.length&&e()}}(),d=function(){function e(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function t(e){var t=document.body.style;if(e in t)return e;for(var n,i=o.length,r=e.charAt(0).toUpperCase()+e.slice(1);i--;)if(n=o[i]+r,n in t)return n;return e}function n(n){return n=e(n),r[n]||(r[n]=t(n))}function i(e,t,i){t=n(t),e.style[t]=i}var o=["Webkit","O","Moz","ms"],r={};return function(e,t){var n,o,r=arguments;if(2==r.length)for(n in t)o=t[n],void 0!==o&&t.hasOwnProperty(n)&&i(e,n,o);else i(e,r[1],r[2])}}();return l}),jQuery(function(){jQuery(document).on("page:fetch",function(){NProgress.start()}),jQuery(document).on("page:receive",function(){NProgress.set(.7)}),jQuery(document).on("page:change",function(){NProgress.done()}),jQuery(document).on("page:restore",function(){NProgress.remove()})}),jQuery(function(){jQuery(document).on("ajaxStart",function(){NProgress.start()}),jQuery(document).on("ajaxStop",function(){NProgress.done()})}),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this),function(){}.call(this);